/** Copyright © 2005-2020 Apple Inc. All Rights Reserved. **/
experimentData={log_host:"log.optimizely.com",goal_expressions:{341615730:["^engagement$"]},experiments:{17260463425:{audiences:[17309783189],variation_weights:{17281613222:5001,17281482174:4999},name:"USAPCopyAdditions_Desk_CON_20200109p",enabled:!0,variation_ids:["17281613222","17281482174"],site_catalyst_evar:52,urls:[{match:"regex",value:".apple.com/shop/apw/checkout"}],enabled_variation_ids:["17281613222","17281482174"]},17266093545:{audiences:[17264466144],variation_weights:{17413630596:5e3,17273875841:5e3},name:"USAPCopyAdditions_MOW_CON_20200109p",enabled:!0,variation_ids:["17413630596","17273875841"],site_catalyst_evar:52,urls:[{match:"regex",value:".apple.com/shop/apw/checkout"}],enabled_variation_ids:["17413630596","17273875841"]}},audiences:{17264466144:{conditions:["and",["or",["or",{dimension_id:856271453,value:"var optlyaovtm = 0; //1 = ALWAYS ON, 0 = OBEY TIMER\nvar optlytmb = 1578559089000; //BEGIN TIME IN MILLISECONDS 05/05/2017 12:00:00 AM\nvar optlytme = 1582271999000; //END TIME IN MILLISECONDS 2/20/2020 11:59:59 PM PDT\n\n// *** DO NOT MODIFY BELOW THIS LINE ***\n\n//soft time logic \nvar optlytm = false; \nif(window.optimizely_tm >= optlytmb && window.optimizely_tm <= optlytme){\n\toptlytm = true;\n} \n\n//return val \noptlytm || optlyaovtm;"}]],["or",["or",{dimension_id:696316307,value:"android"},{dimension_id:696316307,value:"blackberry"},{dimension_id:696316307,value:"windows phone"},{dimension_id:696316307,value:"iphone"},{dimension_id:696316307,value:"mobile"}]],["or",["not",["or",{dimension_id:7973551847,value:"ipad"}]]]],name:"US AP Copy Add MOW"},862060009:{conditions:["and",{dimension_id:856271453,value:'window.optimizely.push(["activate"]);\nfalse;'}],name:"Trigger Manual Activation Call",segment_id:856540696},17309783189:{conditions:["and",["or",["or",{dimension_id:856271453,value:"var optlyaovtm = 0; //1 = ALWAYS ON, 0 = OBEY TIMER\nvar optlytmb = 1578559089000; //BEGIN TIME IN MILLISECONDS 02/06/2019 12:00:01 AM PST\nvar optlytme = 1582271999000; //END TIME IN MILLISECONDS 2/20/2020 11:59:59 PM PDT\n// *** DO NOT MODIFY BELOW THIS LINE ***\n\n//soft time logic \nvar optlytm = false; \nif(window.optimizely_tm >= optlytmb && window.optimizely_tm <= optlytme){\n\toptlytm = true;\n} \n\n//return val \noptlytm || optlyaovtm;"}]],["or",["or",{dimension_id:696316307,value:"ff"},{dimension_id:696316307,value:"ff2"},{dimension_id:696316307,value:"ff3"},{dimension_id:696316307,value:"ff4"},{dimension_id:696316307,value:"gc"},{dimension_id:696316307,value:"ie10"},{dimension_id:696316307,value:"ie8"},{dimension_id:696316307,value:"ie9"},{dimension_id:696316307,value:"opera"},{dimension_id:696316307,value:"safari3"},{dimension_id:696316307,value:"safari4"},{dimension_id:696316307,value:"safari5"},{dimension_id:696316307,value:"safari6"},{dimension_id:696316307,value:"safari7"},{dimension_id:696316307,value:"safari8"}],["or",{dimension_id:856271453,value:"window.navigator.userAgent.indexOf('Version/9') !== -1"}],["or",{dimension_id:856271453,value:"window.navigator.userAgent.indexOf('Version/10') !== -1"}],["or",{dimension_id:7973551847,value:"tablet"},{dimension_id:7973551847,value:"ipad"}],["or",{dimension_id:856271453,value:"window.navigator.userAgent.indexOf('Version/11') !== -1"}],["or",{dimension_id:856271453,value:"window.navigator.userAgent.indexOf('Version/12') !== -1"}],["or",{dimension_id:11498235908,value:"safari"}]],["or",["not",["or",{dimension_id:7973551847,value:"mobile"},{dimension_id:7973551847,value:"iphone"}]]]],name:"US AP Copy Add Desk"}},www_host:"app.optimizely.com",public_suffixes:{"apple.com":["secure2.store.apple.com"]},dimensions:{1464880010:{api_name:"LZ",condition_type:"custom_dimension",name:"Landing Zone",segment_id:1469580014},696316307:{condition_type:"browser"},11498235908:{condition_type:"browser_version"},856271453:{condition_type:"code"},7973551847:{condition_type:"device"}},version:"master-89-39-2.423775646656746440",admin_account_id:199382811,blacklisted_experiments:[15135280705,16866333634,14394740291,15106210180,15505690725,15517280519,16964280520,15299830431,14436940174,16852634575,16860903732,15291840726,16967870745,16887571727,16924820028,16934956197],project_id:341800575,revision:1272,summary_revenue_goal_id:341892035,installation_verified:!0,preview_host:"//optimizely.s3.amazonaws.com",api_host:"api.optimizely.com",variations:{17273875841:{code:"/* _optimizely_evaluate=force */\noptimizely.$('<style>.as-l-container.rs-checkout-action > .row > div > div{display: flex; flex-direction: column;} .as-l-container.rs-checkout-action > .row > div > div > .rs-checkout-applepay-button{order: 2} .as-l-container.rs-checkout-action > .row > div > div > #mvt-checkout-continuedisclaimer{order: 1} .as-l-container.rs-checkout-action > .row > div > div > .rs-checkout-continuedisclaimer{order: 3}.rs-checkout-action div + #mvt-checkout-continuedisclaimer{display: none;}.rs-checkout-action div .rs-checkout-applepay-button ~ #mvt-checkout-continuedisclaimer{display: block; padding-top: 0; padding-bottom: 14px;}</style>').appendTo('head');\n/* _optimizely_evaluate=safe */\n\noptimizely.$(\"<div class='rs-checkout-continuedisclaimer' id='mvt-checkout-continuedisclaimer'>Continue with Apple Pay to review and edit your order details. Don't worry, your card won't be charged yet.</div>\").insertAfter(optimizely.$('.rs-checkout-action .rs-checkout-applepay-button + #rs-checkout-continuedisclaimer-bottom'));",name:"Variation #1"},17413630596:{name:"Original"},17281482174:{code:"/* _optimizely_evaluate=force */\noptimizely.$('<style>.as-l-container.rs-checkout-action > .row > div > div{display: flex; flex-direction: column;} .as-l-container.rs-checkout-action > .row > div > div > .rs-checkout-applepay-button{order: 2} .as-l-container.rs-checkout-action > .row > div > div > #mvt-checkout-continuedisclaimer{order: 1} .as-l-container.rs-checkout-action > .row > div > div > .rs-checkout-continuedisclaimer{order: 3}.rs-checkout-action div + #mvt-checkout-continuedisclaimer{display: none;}.rs-checkout-action div .rs-checkout-applepay-button ~ #mvt-checkout-continuedisclaimer{display: block; padding-top: 0; padding-bottom: 14px;}</style>').appendTo('head');\n/* _optimizely_evaluate=safe */\n\noptimizely.$(\"<div class='rs-checkout-continuedisclaimer' id='mvt-checkout-continuedisclaimer'>Continue with Apple Pay to review and edit your order details. Don't worry, your card won't be charged yet.</div>\").insertAfter(optimizely.$('.rs-checkout-action .rs-checkout-applepay-button + #rs-checkout-continuedisclaimer-bottom'));",name:"Variation #1"},17281613222:{name:"Original"}},project_js:"\n",segments:{341793217:{segment_value_type:"source_type",api_name:"optimizely_source_type",id:341793217,name:"Source Type"},1469580014:{api_name:"LZ",is_api_only:!0,dimension_id:1464880010,id:1469580014,name:"Landing Zone"},856540696:{audience_id:862060009,api_name:"trigger_manual_activation_call_2_2_3_1",id:856540696,name:"Trigger Manual Activation Call"},341824156:{segment_value_type:"browser",api_name:"optimizely_browser",id:341824156,name:"Browser"},341794206:{segment_value_type:"mobile",api_name:"optimizely_mobile",id:341794206,name:"Mobile Visitors"},341932127:{segment_value_type:"campaign",api_name:"optimizely_campaign",id:341932127,name:"Campaign"}}},function(){var asyncRequest={},preview_loader={},integrator={},api={},distributor={},query={},id={},redirect={},detect={},directive={},json={},tracker={},condition={facade:{}},template={},visitor={},activator={},rule_builder={},main={},rules={},feature_detect={},cookie={},user={},iapi={},evaluator={},data={},dcp={},asyncInfo={},segmenter={},timer={},optly={murmur3:{},Visitor:{},taint:{},nativity:{},timeAndDayInterval:{},client:{third_party:{},geolocation:{},rum:{RumCollector:{}},storage:{Storage:{}},diagnostic:{},Facade:{},preview:{Logger:{}}},CIDR:{},Cleanse:{},match:{},hashing:{}},common={},behavior={Policy:{},FIELDS:{},Store:{},Event:{},EventBase:{}},useragent={},plan={},Z,_;geolocation={},optly.client.geolocation.makeRequest=function(e,t,n){geolocation.cdn3Requested=+new Date,optly.client.geolocation.addScriptTag(e)},optly.client.geolocation.addScriptTag=function(e){var t=document.head||document.getElementsByTagName("head")[0]||document.documentElement,n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,t.insertBefore(n,t.firstChild)},geolocation.requestGeo=optly.client.geolocation.makeRequest,optly.nativity.getNativeGetElementsByClassName=function(){var e=document.getElementsByClassName;if(!optly.nativity.isNativeFunction(e)){var t=(window.optimizely||{}).getElementsByClassName,n=(window.optly||{}).getElementsByClassName;e=optly.nativity.isNativeFunction(t)?t:optly.nativity.isNativeFunction(n)?n:null}return e},optly.nativity.isNativeFunction=function(e){return e&&-1!==String(e).indexOf("[native code]")},optly.Cleanse.each=function(e,t,n){var i=!!Object.prototype.__lookupGetter__,r=!!Object.prototype.__lookupSetter__;for(var a in e)if(e.hasOwnProperty(a)){var o=i?e.__lookupGetter__(a):null,s=r?e.__lookupSetter__(a):null;try{var l=o?null:e[a];t.call(n,a,l,o,s)}catch(e){}}},optly.Cleanse.finish=function(){if(optly.Cleanse.running){optly.Cleanse.running=!1,optly.Cleanse.each(optly.Cleanse.types,function(n,i){if(Object.prototype.__defineGetter__){var e=optly.Cleanse.getters[n];optly.Cleanse.each(e,function(e,t){i.prototype.__defineGetter__(e,t),optly.Cleanse.log("restored getter",n,e)})}if(Object.prototype.__defineSetter__){var t=optly.Cleanse.setters[n];optly.Cleanse.each(t,function(e,t){i.prototype.__defineSetter__(e,t),optly.Cleanse.log("restored setter",n,e)})}var r=optly.Cleanse.properties[n];optly.Cleanse.each(r,function(e,t){i.prototype[e]=t,optly.Cleanse.log("restored property",n,e)})}),optly.Cleanse.unfixGetElementsByClassName(),optly.Cleanse.log("finish");var e=window.console,t="optimizely_log=true";if((-1!==window.location.hash.indexOf(t)||-1!==window.location.search.indexOf(t))&&e&&e.log)for(var n=optly.Cleanse.logs,i=0;i<n.length;i++)e.log(n[i])}},optly.Cleanse.log=function(e,t,n){t?(t=t.replace(/_/g,""),optly.Cleanse.logs.push("Optimizely / Info / Cleanse / "+e+": "+t+"."+n)):optly.Cleanse.logs.push("Optimizely / Info / Cleanse / "+e)},optly.Cleanse.start=function(){var e=window.location.hostname;if(-1===e.indexOf("optimizely")||-1!==e.indexOf("edit")||-1!==e.indexOf("preview")||-1!==e.indexOf("test"))if(optly.Cleanse.running)optly.Cleanse.log("already running so didn't start");else{for(var t in optly.Cleanse.log("start"),optly.Cleanse.running=!0,optly.Cleanse.types)optly.Cleanse.types[t]||delete optly.Cleanse.types[t];optly.Cleanse.each(optly.Cleanse.types,function(r,a){optly.Cleanse.getters[r]={},optly.Cleanse.properties[r]={},optly.Cleanse.setters[r]={},optly.Cleanse.each(a.prototype,function(e,t,n,i){optly.nativity.isNativeFunction(t)||optly.nativity.isNativeFunction(n)||optly.nativity.isNativeFunction(i)?optly.Cleanse.log("ignore native code",r,e):(n?(optly.Cleanse.getters[r][e]=n,optly.Cleanse.log("cleansed getter",r,e)):(optly.Cleanse.properties[r][e]=t,optly.Cleanse.log("cleansed property",r,e)),i&&(optly.Cleanse.setters[r][e]=i,optly.Cleanse.log("cleansed setter",r,e)),delete a.prototype[e])})}),optly.Cleanse.fixGetElementsByClassName(),optly.Cleanse.hasRunStart=!0}},optly.Cleanse.fixGetElementsByClassName=function(){if(!optly.nativity.isNativeFunction(document.getElementsByClassName)){var e=optly.nativity.getNativeGetElementsByClassName();e?(optly.Cleanse.getElementsByClassName=document.getElementsByClassName,document.getElementsByClassName=e):optly.Cleanse.log("Error: native HTMLElement.prototype.getElementsByClassName missing")}},optly.Cleanse.unfixGetElementsByClassName=function(){optly.Cleanse.getElementsByClassName&&(document.getElementsByClassName=optly.Cleanse.getElementsByClassName,optly.Cleanse.getElementsByClassName=null)},optly.Cleanse.getElementsByClassName=null,optly.Cleanse.getters={},optly.Cleanse.logs=[],optly.Cleanse.properties={},optly.Cleanse.setters={},optly.Cleanse.types={Object_:Object},window.optly=window.optly||{},window.optly.Cleanse={finish:optly.Cleanse.finish,logs:optly.Cleanse.logs,start:optly.Cleanse.start},optly.Cleanse.start(),
/** @license
 * jQuery JavaScript Library v1.11.3 -ajax,-ajax/jsonp,-ajax/load,-ajax/parseJSON,-ajax/parseXML,-ajax/script,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-event/ajax,-deprecated,-effects,-effects/Tween,-effects/animatedSelector,-effects/support,-offset,-dimensions
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-02-23T17:34Z
 */
Z="undefined"!=typeof window?window:this,_=function(f,e){var d=[],u=d.slice,m=d.concat,s=d.push,r=d.indexOf,n={},t=n.toString,v=n.hasOwnProperty,h={},i="1.11.3 -ajax,-ajax/jsonp,-ajax/load,-ajax/parseJSON,-ajax/parseXML,-ajax/script,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-event/ajax,-deprecated,-effects,-effects/Tween,-effects/animatedSelector,-effects/support,-offset,-dimensions",y=function(e,t){return new y.fn.init(e,t)},a=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/^-ms-/,l=/-([\da-z])/gi,c=function(e,t){return t.toUpperCase()};function p(e){var t="length"in e&&e.length,n=y.type(e);return"function"!==n&&!y.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e))}y.fn=y.prototype={jquery:i,constructor:y,selector:"",length:0,toArray:function(){return u.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:u.call(this)},pushStack:function(e){var t=y.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return y.each(this,e,t)},map:function(n){return this.pushStack(y.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:s,sort:d.sort,splice:d.splice},y.extend=y.fn.extend=function(){var e,t,n,i,r,a,o=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[s]||{},s++),"object"==typeof o||y.isFunction(o)||(o={}),s===l&&(o=this,s--);s<l;s++)if(null!=(r=arguments[s]))for(i in r)e=o[i],o!==(n=r[i])&&(c&&n&&(y.isPlainObject(n)||(t=y.isArray(n)))?(t?(t=!1,a=e&&y.isArray(e)?e:[]):a=e&&y.isPlainObject(e)?e:{},o[i]=y.extend(c,a,n)):void 0!==n&&(o[i]=n));return o},y.extend({expando:"jQuery"+(i+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===y.type(e)},isArray:Array.isArray||function(e){return"array"===y.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!y.isArray(e)&&0<=e-parseFloat(e)+1},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==y.type(e)||e.nodeType||y.isWindow(e))return!1;try{if(e.constructor&&!v.call(e,"constructor")&&!v.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(h.ownLast)for(t in e)return v.call(e,t);for(t in e);return void 0===t||v.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[t.call(e)]||"object":typeof e},globalEval:function(e){e&&y.trim(e)&&(f.execScript||function(e){f.eval.call(f,e)})(e)},camelCase:function(e){return e.replace(o,"ms-").replace(l,c)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var i=0,r=e.length,a=p(e);if(n){if(a)for(;i<r&&!1!==t.apply(e[i],n);i++);else for(i in e)if(!1===t.apply(e[i],n))break}else if(a)for(;i<r&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(a,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?y.merge(n,"string"==typeof e?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){var i;if(t){if(r)return r.call(t,e,n);for(i=t.length,n=n?n<0?Math.max(0,i+n):n:0;n<i;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;)e[r++]=t[i++];if(n!=n)for(;void 0!==t[i];)e[r++]=t[i++];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,a=e.length,o=!n;r<a;r++)!t(e[r],r)!==o&&i.push(e[r]);return i},map:function(e,t,n){var i,r=0,a=e.length,o=[];if(p(e))for(;r<a;r++)null!=(i=t(e[r],r,n))&&o.push(i);else for(r in e)null!=(i=t(e[r],r,n))&&o.push(i);return m.apply([],o)},guid:1,proxy:function(e,t){var n,i,r;if("string"==typeof t&&(r=e[t],t=e,e=r),y.isFunction(e))return n=u.call(arguments,2),(i=function(){return e.apply(t||this,n.concat(u.call(arguments)))}).guid=e.guid=e.guid||y.guid++,i},now:function(){return+new Date},support:h}),y.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var g=function(n){var e,f,b,a,i,m,d,v,I,c,u,h,_,r,y,E,o,s,S,A="sizzle"+1*new Date,C=n.document,w=0,p=0,l=ae(),g=ae(),T=ae(),x=function(e,t){return e===t&&(u=!0),0},k={}.hasOwnProperty,t=[],D=t.pop,P=t.push,R=t.push,N=t.slice,O=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",V="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",F=V.replace("w","w#"),U="\\["+M+"*("+V+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+F+"))|)"+M+"*\\]",B=":("+V+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+U+")*)|.*)\\)|)",j=new RegExp(M+"+","g"),G=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),z=new RegExp("^"+M+"*,"+M+"*"),H=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),q=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),K=new RegExp(B),$=new RegExp("^"+F+"$"),W={ID:new RegExp("^#("+V+")"),CLASS:new RegExp("^\\.("+V+")"),TAG:new RegExp("^("+V.replace("w","w*")+")"),ATTR:new RegExp("^"+U),PSEUDO:new RegExp("^"+B),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/[+~]/,ee=/'|\\/g,te=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),ne=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},ie=function(){h()};try{R.apply(t=N.call(C.childNodes),C.childNodes),t[C.childNodes.length].nodeType}catch(e){R={apply:t.length?function(e,t){P.apply(e,N.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function re(e,t,n,i){var r,a,o,s,l,c,u,d,p,g;if((t?t.ownerDocument||t:C)!==_&&h(t),n=n||[],s=(t=t||_).nodeType,"string"!=typeof e||!e||1!==s&&9!==s&&11!==s)return n;if(!i&&y){if(11!==s&&(r=J.exec(e)))if(o=r[1]){if(9===s){if(!(a=t.getElementById(o))||!a.parentNode)return n;if(a.id===o)return n.push(a),n}else if(t.ownerDocument&&(a=t.ownerDocument.getElementById(o))&&S(t,a)&&a.id===o)return n.push(a),n}else{if(r[2])return R.apply(n,t.getElementsByTagName(e)),n;if((o=r[3])&&f.getElementsByClassName)return R.apply(n,t.getElementsByClassName(o)),n}if(f.qsa&&(!E||!E.test(e))){if(d=u=A,p=t,g=1!==s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(c=m(e),(u=t.getAttribute("id"))?d=u.replace(ee,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",l=c.length;l--;)c[l]=d+me(c[l]);p=Z.test(e)&&ge(t.parentNode)||t,g=c.join(",")}if(g)try{return R.apply(n,p.querySelectorAll(g)),n}catch(e){}finally{u||t.removeAttribute("id")}}}return v(e.replace(G,"$1"),t,n,i)}function ae(){var i=[];return function e(t,n){return i.push(t+" ")>b.cacheLength&&delete e[i.shift()],e[t+" "]=n}}function oe(e){return e[A]=!0,e}function se(e){var t=_.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function le(e,t){for(var n=e.split("|"),i=e.length;i--;)b.attrHandle[n[i]]=t}function ce(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||1<<31)-(~e.sourceIndex||1<<31);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function ue(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function de(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function pe(o){return oe(function(a){return a=+a,oe(function(e,t){for(var n,i=o([],e.length,a),r=i.length;r--;)e[n=i[r]]&&(e[n]=!(t[n]=e[n]))})})}function ge(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in f=re.support={},i=re.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},h=re.setDocument=function(e){var t,n,l=e?e.ownerDocument||e:C;return l!==_&&9===l.nodeType&&l.documentElement?(r=(_=l).documentElement,(n=l.defaultView)&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",ie,!1):n.attachEvent&&n.attachEvent("onunload",ie)),y=!i(l),f.attributes=se(function(e){return e.className="i",!e.getAttribute("className")}),f.getElementsByTagName=se(function(e){return e.appendChild(l.createComment("")),!e.getElementsByTagName("*").length}),f.getElementsByClassName=Q.test(l.getElementsByClassName),f.getById=se(function(e){return r.appendChild(e).id=A,!l.getElementsByName||!l.getElementsByName(A).length}),f.getById?(b.find.ID=function(e,t){if(void 0!==t.getElementById&&y){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}}):(delete b.find.ID,b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}}),b.find.TAG=f.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):f.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[r++];)1===n.nodeType&&i.push(n);return i}return a},b.find.CLASS=f.getElementsByClassName&&function(e,t){if(y)return t.getElementsByClassName(e)},o=[],E=[],(f.qsa=Q.test(l.querySelectorAll))&&(se(function(e){r.appendChild(e).innerHTML="<a id='"+A+"'></a><select id='"+A+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&E.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||E.push("\\["+M+"*(?:value|"+L+")"),e.querySelectorAll("[id~="+A+"-]").length||E.push("~="),e.querySelectorAll(":checked").length||E.push(":checked"),e.querySelectorAll("a#"+A+"+*").length||E.push(".#.+[+~]")}),se(function(e){var t=l.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&E.push("name"+M+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||E.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),E.push(",.*:")})),(f.matchesSelector=Q.test(s=r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.oMatchesSelector||r.msMatchesSelector))&&se(function(e){f.disconnectedMatch=s.call(e,"div"),s.call(e,"[s!='']:x"),o.push("!=",B)}),E=E.length&&new RegExp(E.join("|")),o=o.length&&new RegExp(o.join("|")),t=Q.test(r.compareDocumentPosition),S=t||Q.test(r.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},x=t?function(e,t){if(e===t)return u=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!f.sortDetached&&t.compareDocumentPosition(e)===n?e===l||e.ownerDocument===C&&S(C,e)?-1:t===l||t.ownerDocument===C&&S(C,t)?1:c?O(c,e)-O(c,t):0:4&n?-1:1)}:function(e,t){if(e===t)return u=!0,0;var n,i=0,r=e.parentNode,a=t.parentNode,o=[e],s=[t];if(!r||!a)return e===l?-1:t===l?1:r?-1:a?1:c?O(c,e)-O(c,t):0;if(r===a)return ce(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;o[i]===s[i];)i++;return i?ce(o[i],s[i]):o[i]===C?-1:s[i]===C?1:0},l):_},re.matches=function(e,t){return re(e,null,null,t)},re.matchesSelector=function(e,t){if((e.ownerDocument||e)!==_&&h(e),t=t.replace(q,"='$1']"),f.matchesSelector&&y&&(!o||!o.test(t))&&(!E||!E.test(t)))try{var n=s.call(e,t);if(n||f.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<re(t,_,null,[e]).length},re.contains=function(e,t){return(e.ownerDocument||e)!==_&&h(e),S(e,t)},re.attr=function(e,t){(e.ownerDocument||e)!==_&&h(e);var n=b.attrHandle[t.toLowerCase()],i=n&&k.call(b.attrHandle,t.toLowerCase())?n(e,t,!y):void 0;return void 0!==i?i:f.attributes||!y?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},re.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},re.uniqueSort=function(e){var t,n=[],i=0,r=0;if(u=!f.detectDuplicates,c=!f.sortStable&&e.slice(0),e.sort(x),u){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return c=null,e},a=re.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=a(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=a(t);return n},(b=re.selectors={cacheLength:50,createPseudo:oe,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||re.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&re.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return W.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&K.test(n)&&(t=m(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=l[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&l(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,i,r){return function(e){var t=re.attr(e,n);return null==t?"!="===i:!i||(t+="","="===i?t===r:"!="===i?t!==r:"^="===i?r&&0===t.indexOf(r):"*="===i?r&&-1<t.indexOf(r):"$="===i?r&&t.slice(-r.length)===r:"~="===i?-1<(" "+t.replace(j," ")+" ").indexOf(r):"|="===i&&(t===r||t.slice(0,r.length+1)===r+"-"))}},CHILD:function(g,e,t,f,m){var v="nth"!==g.slice(0,3),h="last"!==g.slice(-4),y="of-type"===e;return 1===f&&0===m?function(e){return!!e.parentNode}:function(e,t,n){var i,r,a,o,s,l,c=v!==h?"nextSibling":"previousSibling",u=e.parentNode,d=y&&e.nodeName.toLowerCase(),p=!n&&!y;if(u){if(v){for(;c;){for(a=e;a=a[c];)if(y?a.nodeName.toLowerCase()===d:1===a.nodeType)return!1;l=c="only"===g&&!l&&"nextSibling"}return!0}if(l=[h?u.firstChild:u.lastChild],h&&p){for(s=(i=(r=u[A]||(u[A]={}))[g]||[])[0]===w&&i[1],o=i[0]===w&&i[2],a=s&&u.childNodes[s];a=++s&&a&&a[c]||(o=s=0)||l.pop();)if(1===a.nodeType&&++o&&a===e){r[g]=[w,s,o];break}}else if(p&&(i=(e[A]||(e[A]={}))[g])&&i[0]===w)o=i[1];else for(;(a=++s&&a&&a[c]||(o=s=0)||l.pop())&&((y?a.nodeName.toLowerCase()!==d:1!==a.nodeType)||!++o||(p&&((a[A]||(a[A]={}))[g]=[w,o]),a!==e)););return(o-=m)===f||o%f==0&&0<=o/f}}},PSEUDO:function(e,a){var t,o=b.pseudos[e]||b.setFilters[e.toLowerCase()]||re.error("unsupported pseudo: "+e);return o[A]?o(a):1<o.length?(t=[e,e,"",a],b.setFilters.hasOwnProperty(e.toLowerCase())?oe(function(e,t){for(var n,i=o(e,a),r=i.length;r--;)e[n=O(e,i[r])]=!(t[n]=i[r])}):function(e){return o(e,0,t)}):o}},pseudos:{not:oe(function(e){var i=[],r=[],s=d(e.replace(G,"$1"));return s[A]?oe(function(e,t,n,i){for(var r,a=s(e,null,i,[]),o=e.length;o--;)(r=a[o])&&(e[o]=!(t[o]=r))}):function(e,t,n){return i[0]=e,s(i,null,n,r),i[0]=null,!r.pop()}}),has:oe(function(t){return function(e){return 0<re(t,e).length}}),contains:oe(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||e.innerText||a(e)).indexOf(t)}}),lang:oe(function(n){return $.test(n||"")||re.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=y?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===r},focus:function(e){return e===_.activeElement&&(!_.hasFocus||_.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return X.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:pe(function(){return[0]}),last:pe(function(e,t){return[t-1]}),eq:pe(function(e,t,n){return[n<0?n+t:n]}),even:pe(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:pe(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:pe(function(e,t,n){for(var i=n<0?n+t:n;0<=--i;)e.push(i);return e}),gt:pe(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=ue(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=de(e);function fe(){}function me(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function ve(o,e,t){var s=e.dir,l=t&&"parentNode"===s,c=p++;return e.first?function(e,t,n){for(;e=e[s];)if(1===e.nodeType||l)return o(e,t,n)}:function(e,t,n){var i,r,a=[w,c];if(n){for(;e=e[s];)if((1===e.nodeType||l)&&o(e,t,n))return!0}else for(;e=e[s];)if(1===e.nodeType||l){if((i=(r=e[A]||(e[A]={}))[s])&&i[0]===w&&i[1]===c)return a[2]=i[2];if((r[s]=a)[2]=o(e,t,n))return!0}}}function he(r){return 1<r.length?function(e,t,n){for(var i=r.length;i--;)if(!r[i](e,t,n))return!1;return!0}:r[0]}function ye(e,t,n,i,r){for(var a,o=[],s=0,l=e.length,c=null!=t;s<l;s++)(a=e[s])&&(n&&!n(a,i,r)||(o.push(a),c&&t.push(s)));return o}function Ee(g,f,m,v,h,e){return v&&!v[A]&&(v=Ee(v)),h&&!h[A]&&(h=Ee(h,e)),oe(function(e,t,n,i){var r,a,o,s=[],l=[],c=t.length,u=e||function(e,t,n){for(var i=0,r=t.length;i<r;i++)re(e,t[i],n);return n}(f||"*",n.nodeType?[n]:n,[]),d=!g||!e&&f?u:ye(u,s,g,n,i),p=m?h||(e?g:c||v)?[]:t:d;if(m&&m(d,p,n,i),v)for(r=ye(p,l),v(r,[],n,i),a=r.length;a--;)(o=r[a])&&(p[l[a]]=!(d[l[a]]=o));if(e){if(h||g){if(h){for(r=[],a=p.length;a--;)(o=p[a])&&r.push(d[a]=o);h(null,p=[],r,i)}for(a=p.length;a--;)(o=p[a])&&-1<(r=h?O(e,o):s[a])&&(e[r]=!(t[r]=o))}}else p=ye(p===t?p.splice(c,p.length):p),h?h(null,t,p,i):R.apply(t,p)})}function be(e){for(var r,t,n,i=e.length,a=b.relative[e[0].type],o=a||b.relative[" "],s=a?1:0,l=ve(function(e){return e===r},o,!0),c=ve(function(e){return-1<O(r,e)},o,!0),u=[function(e,t,n){var i=!a&&(n||t!==I)||((r=t).nodeType?l(e,t,n):c(e,t,n));return r=null,i}];s<i;s++)if(t=b.relative[e[s].type])u=[ve(he(u),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[A]){for(n=++s;n<i&&!b.relative[e[n].type];n++);return Ee(1<s&&he(u),1<s&&me(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(G,"$1"),t,s<n&&be(e.slice(s,n)),n<i&&be(e=e.slice(n)),n<i&&me(e))}u.push(t)}return he(u)}return fe.prototype=b.filters=b.pseudos,b.setFilters=new fe,m=re.tokenize=function(e,t){var n,i,r,a,o,s,l,c=g[e+" "];if(c)return t?0:c.slice(0);for(o=e,s=[],l=b.preFilter;o;){for(a in n&&!(i=z.exec(o))||(i&&(o=o.slice(i[0].length)||o),s.push(r=[])),n=!1,(i=H.exec(o))&&(n=i.shift(),r.push({value:n,type:i[0].replace(G," ")}),o=o.slice(n.length)),b.filter)!(i=W[a].exec(o))||l[a]&&!(i=l[a](i))||(n=i.shift(),r.push({value:n,type:a,matches:i}),o=o.slice(n.length));if(!n)break}return t?o.length:o?re.error(e):g(e,s).slice(0)},d=re.compile=function(e,t){var n,v,h,y,E,i,r=[],a=[],o=T[e+" "];if(!o){for(t||(t=m(e)),n=t.length;n--;)(o=be(t[n]))[A]?r.push(o):a.push(o);(o=T(e,(v=a,y=0<(h=r).length,E=0<v.length,i=function(e,t,n,i,r){var a,o,s,l=0,c="0",u=e&&[],d=[],p=I,g=e||E&&b.find.TAG("*",r),f=w+=null==p?1:Math.random()||.1,m=g.length;for(r&&(I=t!==_&&t);c!==m&&null!=(a=g[c]);c++){if(E&&a){for(o=0;s=v[o++];)if(s(a,t,n)){i.push(a);break}r&&(w=f)}y&&((a=!s&&a)&&l--,e&&u.push(a))}if(l+=c,y&&c!==l){for(o=0;s=h[o++];)s(u,d,t,n);if(e){if(0<l)for(;c--;)u[c]||d[c]||(d[c]=D.call(i));d=ye(d)}R.apply(i,d),r&&!e&&0<d.length&&1<l+h.length&&re.uniqueSort(i)}return r&&(w=f,I=p),u},y?oe(i):i))).selector=e}return o},v=re.select=function(e,t,n,i){var r,a,o,s,l,c="function"==typeof e&&e,u=!i&&m(e=c.selector||e);if(n=n||[],1===u.length){if(2<(a=u[0]=u[0].slice(0)).length&&"ID"===(o=a[0]).type&&f.getById&&9===t.nodeType&&y&&b.relative[a[1].type]){if(!(t=(b.find.ID(o.matches[0].replace(te,ne),t)||[])[0]))return n;c&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(r=W.needsContext.test(e)?0:a.length;r--&&(o=a[r],!b.relative[s=o.type]);)if((l=b.find[s])&&(i=l(o.matches[0].replace(te,ne),Z.test(a[0].type)&&ge(t.parentNode)||t))){if(a.splice(r,1),!(e=i.length&&me(a)))return R.apply(n,i),n;break}}return(c||d(e,u))(i,t,!y,n,Z.test(e)&&ge(t.parentNode)||t),n},f.sortStable=A.split("").sort(x).join("")===A,f.detectDuplicates=!!u,h(),f.sortDetached=se(function(e){return 1&e.compareDocumentPosition(_.createElement("div"))}),se(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||le("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),f.attributes&&se(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||le("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),se(function(e){return null==e.getAttribute("disabled")})||le(L,function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),re}(f);y.find=g,y.expr=g.selectors,y.expr[":"]=y.expr.pseudos,y.unique=g.uniqueSort,y.text=g.getText,y.isXMLDoc=g.isXML,y.contains=g.contains;var E=y.expr.match.needsContext,b=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,I=/^.[^:#\[\.,]*$/;function _(e,n,i){if(y.isFunction(n))return y.grep(e,function(e,t){return!!n.call(e,t,e)!==i});if(n.nodeType)return y.grep(e,function(e){return e===n!==i});if("string"==typeof n){if(I.test(n))return y.filter(n,e,i);n=y.filter(n,e)}return y.grep(e,function(e){return 0<=y.inArray(e,n)!==i})}y.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?y.find.matchesSelector(i,e)?[i]:[]:y.find.matches(e,y.grep(t,function(e){return 1===e.nodeType}))},y.fn.extend({find:function(e){var t,n=[],i=this,r=i.length;if("string"!=typeof e)return this.pushStack(y(e).filter(function(){for(t=0;t<r;t++)if(y.contains(i[t],this))return!0}));for(t=0;t<r;t++)y.find(e,i[t],n);return(n=this.pushStack(1<r?y.unique(n):n)).selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(_(this,e||[],!1))},not:function(e){return this.pushStack(_(this,e||[],!0))},is:function(e){return!!_(this,"string"==typeof e&&E.test(e)?y(e):e||[],!1).length}});var S,A=f.document,C=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(y.fn.init=function(e,t){var n,i;if(!e)return this;if("string"==typeof e){if(!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&3<=e.length?[null,e,null]:C.exec(e))||!n[1]&&t)return!t||t.jquery?(t||S).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof y?t[0]:t,y.merge(this,y.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:A,!0)),b.test(n[1])&&y.isPlainObject(t))for(n in t)y.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if((i=A.getElementById(n[2]))&&i.parentNode){if(i.id!==n[2])return S.find(e);this.length=1,this[0]=i}return this.context=A,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):y.isFunction(e)?void 0!==S.ready?S.ready(e):e(y):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),y.makeArray(e,this))}).prototype=y.fn,S=y(A);var w=/^(?:parents|prev(?:Until|All))/,T={children:!0,contents:!0,next:!0,prev:!0};function x(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}y.extend({dir:function(e,t,n){for(var i=[],r=e[t];r&&9!==r.nodeType&&(void 0===n||1!==r.nodeType||!y(r).is(n));)1===r.nodeType&&i.push(r),r=r[t];return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),y.fn.extend({has:function(e){var t,n=y(e,this),i=n.length;return this.filter(function(){for(t=0;t<i;t++)if(y.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,a=[],o=E.test(e)||"string"!=typeof e?y(e,t||this.context):0;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?-1<o.index(n):1===n.nodeType&&y.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(1<a.length?y.unique(a):a)},index:function(e){return e?"string"==typeof e?y.inArray(this[0],y(e)):y.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(y.unique(y.merge(this.get(),y(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),y.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return y.dir(e,"parentNode")},parentsUntil:function(e,t,n){return y.dir(e,"parentNode",n)},next:function(e){return x(e,"nextSibling")},prev:function(e){return x(e,"previousSibling")},nextAll:function(e){return y.dir(e,"nextSibling")},prevAll:function(e){return y.dir(e,"previousSibling")},nextUntil:function(e,t,n){return y.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return y.dir(e,"previousSibling",n)},siblings:function(e){return y.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return y.sibling(e.firstChild)},contents:function(e){return y.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:y.merge([],e.childNodes)}},function(i,r){y.fn[i]=function(e,t){var n=y.map(this,r,e);return"Until"!==i.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=y.filter(t,n)),1<this.length&&(T[i]||(n=y.unique(n)),w.test(i)&&(n=n.reverse())),this.pushStack(n)}});var k,D=/\S+/g,P={};function R(){A.addEventListener?(A.removeEventListener("DOMContentLoaded",N,!1),f.removeEventListener("load",N,!1)):(A.detachEvent("onreadystatechange",N),f.detachEvent("onload",N))}function N(){(A.addEventListener||"load"===event.type||"complete"===A.readyState)&&(R(),y.ready())}y.Callbacks=function(r){var e,n;r="string"==typeof r?P[r]||(n=P[e=r]={},y.each(e.match(D)||[],function(e,t){n[t]=!0}),n):y.extend({},r);var i,t,a,o,s,l,c=[],u=!r.once&&[],d=function(e){for(t=r.memory&&e,a=!0,s=l||0,l=0,o=c.length,i=!0;c&&s<o;s++)if(!1===c[s].apply(e[0],e[1])&&r.stopOnFalse){t=!1;break}i=!1,c&&(u?u.length&&d(u.shift()):t?c=[]:p.disable())},p={add:function(){if(c){var e=c.length;!function i(e){y.each(e,function(e,t){var n=y.type(t);"function"===n?r.unique&&p.has(t)||c.push(t):t&&t.length&&"string"!==n&&i(t)})}(arguments),i?o=c.length:t&&(l=e,d(t))}return this},remove:function(){return c&&y.each(arguments,function(e,t){for(var n;-1<(n=y.inArray(t,c,n));)c.splice(n,1),i&&(n<=o&&o--,n<=s&&s--)}),this},has:function(e){return e?-1<y.inArray(e,c):!(!c||!c.length)},empty:function(){return c=[],o=0,this},disable:function(){return c=u=t=void 0,this},disabled:function(){return!c},lock:function(){return u=void 0,t||p.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!c||a&&!u||(t=[e,(t=t||[]).slice?t.slice():t],i?u.push(t):d(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!a}};return p},y.extend({Deferred:function(e){var a=[["resolve","done",y.Callbacks("once memory"),"resolved"],["reject","fail",y.Callbacks("once memory"),"rejected"],["notify","progress",y.Callbacks("memory")]],r="pending",o={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var r=arguments;return y.Deferred(function(i){y.each(a,function(e,t){var n=y.isFunction(r[e])&&r[e];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&y.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[t[0]+"With"](this===o?i.promise():this,n?[e]:arguments)})}),r=null}).promise()},promise:function(e){return null!=e?y.extend(e,o):o}},s={};return o.pipe=o.then,y.each(a,function(e,t){var n=t[2],i=t[3];o[t[1]]=n.add,i&&n.add(function(){r=i},a[1^e][2].disable,a[2][2].lock),s[t[0]]=function(){return s[t[0]+"With"](this===s?o:this,arguments),this},s[t[0]+"With"]=n.fireWith}),o.promise(s),e&&e.call(s,s),s},when:function(e){var r,t,n,i=0,a=u.call(arguments),o=a.length,s=1!==o||e&&y.isFunction(e.promise)?o:0,l=1===s?e:y.Deferred(),c=function(t,n,i){return function(e){n[t]=this,i[t]=1<arguments.length?u.call(arguments):e,i===r?l.notifyWith(n,i):--s||l.resolveWith(n,i)}};if(1<o)for(r=new Array(o),t=new Array(o),n=new Array(o);i<o;i++)a[i]&&y.isFunction(a[i].promise)?a[i].promise().done(c(i,n,a)).fail(l.reject).progress(c(i,t,r)):--s;return s||l.resolveWith(n,a),l.promise()}}),y.fn.ready=function(e){return y.ready.promise().done(e),this},y.extend({isReady:!1,readyWait:1,holdReady:function(e){e?y.readyWait++:y.ready(!0)},ready:function(e){if(!0===e?!--y.readyWait:!y.isReady){if(!A.body)return setTimeout(y.ready);(y.isReady=!0)!==e&&0<--y.readyWait||(k.resolveWith(A,[y]),y.fn.triggerHandler&&(y(A).triggerHandler("ready"),y(A).off("ready")))}}}),y.ready.promise=function(e){if(!k)if(k=y.Deferred(),"complete"===A.readyState)setTimeout(y.ready);else if(A.addEventListener)A.addEventListener("DOMContentLoaded",N,!1),f.addEventListener("load",N,!1);else{A.attachEvent("onreadystatechange",N),f.attachEvent("onload",N);var n=!1;try{n=null==f.frameElement&&A.documentElement}catch(e){}n&&n.doScroll&&function t(){if(!y.isReady){try{n.doScroll("left")}catch(e){return setTimeout(t,50)}R(),y.ready()}}()}return k.promise(e)};var O,L="undefined";for(O in y(h))break;h.ownLast="0"!==O,h.inlineBlockNeedsLayout=!1,y(function(){var e,t,n,i;(n=A.getElementsByTagName("body")[0])&&n.style&&(t=A.createElement("div"),(i=A.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!==L&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",h.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(i))}),function(){var e=A.createElement("div");if(null==h.deleteExpando){h.deleteExpando=!0;try{delete e.test}catch(e){h.deleteExpando=!1}}e=null}(),y.acceptData=function(e){var t=y.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return(1===n||9===n)&&(!t||!0!==t&&e.getAttribute("classid")===t)};var M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,V=/([A-Z])/g;function F(e,t,n){if(void 0===n&&1===e.nodeType){var i="data-"+t.replace(V,"-$1").toLowerCase();if("string"==typeof(n=e.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:M.test(n)?y.parseJSON(n):n)}catch(e){}y.data(e,t,n)}else n=void 0}return n}function U(e){var t;for(t in e)if(("data"!==t||!y.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function B(e,t,n,i){if(y.acceptData(e)){var r,a,o=y.expando,s=e.nodeType,l=s?y.cache:e,c=s?e[o]:e[o]&&o;if(c&&l[c]&&(i||l[c].data)||void 0!==n||"string"!=typeof t)return c||(c=s?e[o]=d.pop()||y.guid++:o),l[c]||(l[c]=s?{}:{toJSON:y.noop}),"object"!=typeof t&&"function"!=typeof t||(i?l[c]=y.extend(l[c],t):l[c].data=y.extend(l[c].data,t)),a=l[c],i||(a.data||(a.data={}),a=a.data),void 0!==n&&(a[y.camelCase(t)]=n),"string"==typeof t?null==(r=a[t])&&(r=a[y.camelCase(t)]):r=a,r}}function j(e,t,n){if(y.acceptData(e)){var i,r,a=e.nodeType,o=a?y.cache:e,s=a?e[y.expando]:y.expando;if(o[s]){if(t&&(i=n?o[s]:o[s].data)){r=(t=y.isArray(t)?t.concat(y.map(t,y.camelCase)):t in i?[t]:(t=y.camelCase(t))in i?[t]:t.split(" ")).length;for(;r--;)delete i[t[r]];if(n?!U(i):!y.isEmptyObject(i))return}(n||(delete o[s].data,U(o[s])))&&(a?y.cleanData([e],!0):h.deleteExpando||o!=o.window?delete o[s]:o[s]=null)}}}y.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?y.cache[e[y.expando]]:e[y.expando])&&!U(e)},data:function(e,t,n){return B(e,t,n)},removeData:function(e,t){return j(e,t)},_data:function(e,t,n){return B(e,t,n,!0)},_removeData:function(e,t){return j(e,t,!0)}}),y.fn.extend({data:function(e,t){var n,i,r,a=this[0],o=a&&a.attributes;if(void 0===e){if(this.length&&(r=y.data(a),1===a.nodeType&&!y._data(a,"parsedAttrs"))){for(n=o.length;n--;)o[n]&&0===(i=o[n].name).indexOf("data-")&&F(a,i=y.camelCase(i.slice(5)),r[i]);y._data(a,"parsedAttrs",!0)}return r}return"object"==typeof e?this.each(function(){y.data(this,e)}):1<arguments.length?this.each(function(){y.data(this,e,t)}):a?F(a,e,y.data(a,e)):void 0},removeData:function(e){return this.each(function(){y.removeData(this,e)})}}),y.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=y._data(e,t),n&&(!i||y.isArray(n)?i=y._data(e,t,y.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=y.queue(e,t),i=n.length,r=n.shift(),a=y._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete a.stop,r.call(e,function(){y.dequeue(e,t)},a)),!i&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return y._data(e,n)||y._data(e,n,{empty:y.Callbacks("once memory").add(function(){y._removeData(e,t+"queue"),y._removeData(e,n)})})}}),y.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?y.queue(this[0],t):void 0===n?this:this.each(function(){var e=y.queue(this,t,n);y._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&y.dequeue(this,t)})},dequeue:function(e){return this.each(function(){y.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=y.Deferred(),a=this,o=this.length,s=function(){--i||r.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=y._data(a[o],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(t)}});var G=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,z=["Top","Right","Bottom","Left"],H=function(e,t){return e=t||e,"none"===y.css(e,"display")||!y.contains(e.ownerDocument,e)},q=y.access=function(e,t,n,i,r,a,o){var s=0,l=e.length,c=null==n;if("object"===y.type(n))for(s in r=!0,n)y.access(e,t,s,n[s],!0,a,o);else if(void 0!==i&&(r=!0,y.isFunction(i)||(o=!0),c&&(o?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(y(e),n)})),t))for(;s<l;s++)t(e[s],n,o?i:i.call(e[s],s,t(e[s],n)));return r?e:c?t.call(e):l?t(e[0],n):a},K=/^(?:checkbox|radio)$/i;!function(){var e=A.createElement("input"),t=A.createElement("div"),n=A.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",h.leadingWhitespace=3===t.firstChild.nodeType,h.tbody=!t.getElementsByTagName("tbody").length,h.htmlSerialize=!!t.getElementsByTagName("link").length,h.html5Clone="<:nav></:nav>"!==A.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,n.appendChild(e),h.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",h.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,h.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){h.noCloneEvent=!1}),t.cloneNode(!0).click()),null==h.deleteExpando){h.deleteExpando=!0;try{delete t.test}catch(e){h.deleteExpando=!1}}}(),function(){var e,t,n=A.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})t="on"+e,(h[e+"Bubbles"]=t in f)||(n.setAttribute(t,"t"),h[e+"Bubbles"]=!1===n.attributes[t].expando);n=null}();var $=/^(?:input|select|textarea)$/i,W=/^key/,Y=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Q=/^([^.]*)(?:\.(.+)|)$/;function J(){return!0}function Z(){return!1}function ee(){try{return A.activeElement}catch(e){}}function te(e){var t=ne.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}y.event={global:{},add:function(e,t,n,i,r){var a,o,s,l,c,u,d,p,g,f,m,v=y._data(e);if(v){for(n.handler&&(n=(l=n).handler,r=l.selector),n.guid||(n.guid=y.guid++),(o=v.events)||(o=v.events={}),(u=v.handle)||((u=v.handle=function(e){return typeof y===L||e&&y.event.triggered===e.type?void 0:y.event.dispatch.apply(u.elem,arguments)}).elem=e),s=(t=(t||"").match(D)||[""]).length;s--;)g=m=(a=Q.exec(t[s])||[])[1],f=(a[2]||"").split(".").sort(),g&&(c=y.event.special[g]||{},g=(r?c.delegateType:c.bindType)||g,c=y.event.special[g]||{},d=y.extend({type:g,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&y.expr.match.needsContext.test(r),namespace:f.join(".")},l),(p=o[g])||((p=o[g]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(e,i,f,u)||(e.addEventListener?e.addEventListener(g,u,!1):e.attachEvent&&e.attachEvent("on"+g,u))),c.add&&(c.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),r?p.splice(p.delegateCount++,0,d):p.push(d),y.event.global[g]=!0);e=null}},remove:function(e,t,n,i,r){var a,o,s,l,c,u,d,p,g,f,m,v=y.hasData(e)&&y._data(e);if(v&&(u=v.events)){for(c=(t=(t||"").match(D)||[""]).length;c--;)if(g=m=(s=Q.exec(t[c])||[])[1],f=(s[2]||"").split(".").sort(),g){for(d=y.event.special[g]||{},p=u[g=(i?d.delegateType:d.bindType)||g]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=a=p.length;a--;)o=p[a],!r&&m!==o.origType||n&&n.guid!==o.guid||s&&!s.test(o.namespace)||i&&i!==o.selector&&("**"!==i||!o.selector)||(p.splice(a,1),o.selector&&p.delegateCount--,d.remove&&d.remove.call(e,o));l&&!p.length&&(d.teardown&&!1!==d.teardown.call(e,f,v.handle)||y.removeEvent(e,g,v.handle),delete u[g])}else for(g in u)y.event.remove(e,g+t[c],n,i,!0);y.isEmptyObject(u)&&(delete v.handle,y._removeData(e,"events"))}},trigger:function(e,t,n,i){var r,a,o,s,l,c,u,d=[n||A],p=v.call(e,"type")?e.type:e,g=v.call(e,"namespace")?e.namespace.split("."):[];if(o=c=n=n||A,3!==n.nodeType&&8!==n.nodeType&&!X.test(p+y.event.triggered)&&(0<=p.indexOf(".")&&(p=(g=p.split(".")).shift(),g.sort()),a=p.indexOf(":")<0&&"on"+p,(e=e[y.expando]?e:new y.Event(p,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=g.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:y.makeArray(t,[e]),l=y.event.special[p]||{},i||!l.trigger||!1!==l.trigger.apply(n,t))){if(!i&&!l.noBubble&&!y.isWindow(n)){for(s=l.delegateType||p,X.test(s+p)||(o=o.parentNode);o;o=o.parentNode)d.push(o),c=o;c===(n.ownerDocument||A)&&d.push(c.defaultView||c.parentWindow||f)}for(u=0;(o=d[u++])&&!e.isPropagationStopped();)e.type=1<u?s:l.bindType||p,(r=(y._data(o,"events")||{})[e.type]&&y._data(o,"handle"))&&r.apply(o,t),(r=a&&o[a])&&r.apply&&y.acceptData(o)&&(e.result=r.apply(o,t),!1===e.result&&e.preventDefault());if(e.type=p,!i&&!e.isDefaultPrevented()&&(!l._default||!1===l._default.apply(d.pop(),t))&&y.acceptData(n)&&a&&n[p]&&!y.isWindow(n)){(c=n[a])&&(n[a]=null),y.event.triggered=p;try{n[p]()}catch(e){}y.event.triggered=void 0,c&&(n[a]=c)}return e.result}},dispatch:function(e){e=y.event.fix(e);var t,n,i,r,a,o,s=u.call(arguments),l=(y._data(this,"events")||{})[e.type]||[],c=y.event.special[e.type]||{};if((s[0]=e).delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(o=y.event.handlers.call(this,e,l),t=0;(r=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,a=0;(i=r.handlers[a++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(i.namespace)||(e.handleObj=i,e.data=i.data,void 0!==(n=((y.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,s))&&!1===(e.result=n)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,a,o=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(r=[],a=0;a<s;a++)void 0===r[n=(i=t[a]).selector+" "]&&(r[n]=i.needsContext?0<=y(n,this).index(l):y.find(n,this,null,[l]).length),r[n]&&r.push(i);r.length&&o.push({elem:l,handlers:r})}return s<t.length&&o.push({elem:this,handlers:t.slice(s)}),o},fix:function(e){if(e[y.expando])return e;var t,n,i,r=e.type,a=e,o=this.fixHooks[r];for(o||(this.fixHooks[r]=o=Y.test(r)?this.mouseHooks:W.test(r)?this.keyHooks:{}),i=o.props?this.props.concat(o.props):this.props,e=new y.Event(a),t=i.length;t--;)e[n=i[t]]=a[n];return e.target||(e.target=a.srcElement||A),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,o.filter?o.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,a=t.button,o=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=(i=e.target.ownerDocument||A).documentElement,n=i.body,e.pageX=t.clientX+(r&&r.scrollLeft||n&&n.scrollLeft||0)-(r&&r.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||n&&n.scrollTop||0)-(r&&r.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&o&&(e.relatedTarget=o===e.target?t.toElement:o),e.which||void 0===a||(e.which=1&a?1:2&a?3:4&a?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ee()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===ee()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(y.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(e){return y.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=y.extend(new y.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?y.event.trigger(r,null,t):y.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},y.removeEvent=A.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var i="on"+t;e.detachEvent&&(typeof e[i]===L&&(e[i]=null),e.detachEvent(i,n))},y.Event=function(e,t){if(!(this instanceof y.Event))return new y.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?J:Z):this.type=e,t&&y.extend(this,t),this.timeStamp=e&&e.timeStamp||y.now(),this[y.expando]=!0},y.Event.prototype={isDefaultPrevented:Z,isPropagationStopped:Z,isImmediatePropagationStopped:Z,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=J,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=J,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=J,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},y.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,r){y.event.special[e]={delegateType:r,bindType:r,handle:function(e){var t,n=e.relatedTarget,i=e.handleObj;return n&&(n===this||y.contains(this,n))||(e.type=i.origType,t=i.handler.apply(this,arguments),e.type=r),t}}}),h.submitBubbles||(y.event.special.submit={setup:function(){if(y.nodeName(this,"form"))return!1;y.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=y.nodeName(t,"input")||y.nodeName(t,"button")?t.form:void 0;n&&!y._data(n,"submitBubbles")&&(y.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),y._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&y.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(y.nodeName(this,"form"))return!1;y.event.remove(this,"._submit")}}),h.changeBubbles||(y.event.special.change={setup:function(){if($.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(y.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),y.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),y.event.simulate("change",this,e,!0)})),!1;y.event.add(this,"beforeactivate._change",function(e){var t=e.target;$.test(t.nodeName)&&!y._data(t,"changeBubbles")&&(y.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||y.event.simulate("change",this.parentNode,e,!0)}),y._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return y.event.remove(this,"._change"),!$.test(this.nodeName)}}),h.focusinBubbles||y.each({focus:"focusin",blur:"focusout"},function(n,i){var r=function(e){y.event.simulate(i,e.target,y.event.fix(e),!0)};y.event.special[i]={setup:function(){var e=this.ownerDocument||this,t=y._data(e,i);t||e.addEventListener(n,r,!0),y._data(e,i,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=y._data(e,i)-1;t?y._data(e,i,t):(e.removeEventListener(n,r,!0),y._removeData(e,i))}}}),y.fn.extend({on:function(e,t,n,i,r){var a,o;if("object"==typeof e){for(a in"string"!=typeof t&&(n=n||t,t=void 0),e)this.on(a,t,n,e[a],r);return this}if(null==n&&null==i?(i=t,n=t=void 0):null==i&&("string"==typeof t?(i=n,n=void 0):(i=n,n=t,t=void 0)),!1===i)i=Z;else if(!i)return this;return 1===r&&(o=i,(i=function(e){return y().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=y.guid++)),this.each(function(){y.event.add(this,e,i,n,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,y(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Z),this.each(function(){y.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){y.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return y.event.trigger(e,t,n,!0)}});var ne="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ie=/ jQuery\d+="(?:null|\d+)"/g,re=new RegExp("<(?:"+ne+")[\\s/>]","i"),ae=/^\s+/,oe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,se=/<([\w:]+)/,le=/<tbody/i,ce=/<|&#?\w+;/,ue=/<(?:script|style|link)/i,de=/checked\s*(?:[^=]|=\s*.checked.)/i,pe=/^$|\/(?:java|ecma)script/i,ge=/^true\/(.*)/,fe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,me={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:h.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},ve=te(A).appendChild(A.createElement("div"));function he(e,t){var n,i,r=0,a=typeof e.getElementsByTagName!==L?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==L?e.querySelectorAll(t||"*"):void 0;if(!a)for(a=[],n=e.childNodes||e;null!=(i=n[r]);r++)!t||y.nodeName(i,t)?a.push(i):y.merge(a,he(i,t));return void 0===t||t&&y.nodeName(e,t)?y.merge([e],a):a}function ye(e){K.test(e.type)&&(e.defaultChecked=e.checked)}function Ee(e,t){return y.nodeName(e,"table")&&y.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function be(e){return e.type=(null!==y.find.attr(e,"type"))+"/"+e.type,e}function Ie(e){var t=ge.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function _e(e,t){for(var n,i=0;null!=(n=e[i]);i++)y._data(n,"globalEval",!t||y._data(t[i],"globalEval"))}function Se(e,t){if(1===t.nodeType&&y.hasData(e)){var n,i,r,a=y._data(e),o=y._data(t,a),s=a.events;if(s)for(n in delete o.handle,o.events={},s)for(i=0,r=s[n].length;i<r;i++)y.event.add(t,n,s[n][i]);o.data&&(o.data=y.extend({},o.data))}}function Ae(e,t){var n,i,r;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!h.noCloneEvent&&t[y.expando]){for(i in(r=y._data(t)).events)y.removeEvent(t,i,r.handle);t.removeAttribute(y.expando)}"script"===n&&t.text!==e.text?(be(t).text=e.text,Ie(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),h.html5Clone&&e.innerHTML&&!y.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&K.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}}me.optgroup=me.option,me.tbody=me.tfoot=me.colgroup=me.caption=me.thead,me.th=me.td,y.extend({clone:function(e,t,n){var i,r,a,o,s,l=y.contains(e.ownerDocument,e);if(h.html5Clone||y.isXMLDoc(e)||!re.test("<"+e.nodeName+">")?a=e.cloneNode(!0):(ve.innerHTML=e.outerHTML,ve.removeChild(a=ve.firstChild)),!(h.noCloneEvent&&h.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||y.isXMLDoc(e)))for(i=he(a),s=he(e),o=0;null!=(r=s[o]);++o)i[o]&&Ae(r,i[o]);if(t)if(n)for(s=s||he(e),i=i||he(a),o=0;null!=(r=s[o]);o++)Se(r,i[o]);else Se(e,a);return 0<(i=he(a,"script")).length&&_e(i,!l&&he(e,"script")),i=s=r=null,a},buildFragment:function(e,t,n,i){for(var r,a,o,s,l,c,u,d=e.length,p=te(t),g=[],f=0;f<d;f++)if((a=e[f])||0===a)if("object"===y.type(a))y.merge(g,a.nodeType?[a]:a);else if(ce.test(a)){for(s=s||p.appendChild(t.createElement("div")),l=(se.exec(a)||["",""])[1].toLowerCase(),u=me[l]||me._default,s.innerHTML=u[1]+a.replace(oe,"<$1></$2>")+u[2],r=u[0];r--;)s=s.lastChild;if(!h.leadingWhitespace&&ae.test(a)&&g.push(t.createTextNode(ae.exec(a)[0])),!h.tbody)for(r=(a="table"!==l||le.test(a)?"<table>"!==u[1]||le.test(a)?0:s:s.firstChild)&&a.childNodes.length;r--;)y.nodeName(c=a.childNodes[r],"tbody")&&!c.childNodes.length&&a.removeChild(c);for(y.merge(g,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=p.lastChild}else g.push(t.createTextNode(a));for(s&&p.removeChild(s),h.appendChecked||y.grep(he(g,"input"),ye),f=0;a=g[f++];)if((!i||-1===y.inArray(a,i))&&(o=y.contains(a.ownerDocument,a),s=he(p.appendChild(a),"script"),o&&_e(s),n))for(r=0;a=s[r++];)pe.test(a.type||"")&&n.push(a);return s=null,p},cleanData:function(e,t){for(var n,i,r,a,o=0,s=y.expando,l=y.cache,c=h.deleteExpando,u=y.event.special;null!=(n=e[o]);o++)if((t||y.acceptData(n))&&(a=(r=n[s])&&l[r])){if(a.events)for(i in a.events)u[i]?y.event.remove(n,i):y.removeEvent(n,i,a.handle);l[r]&&(delete l[r],c?delete n[s]:typeof n.removeAttribute!==L?n.removeAttribute(s):n[s]=null,d.push(r))}}}),y.fn.extend({text:function(e){return q(this,function(e){return void 0===e?y.text(this):this.empty().append((this[0]&&this[0].ownerDocument||A).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ee(this,e).appendChild(e)})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ee(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?y.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||y.cleanData(he(n)),n.parentNode&&(t&&y.contains(n.ownerDocument,n)&&_e(he(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&y.cleanData(he(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&y.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return y.clone(this,e,t)})},html:function(e){return q(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(ie,""):void 0;if("string"==typeof e&&!ue.test(e)&&(h.htmlSerialize||!re.test(e))&&(h.leadingWhitespace||!ae.test(e))&&!me[(se.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(oe,"<$1></$2>");try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(y.cleanData(he(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,y.cleanData(he(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(n,i){n=m.apply([],n);var e,t,r,a,o,s,l=0,c=this.length,u=this,d=c-1,p=n[0],g=y.isFunction(p);if(g||1<c&&"string"==typeof p&&!h.checkClone&&de.test(p))return this.each(function(e){var t=u.eq(e);g&&(n[0]=p.call(this,e,t.html())),t.domManip(n,i)});if(c&&(e=(s=y.buildFragment(n,this[0].ownerDocument,!1,this)).firstChild,1===s.childNodes.length&&(s=e),e)){for(r=(a=y.map(he(s,"script"),be)).length;l<c;l++)t=s,l!==d&&(t=y.clone(t,!0,!0),r&&y.merge(a,he(t,"script"))),i.call(this[l],t,l);if(r)for(o=a[a.length-1].ownerDocument,y.map(a,Ie),l=0;l<r;l++)t=a[l],pe.test(t.type||"")&&!y._data(t,"globalEval")&&y.contains(o,t)&&(t.src?y._evalUrl&&y._evalUrl(t.src):y.globalEval((t.text||t.textContent||t.innerHTML||"").replace(fe,"")));s=e=null}return this}}),y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,o){y.fn[e]=function(e){for(var t,n=0,i=[],r=y(e),a=r.length-1;n<=a;n++)t=n===a?this:this.clone(!0),y(r[n])[o](t),s.apply(i,t.get());return this.pushStack(i)}});var Ce,we={};function Te(e,t){var n,i=y(t.createElement(e)).appendTo(t.body),r=f.getDefaultComputedStyle&&(n=f.getDefaultComputedStyle(i[0]))?n.display:y.css(i[0],"display");return i.detach(),r}var xe,ke,De=/^margin/,Pe=new RegExp("^("+G+")(?!px)[a-z%]+$","i"),Re=/^(top|right|bottom|left)$/;f.getComputedStyle?(xe=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):f.getComputedStyle(e,null)},ke=function(e,t,n){var i,r,a,o,s=e.style;return o=(n=n||xe(e))?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==o||y.contains(e.ownerDocument,e)||(o=y.style(e,t)),Pe.test(o)&&De.test(t)&&(i=s.width,r=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=i,s.minWidth=r,s.maxWidth=a)),void 0===o?o:o+""}):A.documentElement.currentStyle&&(xe=function(e){return e.currentStyle},ke=function(e,t,n){var i,r,a,o,s=e.style;return null==(o=(n=n||xe(e))?n[t]:void 0)&&s&&s[t]&&(o=s[t]),Pe.test(o)&&!Re.test(t)&&(i=s.left,(a=(r=e.runtimeStyle)&&r.left)&&(r.left=e.currentStyle.left),s.left="fontSize"===t?"1em":o,o=s.pixelLeft+"px",s.left=i,a&&(r.left=a)),void 0===o?o:o+""||"auto"}),function(){var e,t,n,r,a,o,s;function i(){var e,t,n,i;(t=A.getElementsByTagName("body")[0])&&t.style&&(e=A.createElement("div"),(n=A.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",t.appendChild(n).appendChild(e),e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r=a=!1,s=!0,f.getComputedStyle&&(r="1%"!==(f.getComputedStyle(e,null)||{}).top,a="4px"===(f.getComputedStyle(e,null)||{width:"4px"}).width,(i=e.appendChild(A.createElement("div"))).style.cssText=e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",e.style.width="1px",s=!parseFloat((f.getComputedStyle(i,null)||{}).marginRight),e.removeChild(i)),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(i=e.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(o=0===i[0].offsetHeight)&&(i[0].style.display="",i[1].style.display="none",o=0===i[0].offsetHeight),t.removeChild(n))}(e=A.createElement("div")).innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",(t=(n=e.getElementsByTagName("a")[0])&&n.style)&&(t.cssText="float:left;opacity:.5",h.opacity="0.5"===t.opacity,h.cssFloat=!!t.cssFloat,e.style.backgroundClip="content-box",e.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle="content-box"===e.style.backgroundClip,h.boxSizing=""===t.boxSizing||""===t.MozBoxSizing||""===t.WebkitBoxSizing,y.extend(h,{reliableHiddenOffsets:function(){return null==o&&i(),o},boxSizingReliable:function(){return null==a&&i(),a},pixelPosition:function(){return null==r&&i(),r},reliableMarginRight:function(){return null==s&&i(),s}}))}(),y.swap=function(e,t,n,i){var r,a,o={};for(a in t)o[a]=e.style[a],e.style[a]=t[a];for(a in r=n.apply(e,i||[]),t)e.style[a]=o[a];return r};var Ne,Oe,Le,Me,Ve,Fe,Ue,Be=/alpha\([^)]*\)/i,je=/opacity\s*=\s*([^)]*)/,Ge=/^(none|table(?!-c[ea]).+)/,ze=new RegExp("^("+G+")(.*)$","i"),He=new RegExp("^([+-])=("+G+")","i"),qe={position:"absolute",visibility:"hidden",display:"block"},Ke={letterSpacing:"0",fontWeight:"400"},$e=["Webkit","O","Moz","ms"];function We(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,r=$e.length;r--;)if((t=$e[r]+n)in e)return t;return i}function Ye(e,t){for(var n,i,r,a,o,s,l=[],c=0,u=e.length;c<u;c++)(i=e[c]).style&&(l[c]=y._data(i,"olddisplay"),n=i.style.display,t?(l[c]||"none"!==n||(i.style.display=""),""===i.style.display&&H(i)&&(l[c]=y._data(i,"olddisplay",(a=i.nodeName,s=o=void 0,o=A,(s=we[a])||("none"!==(s=Te(a,o))&&s||((o=((Ce=(Ce||y("<iframe frameborder='0' width='0' height='0'/>")).appendTo(o.documentElement))[0].contentWindow||Ce[0].contentDocument).document).write(),o.close(),s=Te(a,o),Ce.detach()),we[a]=s),s)))):(r=H(i),(n&&"none"!==n||!r)&&y._data(i,"olddisplay",r?n:y.css(i,"display"))));for(c=0;c<u;c++)(i=e[c]).style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?l[c]||"":"none"));return e}function Xe(e,t,n){var i=ze.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function Qe(e,t,n,i,r){for(var a=n===(i?"border":"content")?4:"width"===t?1:0,o=0;a<4;a+=2)"margin"===n&&(o+=y.css(e,n+z[a],!0,r)),i?("content"===n&&(o-=y.css(e,"padding"+z[a],!0,r)),"margin"!==n&&(o-=y.css(e,"border"+z[a]+"Width",!0,r))):(o+=y.css(e,"padding"+z[a],!0,r),"padding"!==n&&(o+=y.css(e,"border"+z[a]+"Width",!0,r)));return o}function Je(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,a=xe(e),o=h.boxSizing&&"border-box"===y.css(e,"boxSizing",!1,a);if(r<=0||null==r){if(((r=ke(e,t,a))<0||null==r)&&(r=e.style[t]),Pe.test(r))return r;i=o&&(h.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+Qe(e,t,n||(o?"border":"content"),i,a)+"px"}y.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=ke(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:h.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,a,o,s=y.camelCase(t),l=e.style;if(t=y.cssProps[s]||(y.cssProps[s]=We(l,s)),o=y.cssHooks[t]||y.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(r=o.get(e,!1,i))?r:l[t];if("string"===(a=typeof n)&&(r=He.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(y.css(e,t)),a="number"),null!=n&&n==n&&("number"!==a||y.cssNumber[s]||(n+="px"),h.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),!(o&&"set"in o&&void 0===(n=o.set(e,n,i)))))try{l[t]=n}catch(e){}}},css:function(e,t,n,i){var r,a,o,s=y.camelCase(t);return t=y.cssProps[s]||(y.cssProps[s]=We(e.style,s)),(o=y.cssHooks[t]||y.cssHooks[s])&&"get"in o&&(a=o.get(e,!0,n)),void 0===a&&(a=ke(e,t,i)),"normal"===a&&t in Ke&&(a=Ke[t]),""===n||n?(r=parseFloat(a),!0===n||y.isNumeric(r)?r||0:a):a}}),y.each(["height","width"],function(e,r){y.cssHooks[r]={get:function(e,t,n){if(t)return Ge.test(y.css(e,"display"))&&0===e.offsetWidth?y.swap(e,qe,function(){return Je(e,r,n)}):Je(e,r,n)},set:function(e,t,n){var i=n&&xe(e);return Xe(0,t,n?Qe(e,r,n,h.boxSizing&&"border-box"===y.css(e,"boxSizing",!1,i),i):0)}}}),h.opacity||(y.cssHooks.opacity={get:function(e,t){return je.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,r=y.isNumeric(t)?"alpha(opacity="+100*t+")":"",a=i&&i.filter||n.filter||"";((n.zoom=1)<=t||""===t)&&""===y.trim(a.replace(Be,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=Be.test(a)?a.replace(Be,r):a+" "+r)}}),y.cssHooks.marginRight=(Ne=h.reliableMarginRight,Oe=function(e,t){if(t)return y.swap(e,{display:"inline-block"},ke,[e,"marginRight"])},{get:function(){var e=Ne();if(null!=e){if(!e)return(this.get=Oe).apply(this,arguments);delete this.get}}}),y.each({margin:"",padding:"",border:"Width"},function(r,a){y.cssHooks[r+a]={expand:function(e){for(var t=0,n={},i="string"==typeof e?e.split(" "):[e];t<4;t++)n[r+z[t]+a]=i[t]||i[t-2]||i[0];return n}},De.test(r)||(y.cssHooks[r+a].set=Xe)}),y.fn.extend({css:function(e,t){return q(this,function(e,t,n){var i,r,a={},o=0;if(y.isArray(t)){for(i=xe(e),r=t.length;o<r;o++)a[t[o]]=y.css(e,t[o],!1,i);return a}return void 0!==n?y.style(e,t,n):y.css(e,t)},e,t,1<arguments.length)},show:function(){return Ye(this,!0)},hide:function(){return Ye(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){H(this)?y(this).show():y(this).hide()})}}),y.fn.delay=function(i,e){return i=y.fx&&y.fx.speeds[i]||i,e=e||"fx",this.queue(e,function(e,t){var n=setTimeout(e,i);t.stop=function(){clearTimeout(n)}})},(Me=A.createElement("div")).setAttribute("className","t"),Me.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",Fe=Me.getElementsByTagName("a")[0],Ue=(Ve=A.createElement("select")).appendChild(A.createElement("option")),Le=Me.getElementsByTagName("input")[0],Fe.style.cssText="top:1px",h.getSetAttribute="t"!==Me.className,h.style=/top/.test(Fe.getAttribute("style")),h.hrefNormalized="/a"===Fe.getAttribute("href"),h.checkOn=!!Le.value,h.optSelected=Ue.selected,h.enctype=!!A.createElement("form").enctype,Ve.disabled=!0,h.optDisabled=!Ue.disabled,(Le=A.createElement("input")).setAttribute("value",""),h.input=""===Le.getAttribute("value"),Le.value="t",Le.setAttribute("type","radio"),h.radioValue="t"===Le.value;var Ze=/\r/g;y.fn.extend({val:function(n){var i,e,r,t=this[0];return arguments.length?(r=y.isFunction(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=r?n.call(this,e,y(this).val()):n)?t="":"number"==typeof t?t+="":y.isArray(t)&&(t=y.map(t,function(e){return null==e?"":e+""})),(i=y.valHooks[this.type]||y.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&void 0!==i.set(this,t,"value")||(this.value=t))})):t?(i=y.valHooks[t.type]||y.valHooks[t.nodeName.toLowerCase()])&&"get"in i&&void 0!==(e=i.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(Ze,""):null==e?"":e:void 0}}),y.extend({valHooks:{option:{get:function(e){var t=y.find.attr(e,"value");return null!=t?t:y.trim(y.text(e))}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,a="select-one"===e.type||r<0,o=a?null:[],s=a?r+1:i.length,l=r<0?s:a?r:0;l<s;l++)if(((n=i[l]).selected||l===r)&&(h.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!y.nodeName(n.parentNode,"optgroup"))){if(t=y(n).val(),a)return t;o.push(t)}return o},set:function(e,t){for(var n,i,r=e.options,a=y.makeArray(t),o=r.length;o--;)if(i=r[o],0<=y.inArray(y.valHooks.option.get(i),a))try{i.selected=n=!0}catch(e){i.scrollHeight}else i.selected=!1;return n||(e.selectedIndex=-1),r}}}}),y.each(["radio","checkbox"],function(){y.valHooks[this]={set:function(e,t){if(y.isArray(t))return e.checked=0<=y.inArray(y(e).val(),t)}},h.checkOn||(y.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var et,tt,nt=y.expr.attrHandle,it=/^(?:checked|selected)$/i,rt=h.getSetAttribute,at=h.input;y.fn.extend({attr:function(e,t){return q(this,y.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){y.removeAttr(this,e)})}}),y.extend({attr:function(e,t,n){var i,r,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return typeof e.getAttribute===L?y.prop(e,t,n):(1===a&&y.isXMLDoc(e)||(t=t.toLowerCase(),i=y.attrHooks[t]||(y.expr.match.bool.test(t)?tt:et)),void 0===n?i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=y.find.attr(e,t))?void 0:r:null!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):void y.removeAttr(e,t))},removeAttr:function(e,t){var n,i,r=0,a=t&&t.match(D);if(a&&1===e.nodeType)for(;n=a[r++];)i=y.propFix[n]||n,y.expr.match.bool.test(n)?at&&rt||!it.test(n)?e[i]=!1:e[y.camelCase("default-"+n)]=e[i]=!1:y.attr(e,n,""),e.removeAttribute(rt?n:i)},attrHooks:{type:{set:function(e,t){if(!h.radioValue&&"radio"===t&&y.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),tt={set:function(e,t,n){return!1===t?y.removeAttr(e,n):at&&rt||!it.test(n)?e.setAttribute(!rt&&y.propFix[n]||n,n):e[y.camelCase("default-"+n)]=e[n]=!0,n}},y.each(y.expr.match.bool.source.match(/\w+/g),function(e,t){var a=nt[t]||y.find.attr;nt[t]=at&&rt||!it.test(t)?function(e,t,n){var i,r;return n||(r=nt[t],nt[t]=i,i=null!=a(e,t,n)?t.toLowerCase():null,nt[t]=r),i}:function(e,t,n){if(!n)return e[y.camelCase("default-"+t)]?t.toLowerCase():null}}),at&&rt||(y.attrHooks.value={set:function(e,t,n){if(!y.nodeName(e,"input"))return et&&et.set(e,t,n);e.defaultValue=t}}),rt||(et={set:function(e,t,n){var i=e.getAttributeNode(n);if(i||e.setAttributeNode(i=e.ownerDocument.createAttribute(n)),i.value=t+="","value"===n||t===e.getAttribute(n))return t}},nt.id=nt.name=nt.coords=function(e,t,n){var i;if(!n)return(i=e.getAttributeNode(t))&&""!==i.value?i.value:null},y.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);if(n&&n.specified)return n.value},set:et.set},y.attrHooks.contenteditable={set:function(e,t,n){et.set(e,""!==t&&t,n)}},y.each(["width","height"],function(e,n){y.attrHooks[n]={set:function(e,t){if(""===t)return e.setAttribute(n,"auto"),t}}})),h.style||(y.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var ot=/^(?:input|select|textarea|button|object)$/i,st=/^(?:a|area)$/i;y.fn.extend({prop:function(e,t){return q(this,y.prop,e,t,1<arguments.length)},removeProp:function(e){return e=y.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(e){}})}}),y.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,n){var i,r,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return(1!==a||!y.isXMLDoc(e))&&(t=y.propFix[t]||t,r=y.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=y.find.attr(e,"tabindex");return t?parseInt(t,10):ot.test(e.nodeName)||st.test(e.nodeName)&&e.href?0:-1}}}}),h.hrefNormalized||y.each(["href","src"],function(e,t){y.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),h.optSelected||(y.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),y.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){y.propFix[this.toLowerCase()]=this}),h.enctype||(y.propFix.enctype="encoding");var lt=/[\t\r\n\f]/g;y.fn.extend({addClass:function(t){var e,n,i,r,a,o,s=0,l=this.length,c="string"==typeof t&&t;if(y.isFunction(t))return this.each(function(e){y(this).addClass(t.call(this,e,this.className))});if(c)for(e=(t||"").match(D)||[];s<l;s++)if(i=1===(n=this[s]).nodeType&&(n.className?(" "+n.className+" ").replace(lt," "):" ")){for(a=0;r=e[a++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");o=y.trim(i),n.className!==o&&(n.className=o)}return this},removeClass:function(t){var e,n,i,r,a,o,s=0,l=this.length,c=0===arguments.length||"string"==typeof t&&t;if(y.isFunction(t))return this.each(function(e){y(this).removeClass(t.call(this,e,this.className))});if(c)for(e=(t||"").match(D)||[];s<l;s++)if(i=1===(n=this[s]).nodeType&&(n.className?(" "+n.className+" ").replace(lt," "):"")){for(a=0;r=e[a++];)for(;0<=i.indexOf(" "+r+" ");)i=i.replace(" "+r+" "," ");o=t?y.trim(i):"",n.className!==o&&(n.className=o)}return this},toggleClass:function(r,t){var a=typeof r;return"boolean"==typeof t&&"string"===a?t?this.addClass(r):this.removeClass(r):y.isFunction(r)?this.each(function(e){y(this).toggleClass(r.call(this,e,this.className,t),t)}):this.each(function(){if("string"===a)for(var e,t=0,n=y(this),i=r.match(D)||[];e=i[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else a!==L&&"boolean"!==a||(this.className&&y._data(this,"__className__",this.className),this.className=this.className||!1===r?"":y._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;n<i;n++)if(1===this[n].nodeType&&0<=(" "+this[n].className+" ").replace(lt," ").indexOf(t))return!0;return!1}}),y.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,n){y.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),y.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),y.fn.extend({wrapAll:function(t){if(y.isFunction(t))return this.each(function(e){y(this).wrapAll(t.call(this,e))});if(this[0]){var e=y(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(n){return y.isFunction(n)?this.each(function(e){y(this).wrapInner(n.call(this,e))}):this.each(function(){var e=y(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=y.isFunction(t);return this.each(function(e){y(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(){return this.parent().each(function(){y.nodeName(this,"body")||y(this).replaceWith(this.childNodes)}).end()}}),y.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!h.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||y.css(e,"display"))},y.expr.filters.visible=function(e){return!y.expr.filters.hidden(e)};var ct=/%20/g,ut=/\[\]$/,dt=/\r?\n/g,pt=/^(?:submit|button|image|reset|file)$/i,gt=/^(?:input|select|textarea|keygen)/i;function ft(n,e,i,r){var t;if(y.isArray(e))y.each(e,function(e,t){i||ut.test(n)?r(n,t):ft(n+"["+("object"==typeof t?e:"")+"]",t,i,r)});else if(i||"object"!==y.type(e))r(n,e);else for(t in e)ft(n+"["+t+"]",e[t],i,r)}y.param=function(e,t){var n,i=[],r=function(e,t){t=y.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=y.ajaxSettings&&y.ajaxSettings.traditional),y.isArray(e)||e.jquery&&!y.isPlainObject(e))y.each(e,function(){r(this.name,this.value)});else for(n in e)ft(n,e[n],t,r);return i.join("&").replace(ct,"+")},y.fn.extend({serialize:function(){return y.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=y.prop(this,"elements");return e?y.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!y(this).is(":disabled")&&gt.test(this.nodeName)&&!pt.test(e)&&(this.checked||!K.test(e))}).map(function(e,t){var n=y(this).val();return null==n?null:y.isArray(n)?y.map(n,function(e){return{name:t.name,value:e.replace(dt,"\r\n")}}):{name:t.name,value:n.replace(dt,"\r\n")}}).get()}}),y.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||A;var i=b.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=y.buildFragment([e],t,r),r&&r.length&&y(r).remove(),y.merge([],i.childNodes))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return y});var mt=f.jQuery,vt=f.$;return y.noConflict=function(e){return f.$===y&&(f.$=vt),e&&f.jQuery===y&&(f.jQuery=mt),y},typeof e===L&&(f.jQuery=f.$=y),y},"object"==typeof module&&"object"==typeof module.exports?module.exports=Z.document?_(Z,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return _(e)}:_(Z);var $=window.jQuery.noConflict(!0),optimizelyCode=function(){var DATA=experimentData,asyncRequest={},preview_loader={},integrator={},api={},distributor={},query={},id={},redirect={},detect={},directive={},json={},tracker={},condition={facade:{}},template={},visitor={},activator={},rule_builder={},main={},rules={},feature_detect={},cookie={},user={},iapi={},evaluator={},data={},dcp={},asyncInfo={},segmenter={},timer={},optly={murmur3:{},Visitor:{},taint:{},nativity:{},timeAndDayInterval:{},client:{third_party:{},geolocation:{},rum:{RumCollector:{}},storage:{Storage:{}},diagnostic:{},Facade:{},preview:{Logger:{}}},CIDR:{},Cleanse:{},match:{},hashing:{}},common={},behavior={Policy:{},FIELDS:{},Store:{},Event:{},EventBase:{}},useragent={},plan={},COMPILED=!1,goog=goog||{};goog.global=this,goog.DEBUG=!0,goog.LOCALE="en",goog.provide=function(e){if(!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e];for(var t=e;(t=t.substring(0,t.lastIndexOf(".")))&&!goog.getObjectByName(t);)goog.implicitNamespaces_[t]=!0}goog.exportPath_(e)},goog.setTestOnly=function(e){if(COMPILED&&!goog.DEBUG)throw e=e||"",Error(": "+e)},COMPILED||(goog.isProvided_=function(e){return!goog.implicitNamespaces_[e]&&!!goog.getObjectByName(e)},goog.implicitNamespaces_={}),goog.exportPath_=function(e,t,n){var i,r=e.split("."),a=n||goog.global;r[0]in a||!a.execScript||a.execScript("var "+r[0]);for(;r.length&&(i=r.shift());)!r.length&&goog.isDef(t)?a[i]=t:a=a[i]?a[i]:a[i]={}},goog.getObjectByName=function(e,t){for(var n,i=e.split("."),r=t||goog.global;n=i.shift();){if(!goog.isDefAndNotNull(r[n]))return null;r=r[n]}return r},goog.globalize=function(e,t){var n=t||goog.global;for(var i in e)n[i]=e[i]},goog.addDependency=function(e,t,n){if(!COMPILED){for(var i,r,a=e.replace(/\\/g,"/"),o=goog.dependencies_,s=0;i=t[s];s++)(o.nameToPath[i]=a)in o.pathToNames||(o.pathToNames[a]={}),o.pathToNames[a][i]=!0;for(var l=0;r=n[l];l++)a in o.requires||(o.requires[a]={}),o.requires[a][r]=!0}},goog.ENABLE_DEBUG_LOADER=!0,goog.require=function(e){if(!COMPILED){if(goog.isProvided_(e))return;if(goog.ENABLE_DEBUG_LOADER){var t=goog.getPathFromDeps_(e);if(t)return goog.included_[t]=!0,void goog.writeScripts_()}var n="goog.require could not find: "+e;throw goog.global.console&&goog.global.console.error(n),Error(n)}},goog.basePath="",goog.global.CLOSURE_BASE_PATH,goog.global.CLOSURE_NO_DEPS=!0,goog.global.CLOSURE_IMPORT_SCRIPT,goog.nullFunction=function(){},goog.identityFunction=function(e,t){return e},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],!COMPILED&&goog.ENABLE_DEBUG_LOADER&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var e=goog.global.document;return void 0!==e&&"write"in e},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var e=goog.global.document.getElementsByTagName("script"),t=e.length-1;0<=t;--t){var n=e[t].src,i=n.lastIndexOf("?"),r=-1==i?n.length:i;if("base.js"==n.substr(r-7,7))return void(goog.basePath=n.substr(0,r-7))}},goog.importScript_=function(e){var t=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[e]&&t(e)&&(goog.dependencies_.written[e]=!0)},goog.writeScriptTag_=function(e){return!!goog.inHtmlDocument_()&&(goog.global.document.write('<script type="text/javascript" src="'+e+'"><\/script>'),!0)},goog.writeScripts_=function(){var n=[],i={},r=goog.dependencies_;function a(e){if(!(e in r.written))if(e in r.visited)e in i||(i[e]=!0,n.push(e));else{if(r.visited[e]=!0,e in r.requires)for(var t in r.requires[e])if(!goog.isProvided_(t)){if(!(t in r.nameToPath))throw Error("Undefined nameToPath for "+t);a(r.nameToPath[t])}e in i||(i[e]=!0,n.push(e))}}for(var e in goog.included_)r.written[e]||a(e);for(var t=0;t<n.length;t++){if(!n[t])throw Error("Undefined script input");goog.importScript_(goog.basePath+n[t])}},goog.getPathFromDeps_=function(e){return e in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[e]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js")),goog.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t},goog.isDef=function(e){return void 0!==e},goog.isNull=function(e){return null===e},goog.isDefAndNotNull=function(e){return null!=e},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isString=function(e){return"string"==typeof e},goog.isBoolean=function(e){return"boolean"==typeof e},goog.isNumber=function(e){return"number"==typeof e},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.removeUid=function(e){"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_)
/** @preserveTry */;try{delete e[goog.UID_PROPERTY_]}catch(e){}},goog.UID_PROPERTY_="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(e.clone)return e.clone();var n="array"==t?[]:{};for(var i in e)n[i]=goog.cloneObject(e[i]);return n}return e},goog.bindNative_=function(e,t,n){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(t,n,e){if(!t)throw new Error;if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,i),t.apply(n,e)}}return function(){return t.apply(n,arguments)}},goog.bind=function(e,t,n){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=Array.prototype.slice.call(arguments);return e.unshift.apply(e,n),t.apply(this,e)}},goog.mixin=function(e,t){for(var n in t)e[n]=t[n]},goog.now=Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),void 0!==goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(e);else{var t=goog.global.document,n=t.createElement("script");n.type="text/javascript",n.defer=!1,n.appendChild(t.createTextNode(e)),t.body.appendChild(n),t.body.removeChild(n)}}},goog.evalWorksForGlobals_=null,goog.cssNameMapping_,goog.cssNameMappingStyle_,goog.getCssName=function(e,t){var n,r=function(e){return goog.cssNameMapping_[e]||e};return n=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?r:function(e){for(var t=e.split("-"),n=[],i=0;i<t.length;i++)n.push(r(t[i]));return n.join("-")}:function(e){return e},t?e+"-"+n(t):n(e)},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},goog.global.CLOSURE_CSS_NAME_MAPPING,!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(e,t){var n=t||{};for(var i in n){var r=(""+n[i]).replace(/\$/g,"$$$$");e=e.replace(new RegExp("\\{\\$"+i+"\\}","gi"),r)}return e},goog.exportSymbol=function(e,t,n){goog.exportPath_(e,t,n)},goog.exportProperty=function(e,t,n){e[t]=n},goog.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new n,e.prototype.constructor=e},goog.base=function(e,t,n){var i=arguments.callee.caller;if(i.superClass_)return i.superClass_.constructor.apply(e,Array.prototype.slice.call(arguments,1));for(var r=Array.prototype.slice.call(arguments,2),a=!1,o=e.constructor;o;o=o.superClass_&&o.superClass_.constructor)if(o.prototype[t]===i)a=!0;else if(a)return o.prototype[t].apply(e,r);if(e[t]===i)return e.constructor.prototype[t].apply(e,r);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(e){e.call(goog.global)},json.stringify=function(e){try{return window.JSON.stringify(e)}catch(e){throw new Error("JSON: Unable to stringify ("+e.message+")")}},json.parse=function(e){try{return window.JSON.parse(e)}catch(e){throw new Error("JSON: Unable to parse ("+e.message+")")}},optly.client.preview.ENABLED=!1,optly.client.preview.Logger.log=[],optly.client.preview.Logger.reasons={},optly.client.preview.Logger.addEvent=optly.client.preview.ENABLED?function(e,t){t=extend(t||{},{message:e,date:(new Date).getTime()}),optly.client.preview.Logger.log.push(t)}:goog.nullFunction,optly.client.preview.Logger.setReason=optly.client.preview.ENABLED?function(e,t){optly.client.preview.Logger.reasons[e]=t}:goog.nullFunction,optly.client.preview.Logger.getReason=optly.client.preview.ENABLED?function(e){return optly.client.preview.Logger.reasons[e]}:goog.nullFunction,optly.client.preview.Logger.deleteReason=optly.client.preview.ENABLED?function(e){delete optly.client.preview.Logger.reasons[e]}:goog.nullFunction,optly.client.preview.Logger.clear=optly.client.preview.ENABLED?function(){optly.client.preview.Logger.log=[]}:goog.nullFunction,data.getAdminAccountId=function(){return data.getProperty("admin_account_id")},data.getAudience=function(e){return data.getProperty("audiences",e)},data.getAudienceProperty=function(e,t){return data.getProperty("audiences",e,t)},data.getAudiences=function(){return data.getProperty("audiences")},data.getAudienceSegmentId=function(e){var t=data.getAudienceProperty(e,"segment_id");return t||null},data.getClickGoals=function(){if(!data.clickGoalsWithSeparatedSelectors){var e=data.getProperty("click_goals")||[];data.clickGoalsWithSeparatedSelectors=[];for(var t=0,n=e.length;t<n;t++)for(var i=e[t],r=i.selector.split(SELECTOR_DELIMITER),a=0,o=r.length;a<o;a++){var s=r[a];if(s){var l={event_name:i.event_name,selector:s};"experiments"in i?l.experiments=i.experiments:"url_conditions"in i&&(l.url_conditions=i.url_conditions),"revenue"in i&&(l.revenue=i.revenue),data.clickGoalsWithSeparatedSelectors.push(l)}}}return data.clickGoalsWithSeparatedSelectors},data.getConditions=function(e,t){switch(t){case"experiment":return data.getExperimentConditions(e);case"segment":return data.getSegmentConditions(e);default:return[]}},data.usesAudiences=function(e){return!(data.getExperimentConditions(e)||data.getSegmentConditions(e))},data.getCustomRevenueGoals=function(){return data.getProperty("custom_revenue_goals")},data.getDCPServiceId=function(){return data.getProperty("dcp_service_id")||null},data.dcpKeyfieldLocator,data.getDCPKeyfieldLocators=function(){return data.getProperty("dcp_keyfield_locators")||[]},data.getSummaryRevenueGoalId=function(){return data.getProperty("summary_revenue_goal_id")||null},data.getDimension=function(e){return data.getProperty("dimensions",e)},data.getDimensions=function(){return data.getProperty("dimensions")||{}},data.getDimensionIdByApiName=function(e){for(var t in data.getDimensions())if(e===data.getDimensionApiName(t))return t;return null},data.getDimensionProperty=function(e,t){return data.getProperty("dimensions",e,t)},data.getDimensionApiName=function(e){var t=data.getDimensionProperty(e,"api_name");return t||null},data.getDimensionType=function(e){var t=data.getDimensionProperty(e,"condition_type");return t||null},data.getDimensionName=function(e){var t=data.getDimensionProperty(e,"name");return t||null},data.getDimensionSegmentId=function(e){var t=data.getDimensionProperty(e,"segment_id");return t||null},data.getEnabledExperimentIds=function(){return data.cachedEnabledExperimentIds||(data.cachedEnabledExperimentIds=filter(data.getExperimentIds(),data.isExperimentEnabled)),data.cachedEnabledExperimentIds},data.getEnabledVariationIds=function(e){return data.getExperimentProperty(e,"enabled_variation_ids")||[]},data.getExperimentAudienceIds=function(e){return data.getExperimentProperty(e,"audiences")||[]},data.getExperimentCode=function(e){return data.getExperimentProperty(e,"code")||""},data.getExperimentStatus=optly.client.preview.ENABLED?function(e){return data.getExperimentProperty(e,"status")}:goog.nullFunction,data.getExperimentConditions=function(e){return data.getExperimentProperty(e,"conditions")},data.getExperimentUrls=function(e){return data.getExperimentProperty(e,"urls")},data.getGoalExpressions=function(){return data.getProperty("goal_expressions")},data.getLegacyUUID=function(){return data.getProperty("legacy_uuid")||!1},data.getMatchingGoalIds=function(e){var t=data.getGoalExpressions(),n=[];for(var i in t)if(t.hasOwnProperty(i))for(var r=t[i],a=0;a<r.length;a++)try{if(new RegExp(r[a],"i").test(e)){n.push(i);break}}catch(e){}return n},data.getProjectClickGoalsWithCustomTargeting=function(){return filter(data.getClickGoals(),function(e){return!e.experiments&&condition.testUrls(e.url_conditions||[])})},data.getSegmentIdByIdentifier=function(e){var t=data.getSegments();for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=t[n];if(i&&i.api_name===e)return String(n)}return null},data.getSegementIsDefault=optly.client.preview.ENABLED?function(e){return data.getSegmentProperty(e,"is_default")||!1}:goog.nullFunction,data.getSegment=function(e){return data.getSegments()[e]},data.getSegmentAPIOnly=function(e){return data.getSegmentProperty(e,"is_api_only")||!1},data.getSegmentAudienceId=function(e){return data.getSegmentProperty(e,"audience_id")},data.getSegmentConditions=function(e){return data.getSegmentProperty(e,"add_condition")},data.getSegmentIdentifier=function(e){return data.getSegmentProperty(e,"api_name")||""},data.getSegmentName=function(e){return data.getSegmentProperty(e,"name")||"Seg "+e},data.getSegmentValueType=function(e){return data.getSegmentProperty(e,"segment_value_type")||""},data.getUrlConditions=function(e){var t=data.getExperimentConditions(e),n=[];return each(t,function(e){"url"===e.type&&n.push(t)}),n},data.getExperimentCss=function(e){return data.getExperimentProperty(e,"css")||""},data.getExperimentEvents=function(t){var n={};each(data.getExperimentProperty(t,"events")||{},function(e,t){n[e]=[t]});for(var e=filter(data.getClickGoals(),function(e){return"experiments"in e&&t in e.experiments}),i=0;i<e.length;i++){var r=e[i];n[r.selector]||(n[r.selector]=[]),n[r.selector].push({eventName:r.event_name,revenue:r.revenue,experimentIds:r.experiments})}return n},data.getExperiments=function(){return data.getProperty("experiments")||{}},data.getBlacklistedExperiments=function(){return data.getProperty("blacklisted_experiments")||{}},data.getExperimentIds=function(){return keys(data.getProperty("experiments")||{})},data.getExperimentIgnorePercentage=function(e){return data.getExperimentProperty(e,"ignore")||0},data.isExperimentManuallyActivated=function(e){return"manual"===data.getExperimentProperty(e,"activation_mode")},data.isExperimentConditionallyActivated=function(e){return"conditional"===data.getExperimentProperty(e,"activation_mode")},data.getConditionalActivationCode=function(e){return data.getExperimentProperty(e,"conditional_code")},data.getExperimentName=function(e){return data.getExperimentProperty(e,"name")||"Exp "+e},data.getExperimentString=function(e){return'experiment "'+data.getExperimentName(e)+'" ('+e+")"},data.getExperimentSectionIds=function(e){return data.getExperimentProperty(e,"section_ids")||[]},data.getExperimentVariationIds=function(e){return data.getExperimentProperty(e,"variation_ids")||[]},data.getExperimentVariationWeights=function(e){return data.getExperimentProperty(e,"variation_weights")||{}},data.getExperimentSteps=function(e){return data.getExperimentProperty(e,"steps")},data.getGoogleAnalyticsSlot=function(e){var t=data.getGoogleAnalyticsProperty(e),n=0;return isDefined(t)&&(n=t.slot||n),n},data.getGoogleAnalyticsTracker=function(e){var t=data.getGoogleAnalyticsProperty(e),n="";return isDefined(t)&&(n=t.tracker||n),n},data.getInsecurePreview=function(){return!!data.getProperty("insecure_preview")},data.getIPAnonymization=function(){return!!data.getProperty("ip_anonymization")},data.getListTargetedKey=function(e){return data.getListTargetedKeys()[e]},data.getListTargetedKeys=function(){return data.getProperty("list_targeted_keys")||{}},data.getLogUrlRoot=function(){return data.getUrlRoot("log_host",data.getProjectId())+"/event"},data.getPreviewHost=function(){return data.getProperty("preview_host")},data.getProjectId=function(){return data.getProperty("project_id")},data.getProjectCode=function(){return data.getProperty("project_js")},data.getRevision=function(){return data.getProperty("revision")},data.getSectionIds=function(){return keys(data.getProperty("sections")||{})},data.getSegments=function(){return data.getProperty("segments")||{}},data.getSegmentIds=function(){return keys(data.getSegments())},data.getExperimentVariationSectionId=function(e,t){for(var n=data.getExperimentSectionIds(e),i=0;i<n.length;i++){if(arrayContains(data.getSectionVariationIds(n[i]),t))return n[i]}return""},data.getPublicSuffix=function(e){var n={};return each(data.getProperty("public_suffixes")||{},function(t,e){each(e,function(e){n[e]=t})}),data.getPublicSuffix=function(e){return n[e]||""},data.getPublicSuffix.call(null,e)},data.getSectionName=function(e){return data.getSectionProperty(e,"name")||"Sec "+e},data.getSectionVariationIds=function(e){return data.getSectionProperty(e,"variation_ids")||[]},data.getSiteCatalystEVar=function(e){return data.getExperimentProperty(e,"site_catalyst_evar")||null},data.getSiteCatalystProp=function(e){return data.getExperimentProperty(e,"site_catalyst_prop")||null},data.getVariations=function(){return data.getProperty("variations")||{}},data.getVariationIds=function(){return keys(data.getProperty("variations")||{})},data.getVariationCode=function(e){var n=[];return each(e.split(VARIATION_ID_DELIMITER),function(e){var t=data.getVariationProperty(e,"code");t&&n.push(t)}),n.join("\n")},data.UrlMatchCondition,data.VariationPage,data.getVariationPages=function(e){return data.getVariationProperty(e,"pages")},data.getVariationExperimentId=function(e){if(!data.cachedVariationExperimentIds){var n={};each(data.getExperimentIds(),function(t){each(data.getExperimentSectionIds(t),function(e){each(data.getSectionVariationIds(e),function(e){n[e]=t})}),each(data.getExperimentVariationIds(t),function(e){n[e]=t})}),data.cachedVariationExperimentIds=n}var t=e.split(VARIATION_ID_DELIMITER);return data.cachedVariationExperimentIds[t[0]]||""},data.getVariationIdByIndex=function(e,t){var n=data.getExperimentVariationIds(e),i=null;try{i=n[t]}catch(e){}return i},data.getVariationIndex=function(e){var t=data.getVariationExperimentId(e),n=data.getExperimentSectionIds(t);if(0===n.length){for(var i=data.getExperimentVariationIds(t),r=0;r<i.length;r++)if(i[r]===e)return r}else{for(var a=e.split(VARIATION_ID_DELIMITER),o=[],s=0;s<n.length;s++)for(var l=n[s],c=data.getSectionVariationIds(l),u=0;u<c.length;u++){c[u]===a[s]&&o.push(u)}if(o!==[])return o}return-1},data.getVariationName=function(e,t){return t=t||", ",data.getVariationNamesArray(e).join(t)},data.getVariationNamesArray=function(e){var t=[];return each(e.split(VARIATION_ID_DELIMITER),function(e){t.push(data.getVariationProperty(e,"name")||"Var "+e)}),t},data.getVariationSectionId=function(e){var n={};return each(data.getSectionIds(),function(t){each(data.getSectionVariationIds(t),function(e){n[e]=t})}),data.getVariationSectionId=function(e){var t=e.split(VARIATION_ID_DELIMITER);return n[t[0]]||""},data.getVariationSectionId.call(null,e)},data.getVersion=function(){return data.getProperty("version")},data.getWebHost=function(){return data.getProperty("www_host")},data.isProductionHost=function(){return/\.optimizely\.(?!test)[^.]+$/.test(data.getWebHost())},data.isExperimentEnabled=function(e){return!!data.getExperimentProperty(e,"enabled")},data.isChartbeatEnabled=function(e){return!!data.getChartbeatProperty(e)},data.isClickTaleEnabled=function(e){return!!data.getClickTaleProperty(e)},data.isComscoreEnabled=function(e){return!!data.getComscoreProperty(e,"url")},data.isCrazyEggEnabled=function(e){return!!data.getCrazyEggProperty(e)},data.isForceVariationEnabled=function(){return!!data.getProperty("force_variation")},data.isGeotargetingEnabled=function(e){return!!data.getGeotargetingProperty(e)},data.isGoogleAnalyticsEnabled=function(e){return!!data.getGoogleAnalyticsProperty(e)},data.isUniversalAnalyticsEnabled=function(e){return!!data.getUniversalAnalyticsProperty(e,"slot")},data.isInstallationVerified=function(){return!!data.getProperty("installation_verified")},data.isInspectletEnabled=function(e){return!!data.getInspectletProperty(e)},data.isKissMetricsEnabled=function(){return!!data.getProperty("kissmetrics")},data.isListTargetingEnabled=function(){return!!data.getProperty("uses_list_targeting")},data.isMixpanelEnabled=function(e){return!!data.getMixpanelProperty(e)},data.isMoatEnabled=function(e){return!!data.getMoatProperty(e)},data.isSessioncamEnabled=function(e){return!!data.getSessioncamProperty(e)},data.isATInternetEnabled=function(e){return!!data.getExperimentProperty(e,"at_internet")},data.isRemotePublicSuffixEnabled=function(){return!!data.getProperty("remote_public_suffix")},data.isSimpleCookiesEnabled=function(){return!!data.getProperty("simple_cookies")},data.isStagingLogEnabled=function(){return!!data.getProperty("use_staging_log")},data.isDynamicCustomerProfileTargetingEnabled=function(){return!!data.getProperty("uses_dynamic_customer_profile_targeting")},data.getExperimentProperty=function(e,t){return data.getProperty("experiments",e,t)},data.getChartbeatProperty=function(e){return data.getExperimentProperty(e,"chartbeat")},data.getRedirectTimeout=function(){return data.getProperty("redirect_timeout")||REDIRECT_COOKIE_SECONDS},data.getClickTaleProperty=function(e){return data.getExperimentProperty(e,"clicktale")},data.getComscoreProperty=function(e,t){var n=data.getExperimentProperty(e,"comscore");return isDefined(n)?n[t]:null},data.getCrazyEggProperty=function(e){return data.getExperimentProperty(e,"crazyegg")},data.getGeotargetingProperty=function(e){var t="uses_geotargeting";return data.getExperimentProperty(e,t)||data.getSegmentProperty(e,t)},data.getGoogleAnalyticsProperty=function(e){return data.getExperimentProperty(e,"google_analytics")},data.getUniversalAnalyticsProperty=function(e,t){var n=data.getExperimentProperty(e,"universal_analytics");return isDefined(n)?n[t]:null},data.getInspectletProperty=function(e){return data.getExperimentProperty(e,"inspectlet")},data.getMixpanelProperty=function(e){return data.getExperimentProperty(e,"mixpanel")},data.getMoatProperty=function(e){return data.getExperimentProperty(e,"moat")},data.getSessioncamProperty=function(e){return data.getExperimentProperty(e,"sessioncam")},data.getProperty=function(e){var n=DATA;if(null!==each(arguments,function(e){var t=n[e];if(!isDefined(t))return null;n=t}))return n},data.getSectionProperty=function(e,t){return data.getProperty("sections",e,t)},data.getSegmentProperty=function(e,t){return data.getProperty("segments",e,t)},data.getUrlRoot=function(e,t){var n=data.getProperty(e);return t&&(n=t.toString()+"."+n),"https://"+n},data.getVariationProperty=function(e,t){return data.getProperty("variations",e,t)},data.rumSamplingRate=function(){var e=data.getProperty("rum_sampling_rate");return isDefined(e)?e:.003},data.isBehaviorEnabled=function(){return!!data.getProperty("is_behavior_enabled")},data.hasSlave=function(){return!!data.getProperty("slave")},data.clickGoalsWithSeparatedSelectors=null,data.cachedEnabledExperimentIds=null,data.cachedVariationExperimentIds=null,cookie.delimiterPattern=/\s*;\s*/,cookie.valuePattern=/^([^=]+)=?(.*)$/,cookie.get=function(t){var n=[];return each(cookie.getAll(),function(e){t===e.name&&n.push(safeDecodeUriComponent(e.value))}),0===n.length?null:(1<n.length&&log("Cookie","Values found for %s: %s",t,n.length),n.pop())},cookie.initialized=!1,cookie.initialize=function(){if(cookie.initialized)log("Cookie","Already initialized.");else{log("Cookie","Initializing.");var e=document.location.hostname;data.isSimpleCookiesEnabled()?(cookie.highestLevelDomain=e,cookie.possibleDomains=cookie.findPossibleDomains(),0<cookie.possibleDomains.length?(cookie.highestLevelDomain=cookie.possibleDomains[0],log("Cookie","Highest level domain: %s",cookie.highestLevelDomain)):(log("Cookie","Disabling event tracking because cookies could not be set"),directive.shouldTrackEvents=!1)):(cookie.guessedPublicSuffix=cookie.guessPublicSuffix(e),log("Cookie","Guessed public suffix: %s",cookie.guessedPublicSuffix),cookie.publicSuffix=data.getPublicSuffix(e),log("Cookie","Public suffix (from data): %s",cookie.publicSuffix)),cookie.apiPublicSuffix&&log("Cookie","Domain specified by API: %s",cookie.apiPublicSuffix),cookie.initialized=!0,log("Cookie","Done initializing.")}},cookie.remove=function(e){cookie.deleteFromDomain(e,cookie.getCurrentSuffix())},cookie.getAll=function(n){var i=[];return n=n||"",each((document.cookie||"").split(cookie.delimiterPattern),function(e){var t=e.match(cookie.valuePattern);t&&0===t[1].indexOf(n)&&i.push({name:t[1],value:t[2],raw:e})}),i},cookie.set=function(e,t,n){if(cookie.initialize(),t=t||"",data.isSimpleCookiesEnabled())cookie.setUsingSimpleLogic(e,t,n);else{var i=cookie.getCurrentSuffix(),r=document.location.hostname;!cookie.publicSuffix&&data.isRemotePublicSuffixEnabled()&&cookie.queue.push({age:n,name:e,value:t}),i&&i===cookie.publicSuffix&&i!==cookie.guessedPublicSuffix&&(cookie.deleteFromDomain(e,r),cookie.deleteFromDomain(e,cookie.guessedPublicSuffix)),cookie.setOnDomain(e,t,i,n);var a=cookie.get(e);a===t?log("Cookie","Successfully set %s=%s on %s",e,t,i):(log("Cookie","Setting %s on %s apparently failed (%s != %s)",e,i,a,t),log("Cookie","Setting %s on %s",e,r),cookie.setOnDomain(e,t,r,n),(a=cookie.get(e))===t?(log("Cookie","Setting %s on %s worked; saving as new public suffix",e,r),cookie.guessedPublicSuffix=r):(log("Cookie","Could not set cookie %s, disabling event tracking.",e),directive.shouldTrackEvents=!1))}},cookie.deleteFromDomain=function(e,t){var n=[e,"=","; ",cookie.formatDomainString(t),"; path=/","; expires=",new Date(0).toUTCString()];document.cookie=n.join("")},cookie.findPossibleDomains=function(){for(var e=document.location.hostname.split("."),t=[],n=e.length-1;0<=n;--n){var i=e.slice(n).join("."),r=DOMAIN_TEST_COOKIE_NAME_PREFIX+generateRandomHexString(),a=generateRandomHexString();cookie.setOnDomain(r,a,i,DOMAIN_TEST_COOKIE_EXPIRATION),cookie.get(r)===a&&t.push(i)}return t},cookie.getCurrentSuffix=function(){return data.isSimpleCookiesEnabled()?cookie.apiPublicSuffix||cookie.highestLevelDomain:cookie.apiPublicSuffix||cookie.publicSuffix||cookie.guessedPublicSuffix},cookie.formatDomainString=function(e){var t=[];return t.push("domain="),"localhost"!==e&&(t.push("."),t.push(e)),t.join("")},cookie.guessPublicSuffix=function(e){var t=e.split("."),n=e,i=t[t.length-1];return 2<t.length&&"appspot"===t[t.length-2]&&"com"===i?n=t[t.length-3]+".appspot.com":1<t.length&&inArray(i,TOP_LEVEL_DOMAINS)&&(n=t[t.length-2]+"."+i),n},cookie.setOnDomain=function(e,t,n,i){var r=[e,"=",encodeURIComponent(t),"; ",cookie.formatDomainString(n),"; path=/"];if(i){var a=new Date(+new Date+1e3*i);r.push("; expires=",a.toUTCString())}document.cookie=r.join("")},cookie.setUsingSimpleLogic=function(t,e,n){each(cookie.possibleDomains,function(e){cookie.deleteFromDomain(t,e)});var i=cookie.getCurrentSuffix();cookie.setOnDomain(t,e,i,n);var r=cookie.get(t);log("Cookie","%s setting %s=%s on %s",r===e?"Succeeded":"Failed",t,e,i)},cookie.setApiPublicSuffix=function(e){cookie.getCurrentSuffix()!==e&&(cookie.apiPublicSuffix=String(e)||"",log("Cookie","Api public suffix set to: %s",cookie.apiPublicSuffix))},cookie.guessedPublicSuffix="",cookie.apiPublicSuffix="",cookie.highestLevelDomain="",cookie.possibleDomains=[],cookie.publicSuffix="",cookie.queue=[];var AUDIENCE_COOKIE_NAME="optimizelyAudiences",DAY_IN_SECONDS=86400,DEFAULT_TRACKING_COOKIE_EXPIRATION=365*DAY_IN_SECONDS*10,MINIMUM_TRACKING_COOKIE_EXPIRATION=90*DAY_IN_SECONDS,BEHAVIOR_EVENT_HASH_SEED=2716770798,BUCKET_COOKIE_NAME="optimizelyBuckets",CUSTOM_EVENTS_COOKIE_NAME="optimizelyCustomEvents",CUSTOM_EVENTS_STORAGE_NAME="customEvents",DOMAIN_TEST_COOKIE_EXPIRATION=3,DOMAIN_TEST_COOKIE_NAME_PREFIX="optimizelyDomainTest-",EVALUATION_WAIT_INTERVAL=50,FIRST_EVALUATION_WAIT_INTERVAL=10,GLOBAL="optimizely",GLOBAL_DATA="data",GEO_CONDITION_WAIT_INTERVAL=1e3,GEO_TIMEOUT=2e3,IGNORED_VARIATION_ID="0",OPT_OUT_COOKIE_NAME="optimizelyOptOut",PENDING_LOG_EVENTS_COOKIE_AGE=15,PENDING_LOG_EVENTS_COOKIE_MAX_LENGTH=1536,PENDING_LOG_EVENTS_COOKIE_NAME="optimizelyPendingLogEvents",PREVIEW_COOKIE_NAME="optimizelyPreview",REDIRECT_COOKIE_FALSE="false",REDIRECT_COOKIE_SECONDS=5,REDIRECT_COOKIE_TRUE="true",REDIRECT_COOKIE_NAME="optimizelyRedirect",REFERRAL_CHARTBEAT_COOKIE_NAME="optimizelyChartbeat",REFERRER_REDIRECT_COOKIE_NAME="optimizelyReferrer",SEGMENTS_COOKIE_NAME="optimizelySegments",SELECTOR_DELIMITER=",",SOURCE_COOKIE_AGE=3,SOURCE_COOKIE_DELIMITER="|||",SOURCE_COOKIE_NAME="sourceCookie",TEST_MODULE=window.OPTIMIZELY_TEST_MODULE,TOKEN_COOKIE_KEEP_ALIVE=15,TOKEN_COOKIE_NAME="optimizelyToken",TOP_LEVEL_DOMAINS=["com","local","net","org","xxx","edu","es","gov","biz","info","fr","nl","ca","de","kr","it","me","ly","tv","mx","cn","jp","il","in","iq","test"],USER_ID_COOKIE_NAME="optimizelyEndUserId",PPID_COOKIE_NAME="optimizelyPPID",VARIATION_CODE_DELIMITER="\n",VARIATION_ID_DELIMITER="_",VARIATION_URL_DELIMITER=" ",VARIATION_URL_START="_optimizely_variation_url",VARIATION_URL_START_RE=/\/\*\s*_optimizely_variation_url( +include="([^"]*)")?( +exclude="([^"]*)")?( +match_type="([^"]*)")?( +include_match_types="([^"]*)")?( +exclude_match_types="([^"]*)")?( +id="([^"]*)")?\s*\*\//,VARIATION_URL_END="/* _optimizely_variation_url_end */",VARIATION_URL_END_RE=/\/\*\s*_optimizely_variation_url_end\s*\*\//,SIGNED_IN_BODY_CLASS="signed-in",HOTFIX_ENG_1636_COOKIE="optimizelyReportableFix";directive.delayPageviewTracking=0,directive.forceTracking=!1,directive.isSomeClientEnabled=function(){return directive.isEnabled||directive.isNewClientEnabled},directive.isEnabled=!0,directive.isNewClientEnabled=!0,directive.isEditor=!1,directive.isPersonalizationEditor=!1,directive.isDesktopAppEditor=!1,directive.optOutThirdPartyCookies=!1,directive.previewScriptName="",directive.previewVerified=!1,directive.requestedInvalidForceParameters=!1,directive.shouldLoadPreview=!1,directive.shouldLog=!1,directive.shouldLogVerbosely=!1,directive.shouldOverrideThirdPartyCookie=!1,directive.shouldSkipPageTracking=!1,directive.shouldTrackEvents=!0,directive.trackingCookieExpiration=DEFAULT_TRACKING_COOKIE_EXPIRATION,id.getId=function(){return cookie.get(USER_ID_COOKIE_NAME)},id.getOrGenerateId=function(){var e=cookie.get(USER_ID_COOKIE_NAME);return e||(e="oeu"+ +new Date+"r"+Math.random(),cookie.set(USER_ID_COOKIE_NAME,e,directive.trackingCookieExpiration)),e},id.getPPID=function(){return data.getLegacyUUID()?cookie.get(PPID_COOKIE_NAME):(id.unsetPPID(),null)},id.setPPID=function(e){data.getLegacyUUID()&&cookie.set(PPID_COOKIE_NAME,e,directive.trackingCookieExpiration)},id.unsetPPID=function(){cookie.remove(PPID_COOKIE_NAME)},id.hasPPID=function(){return null!==id.getPPID()};var every=function(e,t){var n=!0;return each(e,function(e){if(!t(e))return n=!1}),n},any=function(e,t){var n=!1;return each(e,function(e){if(t(e))return n=!0}),n};function appendArray(e,t){e.push.apply(e,t)}function arrayContains(e,t){for(var n=0;n<e.length;n++)if(t==e[n])return!0;return!1}function containsString(e,t){return-1!==e.indexOf(t)}function containsRegEx(e,t){return Boolean(e.match(t))}function curry(t,e){var n=slice(arguments,1);return function(){var e=slice(arguments);return prependArray(e,n),t.apply(this,e)}}function each(e,t,n){var i=null;if(isArrayLike(e)){for(var r=e.length,a=0;a<r;++a)if(isDefined(i=t.call(n,e[a],a)))return i}else for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)&&isDefined(i=t.call(n,o,e[o])))return i;return i}function map(e,t){if("function"==typeof e.map)return e.map(t);for(var n=[],i=0;i<e.length;i++)n.push(t(e[i],i));return n}function extend(n,e){return each(e,function(e,t){n[e]=t}),n}function getFieldValue(e,t){if(isArrayLike(t)){for(var n=e,i=0;i<t.length;i++){var r=t[i];if(!goog.isObject(n)||!n.hasOwnProperty(r))return;n=n[r]}return n}}function filter(e,t){for(var n=[],i=0,r=e.length;i<r;i++){var a=e[i];t(a)&&n.push(a)}return n}function format(e,t){var n=arguments,i=1;return e.replace(/%s/g,function(){return n[i++]})}function generateRandomHexString(){return Math.random().toString(16).replace("0.","")}function inArray(t,e){return each(e,function(e){if(e===t)return!0})||!1}function isArrayLike(e){return!!e&&"object"==typeof e&&"number"==typeof e.length}function isDefined(e){return void 0!==e}function isNonNullObject(e){return"object"==typeof e&&null!==e}function isNumberLike(e){return("number"==typeof e||"string"==typeof e)&&Number(e)==e}function isString(e){return"string"==typeof e}var keys=function(e){return(keys=Object.keys||function(e){var t=[];return each(e,function(e){t.push(e)}),t}).call(null,e)},loadScript=function(scriptUrl,attemptSynchronousLoad){var loadScriptAsynchronously=function(){var e=document.head||document.getElementsByTagName("head")[0]||document.documentElement,t=document.createElement("script");t.src=scriptUrl,t.type="text/javascript",e.appendChild(t)};if(attemptSynchronousLoad)try{if(!safeToAttemptDocumentWrite())throw new Error(goog.DEBUG&&"Not safe to attempt document.write");var id="optimizely_synchronous_script_"+Math.floor(1e5*Math.random());if(-1!==scriptUrl.indexOf('"'))return void timer.addEvent("loadScript","Blocked attempt to load unsafe script: "+scriptUrl);if(document.write('<script id="'+id+'" src="'+scriptUrl+'"><\/script>'),1!==$("#"+id).length)throw new Error(goog.DEBUG&&"Document.write failed to append script")}catch(e){try{var request=new XMLHttpRequest;request.open("GET",scriptUrl,!1),request.onload=function(){eval(request.responseText)},request.onerror=function(){throw new Error},request.send()}catch(e){log("Common","Failed to load %s synchronously",scriptUrl),loadScriptAsynchronously()}}else loadScriptAsynchronously()},log=function(e,t,n){var i=window.console;if(directive.shouldLog&&i&&i.log){var r=slice(arguments,1);r[0]="Optimizely / "+e+" / "+t,Function.prototype.apply.call(i.log,i,r)}};function prependArray(e,t){e.unshift.apply(e,t)}function quote(e){return e.replace(/([\f\n\r\t\\'"])/g,"\\$1")}function safeDecodeUriComponent(t){try{return decodeURIComponent(t)}catch(e){return t}}function slice(e,t,n){return Array.prototype.slice.call(e,t||0,n||e.length)}function trim(e){return e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function safeToAttemptDocumentWrite(){return"loading"===document.readyState}function beginsWith(e,t){return 0===e.indexOf(t)}optly.client.storage.StorageMetrics,optly.client.storage.Storage=function(e){this.storage=e,this.metrics_={totalGets:0,totalGetLength:0,totalGetTime:0,totalSets:0,totalSetLength:0,totalSetTime:0,numKeys:0,totalSize:0}},optly.client.storage.Storage.prototype.getKeyPath=function(e){return[optly.client.storage.LOCAL_STORAGE_KEY,e].join("$$")},optly.client.storage.Storage.prototype.get=function(e){try{var t=+new Date,n=this.storage.getItem(this.getKeyPath(e)),i=json.parse(n);return this.metrics_.totalGetTime+=+new Date-t,this.metrics_.totalGets++,this.metrics_.totalGetLength+=(n||"").length,i}catch(e){return null}},optly.client.storage.Storage.prototype.set=function(e,t){try{var n=+new Date,i=json.stringify(t);isDefined(t)?this.storage.setItem(this.getKeyPath(e),i):this.storage.removeItem(this.getKeyPath(e)),this.metrics_.totalSetTime+=+new Date-n,this.metrics_.totalSets++,this.metrics_.totalSetLength+=i.length}catch(e){}},optly.client.storage.Storage.prototype.metrics=function(){var e=0,t=0;for(var n in this.storage)if(beginsWith(n,optly.client.storage.LOCAL_STORAGE_KEY)){t++;var i=this.storage.getItem(n);e+=n.length+(i?i.length:0)}return this.metrics_.numKeys=t,this.metrics_.totalSize=e,this.metrics_},optly.client.storage.Storage.prototype.migrateIfNecessary=function(){var t=this.storage.getItem(optly.client.storage.LOCAL_STORAGE_KEY),e={};try{e=json.parse(t)||{}}catch(e){}if(0!==keys(e).length){var n=id.getPPID()||id.getId(),i=e[n]||{};for(var r in i)if(i.hasOwnProperty(r)){var a=[n,r].join("$$");null===this.get(a)&&this.set(a,i[r])}for(r in delete e[n],e)e.hasOwnProperty(r)&&(null===this.get(r)&&this.set(r,e[r]),delete e[r]);try{t=json.stringify(e)}catch(e){t={}}this.storage.setItem(optly.client.storage.LOCAL_STORAGE_KEY,t)}},optly.client.storage.initialize=function(){try{optly.client.storage.localStorage=new optly.client.storage.Storage(window.localStorage),optly.client.storage.sessionStorage=new optly.client.storage.Storage(window.sessionStorage),optly.client.storage.localStorage.migrateIfNecessary()}catch(e){}},optly.client.storage.MockStorageInterface={get:function(e){},set:function(e,t){},metrics:function(){return{}}},optly.client.storage.LOCAL_STORAGE_KEY="optimizely_data",optly.client.storage.localStorage=optly.client.storage.MockStorageInterface,optly.client.storage.sessionStorage=optly.client.storage.MockStorageInterface,optly.client.storage.initialize(),optly.murmur3.hash32=function(e,t){function n(e,t){var n=65535&t;return((t-n)*e|0)+(n*e|0)|0}t=t||0;for(var i,r=3432918353,a=461845907,o=e.length,s=t,l=-4&o,c=0;c<l;c+=4)s=5*(s=(524287&(s^=i=n(i=(131071&(i=n(i=255&e.charCodeAt(c)|(255&e.charCodeAt(c+1))<<8|(255&e.charCodeAt(c+2))<<16|(255&e.charCodeAt(c+3))<<24,r)))<<15|i>>>17,a)))<<13|s>>>19)+3864292196|0;switch(i=0,o%4){case 3:i=(255&e.charCodeAt(l+2))<<16;case 2:i|=(255&e.charCodeAt(l+1))<<8;case 1:s^=i=n(i=(131071&(i=n(i|=255&e.charCodeAt(l),r)))<<15|i>>>17,a)}return s^=o,s=n(s^=s>>>16,2246822507),s=n(s^=s>>>13,3266489909),s^=s>>>16},optly.hashing.HashSeed={IGNORING:0,BUCKETING:1,FALLBACK:2},optly.hashing.MAX_HASH_VALUE=Math.pow(2,32),optly.hashing.hashToReal=function(e,t){return(optly.murmur3.hash32(e,t)>>>0)/optly.hashing.MAX_HASH_VALUE},optly.hashing.hashToHex=function(e,t){var n=optly.murmur3.hash32(e,t);return(n>>>16).toString(16)+(65535&n).toString(16)},optly.hashing.toByteString=function(e){var n=String.fromCharCode;return e.replace(/[\S\s]/gi,function(e){e=e.charCodeAt(0);var t=n(255&e);return 255<e&&(t=n(e>>>8&255)+t),65535<e&&(t=n(e>>>16)+t),t})},optly.hashing.experimentUserHash=function(e,t,n){return optly.hashing.hashToReal(e+t,n)},optly.hashing.hashToInt=function(e,t,n,i){return Math.floor(optly.hashing.experimentUserHash(e,t,n)*i)},user.LEGACY_BROWSER=!0,user.getBrowser=function(){return user.detectionResults=user.detectionResults||detect.detect(),user.detectionResults},user.getBrowserId=function(){return user.getBrowser().browserId},user.getBrowserLanguage=function(){var t="";try{t=(t=navigator.userLanguage||window.navigator.language).toLowerCase()}catch(e){t=""}return t},user.getBrowserVersion=function(){return user.getBrowser().browserVersion},user.getCurrentUrl=function(){return user.currentUrl||window.location.href},user.getDevice=function(){return user.getBrowser().device},user.getDeviceId=function(){return user.getDevice().id},user.getDomain=function(e){if(!e)return"";try{return e.match(/:\/\/(?:www[0-9]?\.)?(.[^/:]+)/)[1]}catch(e){return""}},user.getPlatform=function(){return user.getBrowser().platform},user.getReferrer=function(){return cookie.get(REFERRER_REDIRECT_COOKIE_NAME)||document.referrer||""},user.getKeyPath=function(e){return[id.getPPID()||id.getOrGenerateId(),e].join("$$")},user.getUserData=function(e){return optly.client.storage.localStorage.get(user.getKeyPath(e))},user.setUserData=function(e,t){optly.client.storage.localStorage.set(user.getKeyPath(e),t)},user.getMobileId=user.LEGACY_BROWSER?function(){var e=["android","blackberry","ipad","iphone","ipod","windows phone"];return arrayContains(e,user.getDeviceId())?user.getDeviceId():arrayContains(e,user.getPlatform().id)?user.getPlatform().id:user.isMobile()?"mobile":"unknown"}:goog.nullFunction,user.isMobile=function(){return user.getDevice().isMobile},user.getNewVsReturning=function(){return user.isReturningUser?"returning":"new"},user.isFirstSession=function(){return!user.isReturningUser||!!optly.client.storage.sessionStorage.get(user.FIRST_SESSION_KEY)},user.getPlatform=function(){return user.getBrowser().platform},user.isBot=function(e){var t=["googlebot","yahoo! slurp","bingbot","bingpreview","msnbot","keynote","ktxn","khte","gomezagent","alertsite","yottaamonitor","pingdom.com_bot","aihitbot","baiduspider","adsbot-google","mediapartners-google","applebot"],n=e||navigator.userAgent;n=n.toLowerCase();for(var i=0;i<t.length;i++){var r=t[i];if(-1!==n.indexOf(r))return!0}return!1},user.initialize=function(){if(directive.isEnabled){var e=id.getId();user.isReturningUser=null!=e,user.isBot()?directive.shouldTrackEvents=!1:user.isReturningUser||optly.client.storage.sessionStorage.set(user.FIRST_SESSION_KEY,!0)}},user.setCurrentUrl=function(e){log("User","Setting current URL to %s",e),user.currentUrl=e},user.FIRST_SESSION_KEY="first_session",user.currentUrl=void 0,user.detectionResults=void 0,user.isReturningUser=void 0,timer.addEvent=function(e,t,n){timer.eventQueue.push({date:new Date,category:e,message:t,isVerbose:n||!1}),timer.shouldOutputImmediately&&timer.flushLogs()},timer.enableLogging=function(){directive.shouldLog=!0},timer.enableVerboseLogging=function(){directive.shouldLog=!0,directive.shouldLogVerbosely=!0},timer.flushLogs=function(){directive.shouldLog&&(each(timer.eventQueue,function(e){if(!(e.logged||e.isVerbose&&e.isVerbose!==directive.shouldLogVerbosely)){var t=+e.date,n=timer.lastTime?t-timer.lastTime:0,i=" [time "+(timer.startTime?t-timer.startTime:0)+" +"+n+"]";log(e.category,e.message+i),timer.lastTime=t,timer.startTime||(timer.startTime=t),e.logged=!0}}),timer.shouldOutputImmediately=!0)},timer.lastTime=null,timer.startTime=null,timer.eventQueue=[],timer.shouldOutputImmediately=!1,asyncInfo.AsyncInfo,asyncInfo.STORAGE_KEY="asyncInfo",asyncInfo.Source={AKAMAI:"cdn3",ODDS:"odds",DCPS:"dcps"},asyncInfo.asyncInfos={},asyncInfo.get=function(e){return asyncInfo.asyncInfos[e]||null},asyncInfo.set=function(e,t){asyncInfo.asyncInfos[e]=t},asyncInfo.maybeMigrateAndCleanupStore=function(){var e=optly.client.storage.localStorage.get(asyncInfo.STORAGE_KEY);e&&(user.getUserData(asyncInfo.STORAGE_KEY)||user.setUserData(asyncInfo.STORAGE_KEY,e),optly.client.storage.localStorage.set(asyncInfo.STORAGE_KEY,null))},asyncInfo.loadFromStore=function(){asyncInfo.maybeMigrateAndCleanupStore();var e=user.getUserData(asyncInfo.STORAGE_KEY);e&&each(e,asyncInfo.set)},asyncInfo.writeAroundToStore=function(e,t){var n=user.getUserData(asyncInfo.STORAGE_KEY)||{};n[e]=t,user.setUserData(asyncInfo.STORAGE_KEY,n)},asyncInfo.getIP=function(){var e=asyncInfo.get(asyncInfo.Source.ODDS)&&asyncInfo.get(asyncInfo.Source.ODDS).ip||asyncInfo.get(asyncInfo.Source.AKAMAI)&&asyncInfo.get(asyncInfo.Source.AKAMAI).ip;return e?asyncInfo.formatGeoField(e):null},asyncInfo.getLists=function(){return asyncInfo.get(asyncInfo.Source.ODDS)?asyncInfo.get(asyncInfo.Source.ODDS).lists||{}:null},asyncInfo.getListsMetadata=function(){return asyncInfo.get(asyncInfo.Source.ODDS)?asyncInfo.get(asyncInfo.Source.ODDS).lists_metadata||{}:null},asyncInfo.getValueForListTargetedKeyWhenCachePopulated=function(e){if(!asyncInfo.getLists())return timer.addEvent("Async Info","Invalid response from ODDS"),{value:void 0,isKnown:!1};if(!asyncInfo.getLists().hasOwnProperty(e))return timer.addEvent("Async Info","Deduced cachetime value that was checked for presence in list: "+e),{value:void 0,isKnown:!0};var t=asyncInfo.getListsMetadata();return t&&t[e]&&t[e][0]?(timer.addEvent("Async Info","Found cachetime value that was checked for presence in list: "+e),{value:t[e][0].value,isKnown:!0}):(timer.addEvent("Async Info","Can't find cachetime value that was checked for presence in list: "+e),{value:void 0,isKnown:!1})},asyncInfo.getListMembershipStatus=function(e){var t=data.getListTargetedKey(e),n=isDefined(t)&&asyncRequest.isListTargetedKeyWithVariableValue(t);if(n){var i=asyncRequest.getCurrentValueForListTargetedKey(t);if(null===i)return timer.addEvent("Async Info","Deduced membership status (false) for list: "+e),!1;timer.addEvent("Async Info","Found current value to check for presence in list: "+e)}var r=asyncInfo.getLists();if(!r)return timer.addEvent("Async Info","No list membership info."),null;if(n){var a=asyncInfo.getValueForListTargetedKeyWhenCachePopulated(e);if(a.isKnown&&a.value!==i)return timer.addEvent("Async Info","Ignoring out-of-date membership status for list: "+e),null}var o=!!r[e];return timer.addEvent("Async Info","Found membership status ("+o+") for list: "+e),o},asyncInfo.getListMembershipStatuses=function(){var t={};return each(data.getListTargetedKeys(),function(e){t[e]=asyncInfo.getListMembershipStatus(e)}),t},asyncInfo.getLocation=function(){if(!asyncInfo.get(asyncInfo.Source.AKAMAI))return null;var e=asyncInfo.get(asyncInfo.Source.AKAMAI).location||{};return{continent:asyncInfo.formatGeoField(e.continent),country:asyncInfo.formatGeoField(e.country),region:asyncInfo.formatGeoField(e.region),city:asyncInfo.formatGeoField(e.city)}},asyncInfo.cache,asyncInfo.dcpCache={get:function(){return asyncInfo.get(asyncInfo.Source.DCPS)},set:function(e){asyncInfo.writeAroundToStore(asyncInfo.Source.DCPS,e),asyncInfo.set(asyncInfo.Source.DCPS,e)}},asyncInfo.getDynamicCustomerProfileConditions=function(){var e=asyncInfo.dcpCache.get();return e?null===e.rulesResults?null:e.rulesResults||{}:null},asyncInfo.formatGeoField=function(e){return"string"!=typeof e?null:"N/A"===e.toUpperCase()?null:e.toUpperCase()};var ENABLED_UNIVERSAL_ANALYTICS=!0,ENABLED_AT_INTERNET=!0,ENABLED_COMSCORE=!0,ENABLED_MOAT=!0,ENABLED_INSPECTLET=!0,UA_EXPERIMENT_MAX_CHARACTERS=80,UA_DIMENSION_MAX_CHARACTERS=150,INTERNAL_LIST_NAME_PREFIX="_",INTERNAL_LIST_NAME_PART_DELIMITER="__";integrator.activateSiteCatalyst=function(e){if(e=e||{},directive.shouldTrackEvents){e&&e.sVariable&&integrator.setSiteCatalystSVar(e.sVariable);var r=integrator.getSiteCatalystSVar();r?integrator.hasIntegratedThirdParties?(integrator.fixSiteCatalystReferrer(r),log("Integrator","Tracking with SiteCatalyst"),each(integrator.getRelevantVariationIds(),function(e){var t=data.getVariationExperimentId(e),n=integrator.makeSendableNames(t,e,100,100,25,!0),i=n.key+": "+n.value;each(integrator.getSiteCatalystKeys(t),function(e){log("Integrator","Setting SiteCatalyst %s='%s'",e,i),r[e]=i})})):integrator.alsoActivateSiteCatalyst=!0:timer.addEvent("Integrator","Error with SiteCatalyst integration: 's' variable not defined")}},integrator.googleAnalyticsCustomVariableScope=function(e){if(e=isNumberLike(e)?Number(e):-1,-1===[1,2,3].indexOf(e))return integrator._googleAnalyticsCustomVariableScope;integrator._googleAnalyticsCustomVariableScope=e},integrator.loadThirdPartySegments=function(e){timer.addEvent("Integrator","Loading third-party segments."),window.bk_results&&integrator.loadBlueKaiSegments(window.bk_results,e)},integrator.makeThirdPartyRequests=function(){if(directive.shouldTrackEvents){integrator.fixGoogleAnalyticsReferrer();var n=[];each(integrator.getRelevantVariationIds(),function(e){var t=data.getVariationExperimentId(e);data.isChartbeatEnabled(t)&&integrator.makeChartbeatRequest(t,e),data.isComscoreEnabled(t)&&integrator.makeComscoreRequest(t,e),data.isCrazyEggEnabled(t)&&integrator.makeCrazyEggRequest(t,e),data.isGoogleAnalyticsEnabled(t)&&integrator.makeGoogleAnalyticsRequest(t,e),data.isInspectletEnabled(t)&&integrator.makeInspectletRequest(t,e),data.isKissMetricsEnabled()&&integrator.makeKissMetricsRequest(t,e),data.isMixpanelEnabled(t)&&integrator.makeMixpanelRequest(t,e),data.isMoatEnabled(t)&&integrator.makeMoatRequest(t,e),data.isSessioncamEnabled(t)&&(n=n.concat(integrator.createSessioncamData(t,e))),data.isATInternetEnabled(t)&&integrator.queueATInternetRequest(t,e)}),0<n.length&&integrator.makeSessioncamRequest(n),0<keys(integrator.ATInternetExperimentValues).length&&("function"==typeof window.xt_mvt?integrator.ATInternetOnloadHandler():$(window).bind("load.ATInternet",integrator.ATInternetOnloadHandler)),integrator.makeChartbeatReferralRequest(),integrator.hasIntegratedThirdParties=!0,integrator.alsoActivateUniversalAnalytics&&(integrator.activateUniversalAnalytics(),integrator.alsoActivateUniversalAnalytics=!1),integrator.alsoActivateSiteCatalyst&&(integrator.activateSiteCatalyst(),integrator.alsoActivateSiteCatalyst=!1)}},integrator.playbackClickTale=function(){if(window.ClickTaleContext){try{window.ClickTaleContext.getAggregationContextAsync("1",function(e){for(var t in e.Location&&window.optimizely.push(["overrideUrl",e.Location]),e.PageEvents){var n=e.PageEvents[t][2].match(/x[0-9]+=[0-9_]+/g);log("Integrator","Playback ClickTale Integration - %s",n);for(t=0;t<n.length;t++){log("Integrator","Playback ClickTale Integration - %s",n[t]);for(var i=n[t].split("=")[0].substr(1),r=n[t].split("=")[1].split("_"),a=0;a<r.length;a++)integrator.getRedirectURL(r[a])?log("Integrator","Skip activation for redirect."):window.optimizely.push(["activate",i,r[a],{force:!0}])}}})}catch(e){log("Integrator","Playback ClickTale Aggregation Integration failed.")}try{window.ClickTaleContext.getRecordingContextAsync("1.1",function(e){if(e.inSingleRecordingScope)for(var t in e.location&&window.optimizely.push(["overrideUrl",e.location]),log("Integrator","Playback ClickTale getRecordingContextAsync callback"),e.fields)log("Integrator","Playback ClickTale Integration - %s=%s",t,e.fields[t]),integrator.getRedirectURL(e.fields[t])?log("Integrator","Skip activation for redirect."):window.optimizely.push(["activate",t,e.fields[t],{force:!0}])})}catch(e){log("Integrator","Playback ClickTale Recording Integration failed.")}}else log("Integrator","ClickTaleContext not defined.")},integrator.recordClickTale=function(e){log("Integrator","Tracking with ClickTale."),"function"==typeof window.ClickTaleField?each(integrator.getRelevantVariationIds(),function(e){var t=data.getVariationExperimentId(e),n=integrator.makeSendableNames(t,e,100,100,15,!1),i=n.key+": "+n.value+" (x"+t+"="+e+")";log("Integrator","Setting ClickTale - %s",i),window.ClickTaleField(t,e),window.ClickTaleEvent(i)}):log("Integrator","ClickTaleField() not defined.")},integrator.setPrefix=function(e){integrator.prefix=e},integrator.setSiteCatalystSVar=function(e){integrator.siteCatalystObject=e},integrator.cleanSegmentString=function(e,t){return e.replace(/[^a-zA-Z0-9\.\~\!\*\(\)\']+/g,"_").substring(0,t)},integrator.fixGoogleAnalyticsReferrer=function(){var e=redirect.getRedirectReferrer();if(null!==e)try{log("Integrator","Fixing _gaq._setReferrerOverride with %s",e),_gaq.push(["_setReferrerOverride",e])}catch(e){log("Integrator","Error setting Google Analytics referrer: %s",e)}},integrator.fixUniversalAnalyticsReferrer=ENABLED_UNIVERSAL_ANALYTICS?function(){var e=redirect.getRedirectReferrer();if(null!==e)try{log("Integrator","Fixing Universal Analytics set referrer with %s",e);var t=window.GoogleAnalyticsObject||"ga";(0,window[t])("set","referrer",e)}catch(e){log("Integrator","Error setting Universal Analytics referrer: %s",e)}}:goog.nullFunction,integrator.fixSiteCatalystReferrer=function(e){var t=redirect.getRedirectReferrer();if(null!==t&&e)try{log("Integrator","Fixing SiteCatalyst referrer to %s",t),e.referrer=String(t)}catch(e){log("Integrator","Error setting SiteCatalyst referrer: %s",e)}},integrator.getRelevantVariationIds=function(){var r=evaluator.getActiveExperimentIds(),a=[];each(plan.getVariationIds(),function(e){var t=data.getVariationExperimentId(e),n=!1;if(data.isExperimentEnabled(t)){var i=data.getVariationName(e);arrayContains(r,t)&&(log("Integrator",'"%s" relevant because experiment active',i),n=!0),n&&a.push(e)}});var e=redirect.getRedirectVariationId();return e&&a.push(e),a},integrator.getSiteCatalystKeys=function(e){var t=[],n=data.getSiteCatalystEVar(e),i=data.getSiteCatalystProp(e);return null!==n&&t.push("eVar"+n),null!==i&&t.push("prop"+i),t},integrator.getSiteCatalystSVar=function(){return integrator.siteCatalystObject||(void 0!==window.s?window.s:null)},integrator.getRedirectURL=function(e){var t=data.getVariationCode(e);if(t){var n=redirect.getRedirectURL(t.toString());if(n)return n[1]}return null},integrator.loadBlueKaiSegments=function(e,n){timer.addEvent("Integrator","Loading BlueKai segments.");try{each(e.campaigns,function(e){var t=e.seg_id;data.getSegment(t)?segmenter.addToSegment(t,!0):data.getAudience(t)&&n.addToAudience(t)})}catch(e){timer.addEvent("Integrator","Error loading BlueKai segments.")}},integrator.makeChartbeatReferralRequest=function(){var t=cookie.get(REFERRAL_CHARTBEAT_COOKIE_NAME)||"";try{t&&integrator.currentChartbeatExperiment!=t&&(log("Integrator","Calling _cbq.push for referral"),_cbq.push(["_optlyr",t])),integrator.currentChartbeatExperiment!=t&&(log("Integrator","Set new Chartbeat referral cookie."),cookie.set(REFERRAL_CHARTBEAT_COOKIE_NAME,integrator.currentChartbeatExperiment))}catch(e){timer.addEvent("Integrator","Error sending Chartbeat referral for "+t)}},integrator.makeChartbeatRequest=function(t,e){var n=integrator.prefix;integrator.setPrefix("");var i=integrator.makeSendableNames(t,e,10,10,5,!1);integrator.setPrefix(n);var r=data.getVariationIndex(e);integrator.currentChartbeatExperiment=i.key+": "+String(r);try{log("Integrator","Calling _cbq.push"),_cbq.push(["_optlyx",integrator.currentChartbeatExperiment])}catch(e){timer.addEvent("Integrator","Error sending Chartbeat data for "+data.getExperimentString(t))}},integrator.makeComscoreRequest=ENABLED_COMSCORE?function(t,e){var n=data.getComscoreProperty(t,"url"),i=integrator.makeSendableNames(t,e,100,100,25,!0),r=n+(containsString(n,"?")?"&":"?")+"optimizely_experiment_id="+t+"&optimizely_experiment_name="+encodeURIComponent(i.key)+"&optimizely_variation_id="+e+"&optimizely_variation_name="+encodeURIComponent(i.value)+"&ns_m_exp=("+t+") "+encodeURIComponent(i.key)+"&ns_m_chs=("+e+") "+encodeURIComponent(i.value)+"&type=hidden";try{$(window).load(function(){timer.addEvent("Integrator","Sending comScore log call"),tracker.makeRequest(r,null)})}catch(e){timer.addEvent("Integrator","Error sending comScore data for "+data.getExperimentString(t))}}:goog.nullFunction,integrator.makeCrazyEggRequest=function(t,e){var n=integrator.makeSendableNames(t,e,100,100,15,!1);try{log("Integrator","Defining CE_SNAPSHOT_NAME"),window.CE_SNAPSHOT_NAME=n.key+": "+n.value}catch(e){timer.addEvent("Integrator","Error sending CrazyEgg data for "+data.getExperimentString(t))}},integrator.makeGoogleAnalyticsRequest=function(t,e){var n=data.getGoogleAnalyticsSlot(t),i=data.getGoogleAnalyticsTracker(t),r=integrator.makeSendableNames(t,e,28,24,5,!0);try{var a="";""!==i&&(a=i+"."),log("Integrator","Calling _gaq._setCustomVar for slot %d and scope %d",n,integrator._googleAnalyticsCustomVariableScope),_gaq.push([a+"_setCustomVar",n,r.key,r.value,integrator._googleAnalyticsCustomVariableScope])}catch(e){timer.addEvent("Integrator","Error sending Google Analytics data for "+data.getExperimentString(t))}},integrator.activateUniversalAnalytics=ENABLED_UNIVERSAL_ANALYTICS?function(){if(directive.shouldTrackEvents)if(integrator.hasIntegratedThirdParties){var e=window.GoogleAnalyticsObject||"ga",s=window[e];s?(integrator.fixUniversalAnalyticsReferrer(),log("Integrator","Tracking with Universal Analytics"),each(integrator.getRelevantVariationIds(),function(e){var t=data.getVariationExperimentId(e);if(data.isUniversalAnalyticsEnabled(t)){var n=data.getUniversalAnalyticsProperty(t,"slot"),i=data.getUniversalAnalyticsProperty(t,"tracker"),r=integrator.makeSendableNames(t,e,100,100,25,!0),a=r.key+" ("+t+"): "+r.value;if(a.length>UA_DIMENSION_MAX_CHARACTERS)a=(a=r.key.substring(0,UA_EXPERIMENT_MAX_CHARACTERS)+" ("+t+"): "+r.value).substring(0,UA_DIMENSION_MAX_CHARACTERS-1);var o=i?i+".":"";log("Integrator","Calling ua set dimension - ga(%sset, dimension%d, %s)",o,n,a),s(o+"set","dimension"+n,a)}})):timer.addEvent("Integrator","Error with Universal Analytics integration: 'GoogleAnalyticsObject' not defined")}else integrator.alsoActivateUniversalAnalytics=!0}:goog.nullFunction,integrator.makeInspectletRequest=ENABLED_INSPECTLET?function(t,e){var n=integrator.prefix;integrator.setPrefix("");var i=integrator.makeSendableNames(t,e,100,100,25,!1);integrator.setPrefix(n);try{timer.addEvent("Integrator","Calling __insp.push for sending data to Inspectlet"),window.__insp=window.__insp||[],window.__insp.push(["tagSession",{"Optimizely Experiment Name":i.key,"Optimizely Variation Name":i.value,"Optimizely Experiment ID":t,"Optimizely Variation ID":e}])}catch(e){timer.addEvent("Integrator","Error sending Inspectlet data for "+data.getExperimentString(t))}}:goog.nullFunction,integrator.makeKissMetricsRequest=function(t,e){var n=integrator.makeSendableNames(t,e,100,100,15,!0),i={};i[n.key]=n.value;try{log("Integrator","Calling _kmq.set"),_kmq.push(["set",i])}catch(e){timer.addEvent("Integrator","Error sending KISSmetrics data for "+data.getExperimentString(t))}},integrator.makeMixpanelRequest=function(t,e){var n=integrator.makeSendableNames(t,e,100,100,15,!1),i={};i[n.key]=n.value;try{log("Integrator","Calling mixpanel.push"),mixpanel.push(["register",i])}catch(e){timer.addEvent("Integrator","Error sending Mixpanel data for "+data.getExperimentString(t))}},integrator.makeMoatRequest=ENABLED_MOAT?function(t,e){var n=integrator.makeSendableNames(t,e,100,100,15,!1),i=n.key+": "+n.value;try{log("Integrator","Calling optimizelyMoat.push"),optimizelyMoat.push(i)}catch(e){timer.addEvent("Integrator","Error sending Moat data for "+data.getExperimentString(t))}}:goog.nullFunction,integrator.makeSessioncamRequest=function(t){try{timer.addEvent("Integrator","Calling sessioncamConfiguration object"),window.sessioncamConfiguration=window.sessioncamConfiguration||{},window.sessioncamConfiguration.customDataObjects=window.sessioncamConfiguration.customDataObjects||[],window.sessioncamConfiguration.customDataObjects=window.sessioncamConfiguration.customDataObjects.concat(t)}catch(e){timer.addEvent("Integrator","Error sending sessioncam data "+t)}},integrator.createSessioncamData=function(e,t){return timer.addEvent("Integrator","Preparing to send data to Sessioncam"),[integrator.makeSendableNames(e,t,100,100,15,!1),{key:"Optimizely Exp "+e,value:"Optimizely Var "+t}]},integrator.queueATInternetRequest=ENABLED_AT_INTERNET?function(e,t){var n=integrator.makeSendableNames(e,t,28,24,5,!0),i=e+"["+encodeURIComponent(n.key)+"]-0-"+t+"["+encodeURIComponent(n.value)+"]";i in integrator.ATInternetExperimentValues||(log("Integrator","Queueing AT Internet log call: %s",i),integrator.ATInternetExperimentValues[i]=!1)}:goog.nullFunction,integrator.ATInternetOnloadHandler=ENABLED_AT_INTERNET?function(){try{$(window).unbind("load.ATInternet"),window.xt_mvt&&each(integrator.ATInternetExperimentValues,function(e,t){t||(log("Integrator","Sending AT Internet log call: %s",e),window.xt_mvt("","",e),integrator.ATInternetExperimentValues[e]=!0)})}catch(e){timer.addEvent("Integrator","Error sending AT Internet data: "+e.toString())}}:goog.nullFunction,integrator.makeSendableNames=function(e,t,n,i,r,a){var o,s=integrator.prefix+data.getExperimentName(e),l=data.getVariationNamesArray(t);return o=1<l.length?(l=$.map(l,function(e){return e.substr(0,r-1)})).join("~"):l[0],a?(s=integrator.cleanSegmentString(s,n),o=integrator.cleanSegmentString(o.replace("#",""),i)):(s=s.substring(0,n),o=o.substring(0,i)),{key:s,value:o}},integrator.getAllThirdPartyData=function(){return optly.client.storage.localStorage.get(integrator.THIRD_PARTY_KEY)||{}},integrator.unionThirdPartyConditionValue=function(e,t){isArrayLike(e)||(e=[e]),isArrayLike(t)||(t=[t]);var n,i=[].concat(e);for(n=0;n<t.length;n++)inArray(t[n],i)||i.push(t[n]);return i},integrator.mergeThirdPartyData=function(e,t){var n,i={};if(e)for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);if(t)for(n in t)t.hasOwnProperty(n)&&(i[n]?i[n]=integrator.unionThirdPartyConditionValue(i[n],t[n]):i[n]=t[n]);return i},integrator.storeThirdPartyData=function(e,t,n){try{var i=integrator.getAllThirdPartyData(),r=i[e];i[e]=n&&r?integrator.mergeThirdPartyData(r,t):t,optly.client.storage.localStorage.set(integrator.THIRD_PARTY_KEY,i)}catch(e){}},integrator.getAllThirdPartyDataForProvider=function(e){return integrator.getAllThirdPartyData()[e]},integrator.getThirdPartyData=function(e,t){for(var n=integrator.getAllThirdPartyDataForProvider(e),i=0,r=t.length;i<r;i++){if(!goog.isObject(n)||!n.hasOwnProperty(t[i]))return;n=n[t[i]]}return n},integrator.storeThirdPartyListData=function(e){var t,n,i,r,a,o=e&&e.lists||{},s={};for(var l in o)o.hasOwnProperty(l)&&beginsWith(l,INTERNAL_LIST_NAME_PREFIX)&&o[l]&&(n=(t=l.substring(INTERNAL_LIST_NAME_PREFIX.length).split(INTERNAL_LIST_NAME_PART_DELIMITER)).shift(),i=t.shift(),r=t.join(INTERNAL_LIST_NAME_PART_DELIMITER),n&&i&&r&&((a=s)[n]||(a[n]={}),(a=a[n])[i]||(a[i]=[]),(a=a[i]).push(r)));for(n in s)integrator.storeThirdPartyData(n,s[n],!1)},integrator.alsoActivateUniversalAnalytics=!1,integrator.alsoActivateSiteCatalyst=!1,integrator.ATInternetExperimentValues={},integrator.currentChartbeatExperiment="",integrator._googleAnalyticsCustomVariableScope=2,integrator.hasIntegratedThirdParties=!1,integrator.prefix="Optimizely ",integrator.siteCatalystObject=null,integrator.THIRD_PARTY_KEY="thirdParty",activator.Options,activator.activate=function(e,t,n,i){if(!directive.isEnabled)return!1;var r="number"==typeof n||"string"==typeof n?String(n):null,a=!!(!0===n||n&&!0===n.force||i&&!0===i.force),o=!0===(i=("object"==typeof n?n:i)||{}).skip,s=!0===i.skipPageview,l=i.enabledStatus;if(r)try{api.bucketUser(t,r,!0)}catch(e){timer.addEvent("Activator","Error while activating experiment "+t+" for variation "+r+" -- proceeding without bucketing user.")}var c=[];isNumberLike(t)?c.push(t):each(data.getExperimentIds(),function(e){data.isExperimentManuallyActivated(e)&&c.push(e)}),activator.tryToEvaluateExperiments(e,c,{forcedActivation:a,manualActivation:!0,enabledStatus:l,skipBucketing:o,skipPageviewTracking:s}),optly.client.preview.ENABLED&&directive.shouldLoadPreview&&(timer.addEvent("Activator"," Activate - Updating preview data object asynchronously."),window.optimizelyPreview=window.optimizelyPreview||{},each(c,function(e){window.optimizelyPreview.updatePreviewData(e)}))},activator.activateGeoDelayedExperiments=function(e,t,n){if(!directive.isEnabled)return!1;if("object"==typeof t&&"string"==typeof n);else if("object"!=typeof t||isDefined(n)){if(isDefined(t)||isDefined(n))return void timer.addEvent("Activator","Unrecognized arguments to activateGeoDelayedExperiment: "+arguments)}else n=t.hasOwnProperty("lists")?asyncInfo.Source.ODDS:asyncInfo.Source.AKAMAI;if("object"!=typeof t||"string"!=typeof n)return timer.addEvent("Activator","Timeout: will not act on future async info."),optly.client.rum.instance.recordEvent("geoTimeout"),void(activator.hasTimedOut=!0);if(timer.addEvent("Activator","Saving async info from '"+n+"'"),n===asyncInfo.Source.AKAMAI&&optly.client.rum.instance.recordEvent("geoArrive"),asyncInfo.writeAroundToStore(n,t),asyncInfo.set(n,t),integrator.storeThirdPartyListData(t),activator.hasTimedOut)return timer.addEvent("Activator","Post-timeout; too late to act on new async info."),void(geolocation.cdn3Requested&&optly.client.rum.instance.recordEvent("geoFailed"));var i=activator.delayedSegments.slice();timer.addEvent("Activator","Trying to activate "+i.length+" delayed segments");activator.tryToEvaluateSegments(i);var r=activator.delayedExperiments.slice();timer.addEvent("Activator","Trying to activate "+r.length+" experiments");activator.tryToEvaluateExperiments(e,r,{skipPageviewTracking:directive.shouldSkipPageTracking});api.setPublicObjects(),"object"==typeof t&&"string"==typeof n&&n===asyncInfo.Source.AKAMAI&&optly.client.rum.instance.recordEvent("geoSuccess")},activator.tryToEvaluateExperiments=function(e,t,n){var i=activator.triageExperiments(e,t,n);each(i.pending,activator.addDelayedExperiment),activator.removeDelayedExperiments(i.passing),activator.removeDelayedExperiments(i.failing);var r=[];return each(i.passing,function(e){distributor.distributeExperiment(e,n.skipBucketing)&&r.push(e)}),evaluator.evaluate(r,t),plan.writeCookie(),integrator.makeThirdPartyRequests(),directive.isEnabled&&!n.skipPageviewTracking&&tracker.addActivationEvent(document.location.href),i},activator.triageExperiments=function(t,e,n){timer.addEvent("Activator","Triaging "+e.length+" experiments.");var i=[],r=[],a=[];return each(e,function(e){n.forcedActivation?(timer.addEvent("Activator","Force-ignoring conditions for experiment "+e),i.push(e)):condition.isReadyToTest(e)?condition.test(e,{manualActivation:n.manualActivation,objectType:"experiment",enabledStatus:n.enabledStatus,visitor:t})?(timer.addEvent("Activator","Passed conditions for experiment "+e),i.push(e)):(timer.addEvent("Activator","Failed conditions for experiment "+e),a.push(e)):(timer.addEvent("Activator","Can't test conditions for experiment "+e),r.push(e))}),{passing:i,pending:r,failing:a}},activator.tryToEvaluateSegments=function(e){var t=activator.triageSegments(e);return each(t.pending,activator.addDelayedSegment),activator.removeDelayedSegments(t.passing),activator.removeDelayedSegments(t.failing),activator.removeDelayedSegments(t.apiOnly),each(t.passing,segmenter.evaluateSegment),t},activator.triageSegments=function(e){timer.addEvent("Activator","Triaging "+e.length+" segments.");var t=[],n=[],i=[],r=[];return each(e,function(e){data.getSegmentAPIOnly(e)?(timer.addEvent("Activator","Ignoring API-only segment "+e),r.push(e)):condition.isReadyToTest(e)?condition.test(e,{objectType:"segment"})?(timer.addEvent("Activator","Passed conditions for segment "+e),t.push(e)):(timer.addEvent("Activator","Failed conditions for segment "+e),i.push(e)):(timer.addEvent("Activator","Can't test conditions for segment "+e),n.push(e))}),{passing:t,pending:n,failing:i,apiOnly:r}},activator.addDelayedExperiment=function(e){timer.addEvent("Activator","Deferring test for experiment "+e),arrayContains(activator.delayedExperiments,e)||activator.delayedExperiments.push(e)},activator.addDelayedSegment=function(e){timer.addEvent("Activator","Deferring test for segment "+e),arrayContains(activator.delayedSegments,e)||activator.delayedSegments.push(e)},activator.hasDelayedExperiments=function(){return 0<activator.delayedExperiments.length},activator.removeDelayedExperiments=function(t){activator.delayedExperiments=filter(activator.delayedExperiments,function(e){return!inArray(e,t)})},activator.removeDelayedSegments=function(t){activator.delayedSegments=filter(activator.delayedSegments,function(e){return!inArray(e,t)})},activator.delayedExperiments=[],activator.delayedSegments=[],activator.hasTimedOut=!1,
/**
 * @license
 *
 * UAParser.js v0.7.12
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright © 2012-2016 Faisal Salman <fyzlman@gmail.com>
 * Dual licensed under GPLv2 & MIT
 */
useragent=function(){},function(r,d){"use strict";var p="function",g="object",e="model",t="name",n="type",i="vendor",a="version",o="architecture",s="console",l="mobile",c="tablet",u="smarttv",f="wearable",m={extend:function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:d},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},v={rgx:function(){for(var e,t,n,i,r,a,o,s=0,l=arguments;s<l.length&&!a;){var c=l[s],u=l[s+1];if(void 0===e)for(i in e={},u)u.hasOwnProperty(i)&&(typeof(r=u[i])===g?e[r[0]]=d:e[r]=d);for(t=n=0;t<c.length&&!a;)if(a=c[t++].exec(this.getUA()))for(i=0;i<u.length;i++)o=a[++n],typeof(r=u[i])===g&&0<r.length?2==r.length?typeof r[1]==p?e[r[0]]=r[1].call(this,o):e[r[0]]=r[1]:3==r.length?typeof r[1]!==p||r[1].exec&&r[1].test?e[r[0]]=o?o.replace(r[1],r[2]):d:e[r[0]]=o?r[1].call(this,o,r[2]):d:4==r.length&&(e[r[0]]=o?r[3].call(this,o.replace(r[1],r[2])):d):e[r]=o||d;s+=2}return e},str:function(e,t){for(var n in t)if(typeof t[n]===g&&0<t[n].length){for(var i=0;i<t[n].length;i++)if(m.has(t[n][i],e))return"?"===n?d:n}else if(m.has(t[n],e))return"?"===n?d:n;return e}},h={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},y={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[t,a],[/(opios)[\/\s]+([\w\.]+)/i],[[t,"Opera Mini"],a],[/\s(opr)\/([\w\.]+)/i],[[t,"Opera"],a],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[t,a],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[t,"IE"],a],[/(edge)\/((\d+)?[\w\.]+)/i],[t,a],[/(yabrowser)\/([\w\.]+)/i],[[t,"Yandex"],a],[/(comodo_dragon)\/([\w\.]+)/i],[[t,/_/g," "],a],[/(micromessenger)\/([\w\.]+)/i],[[t,"WeChat"],a],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[a,[t,"MIUI Browser"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[t,/(.+)/,"$1 WebView"],a],[/android.+samsungbrowser\/([\w\.]+)/i,/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[a,[t,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[t,a],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/juc.+(ucweb)[\/\s]?([\w\.]+)/i],[[t,"UCBrowser"],a],[/(dolfin)\/([\w\.]+)/i],[[t,"Dolphin"],a],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[t,"Chrome"],a],[/;fbav\/([\w\.]+);/i],[a,[t,"Facebook"]],[/fxios\/([\w\.-]+)/i],[a,[t,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[a,[t,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[a,t],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[t,[a,v.str,h.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[t,a],[/(navigator|netscape)\/([\w\.-]+)/i],[[t,"Netscape"],a],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[t,a]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[o,"amd64"]],[/(ia32(?=;))/i],[[o,m.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[o,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[o,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[o,/ower/,"",m.lowerize]],[/(sun4\w)[;\)]/i],[[o,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[o,m.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[e,i,[n,c]],[/applecoremedia\/[\w\.]+ \((ipad)/],[e,[i,"Apple"],[n,c]],[/(apple\s{0,1}tv)/i],[[e,"Apple TV"],[i,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[i,e,[n,c]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[e,[i,"Amazon"],[n,c]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[e,v.str,h.device.amazon.model],[i,"Amazon"],[n,l]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[e,i,[n,l]],[/\((ip[honed|\s\w*]+);/i],[e,[i,"Apple"],[n,l]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[i,e,[n,l]],[/\(bb10;\s(\w+)/i],[e,[i,"BlackBerry"],[n,l]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[e,[i,"Asus"],[n,c]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[i,"Sony"],[e,"Xperia Tablet"],[n,c]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[i,"Sony"],[e,"Xperia Phone"],[n,l]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[i,e,[n,s]],[/android.+;\s(shield)\sbuild/i],[e,[i,"Nvidia"],[n,s]],[/(playstation\s[34portablevi]+)/i],[e,[i,"Sony"],[n,s]],[/(sprint\s(\w+))/i],[[i,v.str,h.device.sprint.vendor],[e,v.str,h.device.sprint.model],[n,l]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[i,e,[n,c]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[i,[e,/_/g," "],[n,l]],[/(nexus\s9)/i],[e,[i,"HTC"],[n,c]],[/(nexus\s6p)/i],[e,[i,"Huawei"],[n,l]],[/(microsoft);\s(lumia[\s\w]+)/i],[i,e,[n,l]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[e,[i,"Microsoft"],[n,s]],[/(kin\.[onetw]{3})/i],[[e,/\./g," "],[i,"Microsoft"],[n,l]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[e,[i,"Motorola"],[n,l]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[e,[i,"Motorola"],[n,c]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[i,m.trim],[e,m.trim],[n,u]],[/hbbtv.+maple;(\d+)/i],[[e,/^/,"SmartTV"],[i,"Samsung"],[n,u]],[/\(dtv[\);].+(aquos)/i],[e,[i,"Sharp"],[n,u]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[i,"Samsung"],e,[n,c]],[/smart-tv.+(samsung)/i],[i,[n,u],e],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[i,"Samsung"],e,[n,l]],[/sie-(\w+)*/i],[e,[i,"Siemens"],[n,l]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[i,"Nokia"],e,[n,l]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[e,[i,"Acer"],[n,c]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[i,"LG"],e,[n,c]],[/(lg) netcast\.tv/i],[i,e,[n,u]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[e,[i,"LG"],[n,l]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[e,[i,"Lenovo"],[n,c]],[/linux;.+((jolla));/i],[i,e,[n,l]],[/((pebble))app\/[\d\.]+\s/i],[i,e,[n,f]],[/android.+;\s(glass)\s\d/i],[e,[i,"Google"],[n,f]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i],[[e,/_/g," "],[i,"Xiaomi"],[n,l]],[/android.+a000(1)\s+build/i],[e,[i,"OnePlus"],[n,l]],[/\s(tablet)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[n,m.lowerize],i,e]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[a,[t,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[t,a],[/rv\:([\w\.]+).*(gecko)/i],[a,t]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[t,a],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[t,[a,v.str,h.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[t,"Windows"],[a,v.str,h.os.windows.version]],[/\((bb)(10);/i],[[t,"BlackBerry"],a],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[t,a],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[t,"Symbian"],a],[/\((series40);/i],[t],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[t,"Firefox OS"],a],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[t,a],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[t,"Chromium OS"],a],[/(sunos)\s?([\w\.]+\d)*/i],[[t,"Solaris"],a],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[t,a],[/(haiku)\s(\w+)/i],[t,a],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[t,"iOS"],[a,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[t,"Mac OS"],[a,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[t,a]]},E=function(e,t){if(!(this instanceof E))return new E(e,t).getResult();var n=e||(r&&r.navigator&&r.navigator.userAgent?r.navigator.userAgent:""),i=t?m.extend(y,t):y;return this.getBrowser=function(){var e=v.rgx.apply(this,i.browser);return e.major=m.major(e.version),e},this.getCPU=function(){return v.rgx.apply(this,i.cpu)},this.getDevice=function(){return v.rgx.apply(this,i.device)},this.getEngine=function(){return v.rgx.apply(this,i.engine)},this.getOS=function(){return v.rgx.apply(this,i.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=e,this},this};E.VERSION="0.7.12",E.BROWSER={NAME:t,MAJOR:"major",VERSION:a},E.CPU={ARCHITECTURE:o},E.DEVICE={MODEL:e,VENDOR:i,TYPE:n,CONSOLE:s,MOBILE:l,SMARTTV:u,TABLET:c,WEARABLE:f,EMBEDDED:"embedded"},E.ENGINE={NAME:t,VERSION:a},E.OS={NAME:t,VERSION:a},r.UAParser=E}(useragent),detect.detect=function(e){var t=e||window.navigator,n=new useragent.UAParser(t.userAgent),i=n.getBrowser(),r=n.getOS(),a=n.getDevice(),o=detect.normalizeDevice(a),s=detect.normalizePlatformName(r.name),l=detect.isMobile(a.type,o,s);return{browserId:detect.getBrowserCode(i.name),browserVersion:i.version,platform:{id:s,version:r.version},device:{id:o,type:a.type||(l?"mobile":"desktop"),isMobile:l}}},detect.getBrowserCode=function(t){if((t=(t||"").toLowerCase())in detect.browserMap)return t;for(var e in detect.browserMap)if(any(detect.browserMap[e]||[],function(e){return e.toLowerCase()===t}))return e;return"unknown"},detect.getBrowserName=function(e){return detect.browserMap[e]?detect.browserMap[e][0]:e},detect.isMobile=function(e,t,n){if(arrayContains(["mobile","tablet"],e))return!0;if(t&&"unknown"!==t)for(var i in detect.mobileDeviceMap)if(t===detect.mobileDeviceMap[i])return!0;return!!arrayContains(["android","blackberry","ios","windows phone"],n)},detect.normalizeDevice=function(e){return e.model in detect.mobileDeviceMap?detect.mobileDeviceMap[e.model]:"unknown"},detect.normalizePlatformName=function(e){return(e||"unknown").toLowerCase()},detect.browserMap={gc:["Chrome","chromium","silk","yandex","maxthon"],ie:["Internet Explorer","iemobile"],edge:["Edge"],ff:["Firefox","iceweasel"],opera:["Opera","opera mini","opera tablet"],safari:["Safari","mobile safari","webkit"],ucbrowser:["UC Browser"]},detect.mobileDeviceMap={iPhone:"iphone",iPad:"ipad"},redirect.initialize=function(){redirect.initializeRedirectVariationId(),redirect.initializeRedirectReferrerUrl()},redirect.getRedirectURL=function(e){return e.match(/_optimizely_redirect(?:_no_cookie)?=(\S+)/)},redirect.getRedirectReferrer=function(){return redirect.referrer},redirect.getRedirectVariationId=function(){return redirect.variationId},redirect.detectNoCookieRedirect=function(e){return containsString(e,"_optimizely_redirect_no_cookie")},redirect.okToRedirect=function(e){e=e||"";var t=redirect.getRedirectCookie();return!!redirect.detectNoCookieRedirect(e)||(!t||!(!t||t.split("|")[1]!==REDIRECT_COOKIE_TRUE))},redirect.getRedirectCookie=function(){return cookie.get(REDIRECT_COOKIE_NAME)},redirect.initializeRedirectVariationId=function(){var e=redirect.getRedirectCookie()||"|";redirect.variationId=e.split("|")[0]},redirect.initializeRedirectReferrerUrl=function(){var e=cookie.get(REFERRER_REDIRECT_COOKIE_NAME);null!==e&&(redirect.referrer=0==e.length?"":e,cookie.set(REFERRER_REDIRECT_COOKIE_NAME,""))},redirect.setRedirectCookie=function(e,t){var n=e?REDIRECT_COOKIE_TRUE:REDIRECT_COOKIE_FALSE;cookie.set(REDIRECT_COOKIE_NAME,(t||"unknown variation")+"|"+n,data.getRedirectTimeout())},redirect.setReferrerCookie=function(e){e=isDefined(e)?e:document.referrer,cookie.set(REFERRER_REDIRECT_COOKIE_NAME,e,data.getRedirectTimeout())},redirect.referrer=null,redirect.variationId="",redirect.redirectRegex=/^\/\* _optimizely_redirect.+\*\/[ ]*\nwindow\.location\.replace\(_optly\.redir\.href.*\)[ ]*[;]?$/,redirect.redirectRegexParams=/^\/\* _optimizely_redirect.+\*\/[ ]*\nvar[ ]*_optly[ ]*=[ ]*\{[ ]*redir:document\.createElement\("a"\)\}[;]?\n_optly\.redir\.href=.*\n_optly\.cur=.+\nif \(_optly.cur\)[ ]?\{.+\}[ ]*\nwindow\.location\.replace\(_optly\.redir\.href.*\)[ ]*[;]?$/,redirect.redirectRegexLegacy=/^\/\* _optimizely_redirect.+\*\/[ ]*[\n]+window\.location\.replace\([ ]*redirectFirst.*\)[ ]*[;]?$/,api.includeRemoveFromAllReportable=!0,api.initializePriorityOneApiCalls=function(){var e={disable:api.disable,optOut:tracker.optOut,setCookieDomain:cookie.setApiPublicSuffix,setCookieExpiration:api.setCookieExpiration,verifyPreviewProject:function(e){data.getProjectId()!==e?timer.addEvent("API","Preview projectId ("+data.getProjectId()+") does not match expected ("+e+"), disabling."):directive.previewVerified=!0}};api.initializeHighPriority(e)},api.initializeHighPriority=function(n){var e=window.optimizely,i=[];isArrayLike(e)&&(each(e,function(e){var t=e;isArrayLike(e)?t=e[0]:isNonNullObject(e)&&(t=e.type),n[t]?api.push([n],e,!0):i.push(e)}),window.optimizely=i)},api.storeThirdPartyData=function(e,t,n){integrator.storeThirdPartyData(e,t,!!n),api.setPublicObjects()},api.addToSegment=function(e,t){var n=data.getSegmentIdByIdentifier(e)||e,i=data.getSegment(n);if(i)if(i.audience_id)api.visitor.addToAudience(i.audience_id);else if(i.dimension_id){api.visitor.setDimensionValue(i.dimension_id,t||!0,!1)}else segmenter.addToSegment(n,t);else timer.addEvent("API","Unable to find segment: "+n)},api.bucketUser=function(e,t,n){n=!0===n,directive.shouldOverrideThirdPartyCookie=!0,directive.isEnabled&&!n&&tracker.addActivationEvent(document.location.href),e=String(e),t=String(t);var i=null,r=t.split(VARIATION_ID_DELIMITER),a=data.getExperimentSectionIds(e),o=a&&0!==a.length;if("-1"===r[0]?plan.removeExperiment(e):o&&r.length==a.length?(i=[],each(r,function(e,t){Number(e)<=256?i.push(data.getSectionVariationIds(a[t])[e]):i.push(e)}),i=i.join(VARIATION_ID_DELIMITER)):!o&&1==r.length&&Number(r[0])<=256?i=String(data.getVariationIdByIndex(e,r[0])):1==r.length?i=r[0]:timer.addEvent("API","Error: could not bucket user. Unknown arguments."),i)if(o&&data.getExperimentVariationSectionId(e,i))distributor.preferMVTVariation(e,i);else{plan.addVariation(i,"api.bucketUser",!1,!0)}plan.writeCookie()},api.disable=function(e){e&&"tracking"===e||(timer.addEvent("API","Optimizely disabled"),directive.isEnabled=!1,directive.isNewClientEnabled=!1),directive.shouldTrackEvents=!1},api.finalize=function(){timer.addEvent("API","Finalizing API."),api.setPublicObjects(),api.isFinalized=!0},api.get=function(){if(data.hasSlave())return SLAVE_CLIENT[GLOBAL].get.apply(null,Array.prototype.slice.call(arguments))},api.getVariationNamesMap=function(){return api.variationNamesMap},api.OAuthClientIds=[],api.addOAuthClientId=function(e){api.OAuthClientIds.push(e),api.setPublicObjects()},api.getOAuthClientIds=function(){return api.OAuthClientIds},api.initialize=function(e){api.visitor=e,api.isFinalized=!1,segmenter.addChangeHandler(api.setPublicObjects),plan.addChangeHandler(api.setPublicObjects);var t={$:$,activeExperiments:evaluator.getEvaluatedExperimentIds()||[],allExperiments:data.getExperiments(),all_experiments:data.getExperiments(),allVariations:data.getVariations(),getElementsByClassName:document.getElementsByClassName,revision:data.getRevision(),variationIdsMap:api.variationIdsMap,variation_map:api.variationMap,variationMap:api.variationMap,variationNamesMap:api.variationNamesMap};for(var n in t)api.setProperty(t,n,t[n]);t.data=api.data;var i={},r=[i,api.v1],a=curry(api.push,r);extend(i,{activate:goog.partial(activator.activate,api.visitor),activateGeoDelayedExperiments:goog.partial(activator.activateGeoDelayedExperiments,api.visitor),activateSiteCatalyst:integrator.activateSiteCatalyst,activateUniversalAnalytics:integrator.activateUniversalAnalytics,addOAuthClientId:api.addOAuthClientId,addToAudience:goog.bind(api.visitor.addToAudience,api.visitor),addToSegment:api.addToSegment,bindTrackElement:evaluator.bindTrackElementFromApi,bucketUser:api.bucketUser,bucketVisitor:api.bucketUser,clickTaleRecord:integrator.recordClickTale,clickTalePlayback:integrator.playbackClickTale,customTag:api.registerCustomTag,delayDomReadyEval:evaluator.setDelayDomExecute,delayPageviewTracking:api.delayPageviewTracking,disable:api.disable,log:timer.enableLogging,getAccountId:data.getAdminAccountId,getProjectId:data.getProjectId,googleAnalyticsCustomVariableScope:integrator.googleAnalyticsCustomVariableScope,integrationPrefix:integrator.setPrefix,optOut:tracker.optOut,overrideUrl:user.setCurrentUrl,push:a,removeFromAllAudiences:goog.bind(api.visitor.removeFromAllAudiences,api.visitor),removeFromAllSegments:api.removeFromAllSegments,removeFromAudience:goog.bind(api.visitor.removeFromAudience,api.visitor),removeFromSegment:api.removeFromSegment,sc_activate:integrator.activateSiteCatalyst,sc_svar:integrator.setSiteCatalystSVar,skipPageTracking:api.skipPageTracking,optOutThirdPartyCookies:api.optOutThirdPartyCookies,setDimensionValue:goog.bind(api.visitor.setDimensionValue,api.visitor),setUserId:api.setUserId,storeThirdPartyData:api.storeThirdPartyData,timeout:optly.client.preview.ENABLED?goog.nullFunction:api.disable,trackEvent:tracker.addLogEventFromAPI,verbose:timer.enableVerboseLogging}),data.hasSlave()&&extend(i,{get:api.get}),optly.client.preview.ENABLED&&extend(i,{getPreviewLog:function(){return optly.client.preview.Logger.log},clearPreviewLog:function(){optly.client.preview.Logger.clear()},configureConditionalModeExperiment:function(e,t){distributor.configureConditionalModeExperiment(e,t),timer.addEvent("API","Configuring conditionally activated experiment for preview "+e)}}),api.includeRemoveFromAllReportable&&(i.removeFromReportableAudiences=api.removeFromReportableAudiences),extend(t,i);var o=window.optimizely;isArrayLike(o)&&each(o,function(e){a(e)}),window[GLOBAL]=t},api.push=function(e,t,n){var i=[],r=t;n=!!isDefined(n)&&n;var a=0;isArrayLike(t)?(r=t[0],i=slice(t,1)):isNonNullObject(t)&&(a=isDefined(t.version)?t.version:1,r=t.type,i=[t]);var o,s=e[a];if(s&&(o=s[r]),o){timer.addEvent("API",'Called function "'+r+'"'),o.apply(null,i);var l=0===a?r:"v"+a+"."+r;optly.client.rum.instance.recordApi(l)}else n||timer.addEvent("API",'Error for unknown function "'+r+'"');data.hasSlave()&&SLAVE_CLIENT[GLOBAL].push(t),timer.flushLogs()},api.registerCustomTag=function(e,t){api.isFinalized?timer.addEvent("API","Error: can't add custom tags after Optimizely loads"):(api.customTags=api.customTags||{},2==arguments.length?api.customTags[e]=t:1==arguments.length&&$.extend(!0,api.customTags,e))},api.removeFromSegment=function(e,t){var n=data.getSegmentIdByIdentifier(e)||e;t=!isDefined(t)||t;var i=data.getSegment(n);i?i.audience_id?api.visitor.removeFromAudience(i.audience_id):i.dimension_id?api.visitor.setDimensionValue(i.dimension_id,null):segmenter.removeFromSegment(n,t):timer.addEvent("API","Unable find segment for: "+n)},api.removeFromAllSegments=function(){each(data.getSegmentIds(),function(e){api.removeFromSegment(e,!1)}),segmenter.callChangeHandlers()},api.setPublicObjects=function(){api.variationIdsMap={},api.variationMap={},api.variationNamesMap={},each(plan.getVariationIds(),function(e){var t=data.getVariationExperimentId(e);api.variationIdsMap[t]=e.split(VARIATION_ID_DELIMITER),api.variationMap[t]=data.getVariationIndex(e),api.variationNamesMap[t]=data.getVariationName(e)}),api.updateDataObject();var e={activeExperiments:evaluator.getEvaluatedExperimentIds(),allExperiments:data.getExperiments(),all_experiments:data.getExperiments(),variationIdsMap:api.variationIdsMap,variationMap:api.variationMap,variationNamesMap:api.variationNamesMap,variation_map:api.variationMap};window[GLOBAL].data=api.data,each(e,function(e,t){api.setProperty(window[GLOBAL],e,t)})},api.setProperty=function(t,n,i,e){try{var r="o.";r+=e||n,Object.defineProperty(t,n,{configurable:!0,enumerable:!0,get:function(){return optly.client.rum.instance.recordApi(r),i},set:function(e){i=e}})}catch(e){t[n]=i}},api.delayPageviewTracking=function(e){if(!isNumberLike(e))return!1;directive.delayPageviewTracking=Number(e)},api.optOutThirdPartyCookies=function(){directive.optOutThirdPartyCookies=!0},api.getRedirectExperimentState=function(){var e=redirect.getRedirectVariationId();if(e){var t=data.getVariationExperimentId(e);if(t)return{variationId:e,experimentId:t,referrer:redirect.getRedirectReferrer()}}},api.setCookieExpiration=function(e){var t,n="";"number"!=typeof e?(n="must be a number.",t=DEFAULT_TRACKING_COOKIE_EXPIRATION):t=Math.floor(DAY_IN_SECONDS*e),t<MINIMUM_TRACKING_COOKIE_EXPIRATION&&(n="less then minimum.",t=MINIMUM_TRACKING_COOKIE_EXPIRATION),n=n&&"Days argument "+n,timer.addEvent("API",n+" Cookie expiration set to "+t+" seconds."),directive.trackingCookieExpiration=t},api.skipPageTracking=function(){directive.shouldSkipPageTracking=!0},api.doesExperimentTargetCurrentUrl=optly.client.preview.ENABLED?function(e){var t=data.getExperimentUrls(e);return t?condition.testUrlDimensionValues(t,condition.facade.getCurrentUrl()):0!==filter(t=data.getConditions(e,"experiment"),function(e){return"url"===e.type&&condition.testUrls(e)}).length}:goog.nullFunction,api.updateDataObject=function(){api.data={};var e=data.getAudiences();api.setProperty(api.data,"audiences",e||void 0,"data.audiences"),api.setProperty(api.data,"customTags",api.customTags,"data.customTags"),api.setProperty(api.data,"thirdParty",integrator.getAllThirdPartyData(),"data.thirdParty");for(var t={},n=data.getExperimentIds(),i=0;i<n.length;i++){var r=n[i],a={};a.code=data.getExperimentCode(r),a.name=data.getExperimentName(r),a.conditional=data.isExperimentConditionallyActivated(r),a.manual=data.isExperimentManuallyActivated(r),a.section_ids=data.getExperimentSectionIds(r),a.variation_ids=data.getExperimentVariationIds(r),optly.client.preview.ENABLED&&(a.status=data.getExperimentStatus(r),a.targetsUrl=api.doesExperimentTargetCurrentUrl(r),api.conditionallyActivatedExperiments[r]&&(a.conditional_triggered=!0)),t[r]=a}api.setProperty(api.data,"experiments",t,"data.experiments");var o={},s=data.getSegmentIds();for(i=0;i<s.length;i++){var l=s[i],c={name:data.getSegmentName(l)};optly.client.preview.ENABLED&&extend(c,{is_default:data.getSegementIsDefault(l)}),o[l]=c}api.setProperty(api.data,"segments",o,"data.segments");var u={},d=data.getSectionIds();for(i=0;i<d.length;i++){var p=d[i],g={};g.name=data.getSectionName(p),g.variation_ids=data.getSectionVariationIds(p),u[p]=g}api.setProperty(api.data,"sections",u,"data.sections");var f={},m=data.getVariationIds();for(i=0;i<m.length;i++){var v=m[i],h={};h.name=data.getVariationName(v),h.code=data.getVariationCode(v),f[v]=h}api.setProperty(api.data,"variations",f,"data.variations");var y={browser:detect.getBrowserName(user.getBrowserId()),browserVersion:user.getBrowserVersion(),device:user.getDeviceId(),deviceType:user.getDevice().type,platform:user.getPlatform(),mobile:user.isMobile(),mobileId:user.getMobileId(),os:user.getPlatform().id,lists:asyncInfo.getListMembershipStatuses(),location:asyncInfo.getLocation(),ip:asyncInfo.getIP(),matchingRules:asyncInfo.getDynamicCustomerProfileConditions(),referrer:String(document.referrer),segments:segmenter.getSegmentTrackingData(),dimensions:api.visitor.getDimensionValues(),audiences:api.visitor.getAudiences()};for(var E in y)api.setProperty(y,E,y[E],"data.visitor."+E);optly.client.preview.ENABLED&&api.setProperty(y,"url",window.location.toString(),"data.visitor.url");var b={},I=query.getAllParameters();I.reverse();i=0;for(var _=I.length;i<_;i++)try{b[safeDecodeUriComponent(I[i][0])]=safeDecodeUriComponent(I[i][1])}catch(e){timer.addEvent("API","Failed to decode parameter "+I[i][0]+"="+I[i][1])}api.setProperty(y,"params",b,"data.visitor.params"),api.data.visitor=y;var S={},A=evaluator.getEvaluatedExperimentIds()||[];api.setProperty(S,"activeExperiments",A,"data.state.activeExperiments"),api.setProperty(S,"redirectExperiment",api.getRedirectExperimentState(),"data.state.redirectExperiment"),api.setProperty(S,"variationIdsMap",api.variationIdsMap,"data.state.variationIdsMap"),api.setProperty(S,"variationMap",api.variationMap,"data.state.variationMap"),api.setProperty(S,"variationNamesMap",api.variationNamesMap,"data.state.variationNamesMap"),api.setProperty(S,"enabled",directive.isEnabled,"data.state.enabled"),S.integrations={},api.setProperty(S.integrations,"activeOAuthClientIds",api.getOAuthClientIds(),"data.state.integrations.activeOAuthClientIds"),api.data.state=S},api.removeFromReportableAudiences=function(){cookie.get(HOTFIX_ENG_1636_COOKIE)?timer.addEvent("API","skipping because cookie is set"):(each(data.getAudiences(),function(e){data.getAudienceSegmentId(e)&&(timer.addEvent("API","Removing from reportable audience: "+e),api.visitor.removeFromAudience(e))}),cookie.set(HOTFIX_ENG_1636_COOKIE,"1",MINIMUM_TRACKING_COOKIE_EXPIRATION))},api.setUserId=function(e){var t=id.getPPID();e||0===e?"string"==typeof e||"number"==typeof e?(timer.addEvent("API","Setting PPID to "+e),e=String(e),id.setPPID(e)):timer.addEvent("API","Ignoring non-string, non-number PPID: "+e):(timer.addEvent("API","Clearing PPID"),id.unsetPPID()),id.getPPID()!==t&&(timer.addEvent("API","Clearing plan because of PPID change"),plan.reset())},api.v1={event:function(e){tracker.addLogEventFromAPI(e.eventName,e.tags)},user:function(e){e.userId&&api.setUserId(e.userId),e.attributes&&each(e.attributes,function(e,t){api.visitor.setDimensionValue(e,t)})},integration:function(e){e.OAuthClientId&&api.addOAuthClientId(e.OAuthClientId)}},api.data={},api.conditionallyActivatedExperiments={},api.variationIdsMap={},api.variationMap={},api.variationNamesMap={},api.visitor=null,tracker.fixRevenueOptions=function(e,t){var n,i={},r=data.getCustomRevenueGoals();if(r&&e in r&&isNumberLike(r[e])&&(n=Number(r[e])),t)if(isNumberLike(t))n=Number(t);else{if("object"!=typeof t)return log("tracker","Revenue argument %s not a number.",t),null;if("revenue"in(i=extend({},t))){if(!isNumberLike(i.revenue))return log("tracker","Revenue field %s not a number.",i.revenue),null;n=Number(i.revenue),delete i.revenue}}return isDefined(n)&&(i.revenue=n),i},tracker.addLogEventFromAPI=function(e,t){var n=tracker.fixRevenueOptions(e,t);if(null!==n){var i=data.getEnabledExperimentIds(),r={};each(i,function(e){r[e]=!0}),$.extend(n,{experimentIds:r}),tracker.addLogEvent(e,"custom",n)}else log("tracker","Bad options. Will not track this event.")},tracker.addLogEvent=function(e,t,n,i){if(n=n||{},optly.client.preview.Logger.addEvent(e,n),directive.shouldTrackEvents){var r={name:e,type:t,created:i||tracker.currentTimeInSeconds(),options:n};tracker.logEvents.push(r),tracker.shouldSendLogEvents?(tracker.sendLogEvents(),timer.addEvent("Tracker","Tracking event '"+e+"'")):timer.addEvent("Tracker","Queued tracking event '"+e+"'")}},tracker.enableEngagementTracking=function(){tracker.cancelEngagementTracking(),$("html").bind("mousedown",tracker.registerEngagement),$("html").bind("touchstart",tracker.confirmEngagement)},tracker.cancelEngagementTracking=function(){$("html").unbind("touchstart",tracker.confirmEngagement),$("html").unbind("mousedown touchend",tracker.registerEngagement),$("html").unbind("touchmove",tracker.enableEngagementTracking)},tracker.confirmEngagement=function(){$("html").bind("touchend",tracker.registerEngagement),$("html").bind("touchmove",tracker.enableEngagementTracking)},tracker.addActivationEvent=function(t){var e=data.getMatchingGoalIds(t);0<e.length?(tracker.addLogEvent("optly_activate","activate"),each(e,function(e){tracker.addLogEvent(t,"pageview",{goalIds:[e]},tracker.pageTimestamp)})):tracker.addLogEvent(t,"activate")},tracker.getPendingLogEvents=function(){var e=cookie.get(PENDING_LOG_EVENTS_COOKIE_NAME)||"[]",t=[];try{t=json.parse(e)}catch(e){}if(isArrayLike(t))for(var n=0,i=t.length;n<i;n++){var r=t[n];if("string"!=typeof r){t=[];break}try{json.parse(r);t=[];break}catch(e){}}else t=[];return t},tracker.makeLogRequest=function(e,t){timer.addEvent("Tracker","Making a log request."),e+="&cx2="+optly.hashing.hashToHex(tracker.getCanonicalQuery(e),65259),tracker.makeRequest(data.getLogUrlRoot()+"?"+e,t)},tracker.getCanonicalQuery=function(e){var t=map(e.split("&"),function(e){return e.split("=")});return t.sort(function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0}),map(t,function(e){return e.join("=")}).join("&")},tracker.makeImageRequest=function(e,t){var n=new Image;n.onload=t,e=tracker.stripXHRFlag(e),n.src=e,tracker.images.push(n)},tracker.objectToQuery=function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(window.encodeURIComponent(n)+"="+window.encodeURIComponent(e[n]));return t.join("&")},tracker.makeRequest=function(e,t){if(tracker.XHR_SUPPORTED&&tracker.isXHRQuery(e))try{var n=new XMLHttpRequest;if("withCredentials"in n)return n.onload=t,n.open("GET",e,!0),n.withCredentials=!0,void n.send();tracker.XHR_SUPPORTED=!1,timer.addEvent("Tracker","Found that XHR with credentials is not supported in this browser.")}catch(e){timer.addEvent("Tracker","XHR not supported"),tracker.XHR_SUPPORTED=!1}tracker.makeImageRequest(e,t)},tracker.isXHRQuery=function(e){return-1!==e.indexOf(tracker.XHR_FLAG)},tracker.stripXHRFlag=function(e){return e.replace("&"+tracker.XHR_FLAG,"")},tracker.optOut=function(e,t){e=!isDefined(e)||"true"===String(e),isDefined(t)||(t=window.alert);var n=e?"true":"false";e?(cookie.set(OPT_OUT_COOKIE_NAME,n,directive.trackingCookieExpiration),cookie.set(BUCKET_COOKIE_NAME,n,directive.trackingCookieExpiration),t("You have successfully opted out of Optimizely for this domain.")):(cookie.set(OPT_OUT_COOKIE_NAME,n,directive.trackingCookieExpiration),t("You are NOT opted out of Optimizely for this domain."))},tracker.isOptedOut=function(){return"true"===cookie.get(OPT_OUT_COOKIE_NAME)},tracker.registerEngagement=function(e){tracker.cancelEngagementTracking(),tracker.addLogEvent("engagement","engagement")},tracker.removePendingLogEvent=function(e){for(var t=tracker.getPendingLogEvents(),n=0,i=t.length;n<i;n++)if(t[n]===e){t.splice(n,1);break}tracker.setPendingLogEventsCookie(t),timer.addEvent("Tracker","Removed a pending log event from the pending events cookie.")},tracker.logEvents=[],tracker.shouldSendLogEvents=!1,tracker.sendLogEvents=function(){var n=["a="+data.getProjectId(),"d="+data.getAdminAccountId(),"y="+data.getIPAnonymization(),"src=js"];directive.shouldOverrideThirdPartyCookie&&n.push("override=true"),each(plan.getVariationIds(),function(e){var t=data.getVariationExperimentId(e);n.push("x"+t+"="+e)}),each(segmenter.getSegmentTrackingData(),function(e,t){t=encodeURIComponent(safeDecodeUriComponent(t)),n.push("s"+e+"="+t)}),n.push("tsent="+tracker.currentTimeInSeconds());var o=[],s=id.getOrGenerateId(),l=id.getPPID();each(tracker.logEvents,function(e){var t=[],n=tracker.getGoalsForEvent(e);e.name&&t.push("n="+encodeURIComponent(e.name)),!0!==e.options.anonymous&&(t.push("u="+s),l&&t.push("p="+encodeURIComponent(l))),tracker.XHR_SUPPORTED&&t.push(tracker.XHR_FLAG),e.created&&t.push("time="+e.created),directive.optOutThirdPartyCookies&&t.push("dtpc="+directive.optOutThirdPartyCookies);var i=!!e.options&&!!e.options.revenue&&e.options.experimentIds||{},r=keys(i),a=filter(data.getEnabledExperimentIds(),function(e){return!i[e]});if(each([{experiments:r,goals:n.concat([data.getSummaryRevenueGoalId()]),extraParameters:["v="+encodeURIComponent(e.options.revenue)]},{experiments:a,goals:n,extraParameters:[]}],function(e){(e.experiments.length||directive.forceTracking)&&o.push(t.concat(e.extraParameters).concat(["f="+e.experiments.join(","),"g="+e.goals.join(",")]).join("&"))}),"custom"===e.type)try{tracker.updateCustomEventList(e.name)}catch(e){}});var e=o.concat(tracker.getPendingLogEvents());tracker.setPendingLogEventsCookie(e);var t=n.join("&"),i=tracker.sentPendingLogEvents?o:e;tracker.sentPendingLogEvents=!0;for(var r=0,a=i.length;r<a;r++){var c=i[r];tracker.makeLogRequest(t+"&"+c,function(){tracker.removePendingLogEvent(c)})}tracker.logEvents=[],tracker.shouldSendLogEvents=!0},tracker.sendVerificationRequest=function(){if(directive.shouldTrackEvents){var e="https://"+data.getWebHost()+"/account/snippet_installed?project_id="+data.getProjectId()+"&wxhr=true";timer.addEvent("Tracker","Making snippet verification request."),tracker.makeRequest(e,null)}},tracker.setPendingLogEventsCookie=function(e){for(var t=json.stringify(e);t.length>PENDING_LOG_EVENTS_COOKIE_MAX_LENGTH;)e=e.slice(0,-1),t=json.stringify(e);cookie.set(PENDING_LOG_EVENTS_COOKIE_NAME,t,PENDING_LOG_EVENTS_COOKIE_AGE)},tracker.updateCustomEventList=function(e){var t=id.getOrGenerateId(),n=optly.client.storage.localStorage.get(CUSTOM_EVENTS_STORAGE_NAME)||{},i=n[t]||(n[t]=[]);i=isArrayLike(i)?i:[],-1!==$.inArray(e,i)&&i.splice($.inArray(e,i),1),i.push(e),100<i.length&&i.shift(),n[t]=i,optly.client.storage.localStorage.set(CUSTOM_EVENTS_STORAGE_NAME,n),cookie.remove(CUSTOM_EVENTS_COOKIE_NAME)},tracker.sendErrorLog=function(e){var t="EXCEPTION: "+(e.name||"no-name"),n=e.message||"no-message",i=(e.stack||"error\nno stack").split("\n").slice(0,2).join(" ");tracker.addLogEvent([t,n,i].join(", "),"custom"),tracker.sendLogEvents()},tracker.getDocumentVisibilityState=function(){return document.visibilityState||document.webkitVisibilityState},tracker.currentTimeInSeconds=function(){return+new Date/1e3},tracker.getGoalsForEvent=function(e){if(e.options.goalIds)return e.options.goalIds;if("activate"===e.type){var t=evaluator.getActiveExperimentIds(),n=redirect.getRedirectVariationId();if(n){var i=data.getVariationExperimentId(n);t.push(i)}return t}return e.name?data.getMatchingGoalIds(e.name):[]},tracker.images=[],tracker.sentPendingLogEvents=!1,tracker.XHR_FLAG="wxhr=true",tracker.XHR_SUPPORTED=!0,tracker.pageTimestamp=tracker.currentTimeInSeconds(),behavior.FIELDS={NAME:"n",TIME:"t",TYPE:"y",CATEGORY:"c",REVENUE:"r",SESSION_ID:"s",OPTIONS:"o"},behavior.EventBase=function(e,t,n,i,r){this[behavior.FIELDS.NAME]=e,this[behavior.FIELDS.TYPE]=t,"string"==typeof n&&0<trim(n).length&&(this[behavior.FIELDS.CATEGORY]=trim(n)),i&&0<keys(i).length&&(this[behavior.FIELDS.OPTIONS]=i),isDefined(r)&&(this[behavior.FIELDS.REVENUE]=r)},behavior.EventBase.prototype.digest=function(){var e=function(e,t){return encodeURIComponent(e)+"="+encodeURIComponent(t)},t=[];if(t.push(e(behavior.FIELDS.NAME,this[behavior.FIELDS.NAME])),t.push(e(behavior.FIELDS.TYPE,this[behavior.FIELDS.TYPE])),this[behavior.FIELDS.CATEGORY]&&t.push(e(behavior.FIELDS.CATEGORY,this[behavior.FIELDS.CATEGORY])),this[behavior.FIELDS.REVENUE]&&t.push(e(behavior.FIELDS.REVENUE,this[behavior.FIELDS.REVENUE])),!this[behavior.FIELDS.OPTIONS])return t.join("&");var n=this[behavior.FIELDS.OPTIONS]||{},i=filter(keys(n),function(e){return n.hasOwnProperty(e)});i=i.sort();for(var r=0;r<i.length;r++)t.push(e(i[r],n[i[r]]));return t.join("&")},behavior.EventBase.prototype.hash=function(){return this.hash_||(this.hash_=optly.hashing.hashToHex(optly.hashing.toByteString(this.digest()),BEHAVIOR_EVENT_HASH_SEED)),this.hash_},behavior.EventBase.prototype.setHash=function(e){this.hash_=e},behavior.EventBase.prototype.reHash=function(){this.hash_=null,this.hash()},behavior.EventBase.prototype.equals=function(e){if(this.hash()!==e.hash())return!1;if(this[behavior.FIELDS.NAME]!==e[behavior.FIELDS.NAME]||this[behavior.FIELDS.TYPE]!==e[behavior.FIELDS.TYPE]||this[behavior.FIELDS.CATEGORY]!==e[behavior.FIELDS.CATEGORY]||this[behavior.FIELDS.REVENUE]!==e[behavior.FIELDS.REVENUE])return!1;if(!this[behavior.FIELDS.OPTIONS]&&!e[behavior.FIELDS.OPTIONS])return!0;var t=this[behavior.FIELDS.OPTIONS]||{},n=e[behavior.FIELDS.OPTIONS]||{},i=filter(keys(t),function(e){return t.hasOwnProperty(e)}),r=filter(keys(n),function(e){return n.hasOwnProperty(e)});if(i.length!==r.length)return!1;for(var a=0;a<i.length;a++){var o=i[a];if(!n.hasOwnProperty(o)||t[o]!==n[o])return!1}return!0},behavior.EventBase.prototype.getValueOrDefault=function(e,t){var n=getFieldValue(this,e);return isDefined(n)?n:t},behavior.EventBase.prototype.setFieldValue=function(e,t){e!==behavior.FIELDS.NAME&&e!==behavior.FIELDS.TYPE&&e!==behavior.FIELDS.CATEGORY&&e!==behavior.FIELDS.REVENUE&&e!==behavior.FIELDS.OPTIONS||(this[e]=t,this.reHash())},behavior.Event=function(e,t,n){this.eventBase=e,this[behavior.FIELDS.TIME]=t,isDefined(n)&&(this[behavior.FIELDS.SESSION_ID]=n)},behavior.Event.prototype.getValueOrDefault=function(e,t){if(0===e.length)return this;var n={};n[behavior.FIELDS.TIME]=this[behavior.FIELDS.TIME],n[behavior.FIELDS.SESSION_ID]=this[behavior.FIELDS.SESSION_ID];var i=getFieldValue(n,e);return isDefined(i)?i:this.eventBase.getValueOrDefault(e,t)},behavior.Event.prototype.setFieldValue=function(e,t){e===behavior.FIELDS.TIME||e===behavior.FIELDS.SESSION_ID?this[e]=t:this.eventBase.setFieldValue(e,t)},behavior.Policy.MILLIS_IN_30_MINS=18e5,behavior.Policy.isInSameSession=function(e,t){var n=e.getValueOrDefault([behavior.FIELDS.TIME],0),i=t.getValueOrDefault([behavior.FIELDS.TIME],0);return Math.abs(n-i)<behavior.Policy.MILLIS_IN_30_MINS},behavior.Policy.updateSessionId_unguarded=function(e,t){var n;n=behavior.Policy.isInSameSession(e,t)?e.getValueOrDefault([behavior.FIELDS.SESSION_ID]):t.getValueOrDefault([behavior.FIELDS.TIME]),t.setFieldValue(behavior.FIELDS.SESSION_ID,n)},behavior.Policy.updateSessionId=function(e,t){if(e){var n=e.getValueOrDefault([behavior.FIELDS.TIME]),i=e.getValueOrDefault([behavior.FIELDS.SESSION_ID]),r=t.getValueOrDefault([behavior.FIELDS.TIME]);n="number"!=typeof n?r-2*behavior.Policy.MILLIS_IN_30_MINS:n,i="number"!=typeof i?n:i,e=new behavior.Event(new behavior.EventBase("",""),n,i),behavior.Policy.updateSessionId_unguarded(e,t)}else t.setFieldValue(behavior.FIELDS.SESSION_ID,t.getValueOrDefault([behavior.FIELDS.TIME]))},behavior.Policy.sessionize=function(e){var t=e.length;if(0!==t){e[0].setFieldValue(behavior.FIELDS.SESSION_ID,e[0].getValueOrDefault([behavior.FIELDS.TIME]));for(var n=1;n<t;n++)behavior.Policy.updateSessionId_unguarded(e[n-1],e[n])}},behavior.Policy.applyMigrations=function(e){return!1},behavior.Store={EVENTS_KEY:"events",EVENT_QUEUE_KEY:"event_queue",COMPACT_KEYS:{EVENTBASE:"eb",HASH:"h",TIMEBASE:"tb",TIMESTAMPS:"ts",DELTA:"d",INDEX:"i"},baseMap:{},events:[]},behavior.Store.initialize=function(){data.isBehaviorEnabled()&&behavior.Store.populatePersistedEvents()},behavior.Store.getEvents=function(){return data.isBehaviorEnabled()?(0===behavior.Store.events.length&&behavior.Store.initialize(),behavior.Store.events.slice(-behavior.Store.maxEvents)):[]},behavior.Store.populatePersistedEvents=function(){var e=user.getUserData(behavior.Store.EVENTS_KEY)||[],t=user.getUserData(behavior.Store.EVENT_QUEUE_KEY)||[];behavior.Store.migrateEventsAndUpdateStore(e,t),behavior.Policy.sessionize(behavior.Store.events)},behavior.Store.migrateEventsAndUpdateStore=function(e,t){if(0===e.length&&0===t.length)return!(behavior.Store.events=[]);var n=!1,i=e[0]||t[0];return behavior.Store.COMPACT_KEYS.EVENTBASE in i?(e=behavior.Store.unCompact(e),t=behavior.Store.unCompact(t)):(n=!0,e=behavior.Store.migrateFromVerboseFormat(e),t=behavior.Store.migrateFromVerboseFormat(t)),behavior.Store.events=e.concat(t),behavior.Store.events.length>behavior.Store.maxEvents&&(behavior.Store.events=behavior.Store.events.slice(-behavior.Store.maxEvents),n=!0),behavior.Store.updateBaseMapAndMaybeDedupe(behavior.Store.events),behavior.Store.migrateEventBasesAndUpdateStore()&&(n=!0),n},behavior.Store.migrateFromVerboseFormat=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n],r=behavior.Store.makeEventBase(i);t[n]=new behavior.Event(r,i[behavior.FIELDS.TIME])}return t},behavior.Store.migrateEventBasesAndUpdateStore=function(){var e=!1,t=behavior.Store.getAllEventBases();return behavior.Policy.applyMigrations(t)&&(e=!0,behavior.Store.baseMap={},behavior.Store.updateBaseMapAndMaybeDedupe(behavior.Store.events)),e},behavior.Store.getTime=function(){return+new Date},behavior.Store.updateBaseMapAndMaybeDedupe=function(e){for(var t=0;t<e.length;t++)e[t].eventBase=behavior.Store.findOrSetEventBase(e[t].eventBase)},behavior.Store.findOrSetEventBase=function(e){var t=e.hash(),n=behavior.Store.baseMap[t];if(void 0===n)return behavior.Store.baseMap[t]=[e],e;for(var i=0;i<n.length;i++)if(e.equals(n[i]))return n[i];return n.push(e),e},behavior.Store.getAllEventBases=function(){var e=[];for(var t in behavior.Store.baseMap)behavior.Store.baseMap.hasOwnProperty(t)&&(e=e.concat(behavior.Store.baseMap[t]));return e},behavior.Store.CompactEB,behavior.Store.CompactTS,behavior.Store.CompactEvent,behavior.Store.makeEventBase=function(e,t){var n=new behavior.EventBase(e[behavior.FIELDS.NAME],e[behavior.FIELDS.TYPE],e[behavior.FIELDS.CATEGORY],e[behavior.FIELDS.OPTIONS],e[behavior.FIELDS.REVENUE]);return isDefined(t)&&n.setHash(t),n},behavior.Store.unCompact=function(e){for(var t=behavior.Store.COMPACT_KEYS,n=[],i=0;i<e.length;i++)for(var r=e[i],a=behavior.Store.makeEventBase(r[t.EVENTBASE],r[t.HASH]),o=r[t.TIMEBASE],s=r[t.TIMESTAMPS],l=0;l<s.length;l++){var c=s[l],u=new behavior.Event(a,o+c[t.DELTA]);n[c[t.INDEX]]=u}return n},behavior.Store.usageInBytes=function(){var e=user.getUserData(behavior.Store.EVENTS_KEY)||[],t=user.getUserData(behavior.Store.EVENT_QUEUE_KEY)||[];return json.stringify(e).length+json.stringify(t).length},behavior.Store.maxEvents=1e3,behavior.getEvents=function(){try{return behavior.Store.getEvents()}catch(e){log("Behavior","Error "+e.toString()+" getting events")}return[]},behavior.usageInBytes=function(){return behavior.Store.usageInBytes()},behavior.getDefaultAttributes=function(){return(user.getUserData("visitor_profile")||{}).defaultBehavior||{}},optly.client.rum.ENABLED=!0,optly.client.rum.MAX_CHARS_INTEGRATION_OAUTH_CLIENT_IDS=64,optly.client.rum.MAX_CHARS_APIS=1e3,optly.client.rum.RumCollector=function(){this.events={},this.apis={},this.inRumSample=Math.random()<data.rumSamplingRate(),geolocation.cdn3Requested&&(this.events.geoRequest=geolocation.cdn3Requested-optly.client.rum.timebase)},optly.client.rum.now=function(){return(new Date).getTime()-(optly.client.rum.timebase||0)},optly.client.rum.since=function(e){return e?(new Date).getTime()-e.getTime():0},optly.client.rum.timebase=optly.client.rum.now(),optly.client.rum.RumCollector.prototype.sendRum=optly.client.rum.ENABLED?function(){this.inRumSample&&tracker.makeRequest(this.createUrl(),null)}:goog.nullFunction,optly.client.rum.RumCollector.joinMaxLengthRandomly=optly.client.rum.ENABLED?function(e,t,n){for(var i=e.slice(),r=i.length-1;0<r;r--){var a=Math.floor(Math.random()*(r+1)),o=i[r];i[r]=i[a],i[a]=o}for(var s=i.join(t);s.length>n;)i.pop(),s=i.join(t);return s}:function(e,t,n){return""},optly.client.rum.RumCollector.prototype.createUrl=function(){return"https://rum.optimizely.com/rum?"+tracker.objectToQuery(this.getRum())},optly.client.rum.RumCollector.prototype.recordEvent=optly.client.rum.ENABLED?function(e){this.events[e]||(this.events[e]=optly.client.rum.now())}:function(e){},optly.client.rum.RumCollector.prototype.recordApi=optly.client.rum.ENABLED?function(e){this.apis[e]=!0}:goog.nullFunction,optly.client.rum.RumCollector.prototype.getRum=optly.client.rum.ENABLED?function(){var e={user:id.getOrGenerateId(),ppid:id.getPPID(),project:data.getProjectId(),revision:data.getRevision(),sync:optly.client.rum.syncInstall,timebase:optly.client.rum.timebase,render:optly.client.rum.firstRenderTime,sampleRate:data.rumSamplingRate(),numExps:evaluator.getActiveExperimentIds().length,numBehaviorEvents:behavior.getEvents().length,behaviorEventsSize:behavior.usageInBytes(),oldestBehaviorEventAge:optly.client.rum.since(optly.client.rum.getOldestBehaviorEventDate()),integrationOAuthClientIds:optly.client.rum.RumCollector.joinMaxLengthRandomly(api.getOAuthClientIds(),",",optly.client.rum.MAX_CHARS_INTEGRATION_OAUTH_CLIENT_IDS),codeVersion:data.getVersion(),hasSlave:data.hasSlave(),docVisibilityState:tracker.getDocumentVisibilityState(),wxhr:!0,apis:optly.client.rum.RumCollector.joinMaxLengthRandomly(keys(this.apis),"!",optly.client.rum.MAX_CHARS_APIS)};extend(e,optly.client.rum.getResourceTiming()||{}),extend(e,this.events),extend(e,optly.client.rum.getCookieData()||{});var n={};return each(optly.client.storage.localStorage.metrics()||{},function(e,t){n["ls"+e]=t}),extend(e,n),e}:function(){return{}},optly.client.rum.syncInstall=optly.client.rum.ENABLED?function(){try{return!document.getElementsByTagName("body")[0]}catch(e){return null}}():null,optly.client.rum.firstRenderTime=null,optly.client.rum.ENABLED&&function(){try{window.requestAnimationFrame(function(){optly.client.rum.firstRenderTime=optly.client.rum.now()})}catch(e){}}(),optly.client.rum.getOldestBehaviorEventDate=function(){try{return window.optimizely.get("behavior").getEvents()[0].timestamp}catch(e){}},optly.client.rum.getCookieData=optly.client.rum.ENABLED?function(){var t=[AUDIENCE_COOKIE_NAME,BUCKET_COOKIE_NAME,CUSTOM_EVENTS_COOKIE_NAME,PENDING_LOG_EVENTS_COOKIE_NAME,REFERRER_REDIRECT_COOKIE_NAME,SEGMENTS_COOKIE_NAME],n={},i=0,r=0;return each(cookie.getAll(),function(e){0===e.name.indexOf("optimizely")&&(arrayContains(t,e.name)&&(timer.addEvent("RUM","Cookie size for "+e.name+": "+e.raw.length),n[e.name+"Len"]=e.raw.length),i+=e.raw.length),r+=e.raw.length}),extend(n,{allOptimizelyCookiesLen:i,allCookiesLen:r}),n}:goog.nullFunction,optly.client.rum.resourceRegex=/\/\/[^.]+\.optimizely\.(com|test)\/(js|api\/client)\/[\d]+\.js/gi,optly.client.rum.getResourceTiming=optly.client.rum.ENABLED?function(){var e,t=null;try{e=filter(window.performance.getEntries(),function(e){return!!optly.client.rum.resourceRegex.test(e.name)})[0]}catch(e){return t}if(e)for(var n in t={},e)"number"==typeof e[n]&&0!==e[n]&&(t[n]=e[n]);return t}:goog.nullFunction,optly.client.rum.instance=new optly.client.rum.RumCollector,distributor.distributeAll=function(){optly.client.rum.instance.recordEvent("distributeExperiments"),each(data.getExperimentIds(),function(e){if(!evaluator.isInQueue(e))if(data.isExperimentConditionallyActivated(e))distributor.configureConditionalModeExperiment(e);else if(condition.isReadyToTest(e)){if(condition.test(e,{objectType:"experiment"})){timer.addEvent("Distributor","Going to distribute "+data.getExperimentString(e)),distributor.distributeExperiment(e)&&evaluator.enqueue(e)}}else data.isExperimentManuallyActivated(e)||arrayContains(evaluator.getEvaluatedExperimentIds(),e)||activator.addDelayedExperiment(e)})},distributor.distributeExperiment=function(e,t){t=!0===t;var n=plan.getVariationId(e);if(n&&0<n.length)return timer.addEvent("Distributor","Not distributing experiment "+e+" (already in plan)"),!0;if(t||plan.isExperimentIgnored(e))return timer.addEvent("Distributor","Not distributing experiment "+e+" (is ignored)"),optly.client.preview.Logger.setReason(e,"it is ignored"),!1;var i=data.getEnabledVariationIds(e);if(0===i.length)return timer.addEvent("Distributor","Permanently ignoring experiment "+e+" (no enabled variations)"),optly.client.preview.Logger.setReason(e,"it has no enabled variations"),plan.ignoreExperiment(e),!1;var r=data.getExperimentIgnorePercentage(e);if(r>distributor.randomForIgnoring(e))return timer.addEvent("Distributor","Permanently ignoring experiment "+e+"("+r/100+"% likelihood)"),plan.ignoreExperiment(e),!1;var a=i;void 0!==distributor.preferredBucketUserMapping[e]&&(timer.addEvent("Distributor","Taking into account bucketUser variations for experiment "+e),a=distributor.getPotentialPreferredMVTVariations(e));var o=distributor.pickRandomVariationIndex(e,a),s=a[o];return timer.addEvent("Distributor","Picked variation "+s+" [index "+o+" of "+i.length+"]"),plan.addVariation(s,"distributor",!1),!0},distributor.configureConditionalModeExperiment=function(e,t){t=t||{},timer.addEvent("Distributor","Configuring conditionally-activated experiment: "+e),api.conditionallyActivatedExperiments[e]?timer.addEvent("Distributor","Not configuring conditionally-activated experiment (already done): "+e):data.isExperimentEnabled(e)||!0===t.force?(distributor.runConditionalCode(e,t),api.isFinalized&&api.setPublicObjects()):timer.addEvent("Distributor","Not configuring conditionally-activated experiment (not enabled): "+e)},distributor.runConditionalCode=function(experimentId,options){var code=data.getConditionalActivationCode(experimentId),pollingType=!0,conditionalFunction,conditionalCodeResult;if("function"==typeof code)pollingType=!1,conditionalFunction=code;else try{var evalString="("+code+")";conditionalCodeResult=eval("(function() {return "+evalString+";})()"),"function"==typeof conditionalCodeResult&&(pollingType=!1,conditionalFunction=conditionalCodeResult)}catch(e){}var activationOptions={isActive:!1,experimentId:experimentId},activationFunction=function(){activator.activate(api.visitor,experimentId,options),activationOptions.isActive=arrayContains(evaluator.getActiveExperimentIds(),experimentId),timer.addEvent("Distributor","Activating conditionally activated experiment "+experimentId)};if(pollingType){var testOptions={objectType:"experiment",enabledStatus:options.enabledStatus};if(options.force||!condition.isReadyToTest(experimentId)||condition.test(experimentId,testOptions)){var pollForReady=function(){condition.isReadyToTest(experimentId)&&(condition.testCodeResult(null,{value:code})||conditionalCodeResult)?activationFunction():setTimeout(pollForReady,EVALUATION_WAIT_INTERVAL)};pollForReady(),timer.addEvent("Distributor","Set up conditional polling for "+experimentId),api.conditionallyActivatedExperiments[experimentId]=!0}}else try{conditionalFunction(activationFunction,activationOptions),timer.addEvent("Distributor","Set up conditional callback for "+experimentId),api.conditionallyActivatedExperiments[experimentId]=!0}catch(e){timer.addEvent("Distributor","Error running conditional callback function for "+experimentId)}},distributor.getBucketingId=function(){return id.getPPID()||id.getOrGenerateId()},distributor.randomForIgnoring=function(e){return optly.hashing.hashToInt(distributor.getBucketingId(),e,optly.hashing.HashSeed.IGNORING,1e4)},distributor.randomForBucketing=function(e){return optly.hashing.experimentUserHash(distributor.getBucketingId(),e,optly.hashing.HashSeed.BUCKETING)},distributor.getRandomBucketAsFallback=function(e,t){return optly.hashing.hashToInt(distributor.getBucketingId(),e,optly.hashing.HashSeed.FALLBACK,t)},distributor.pickRandomVariationIndex=function(e,t){var n=[],i=data.getExperimentVariationWeights(e);return each(t,function(e){n.push(i[e])}),distributor.chooseWeightedIndex(e,n)},distributor.chooseWeightedIndex=function(e,t){var n=t.length;if(0===n)return null;if(1===n)return 0;for(var i=0,r=0;r<n;r++)i+=t[r];var a=distributor.randomForBucketing(e)*i;for(r=0;r<n;r++){if(a<t[r])return r;a-=t[r]}return distributor.getRandomBucketAsFallback(e,n)},distributor.preferMVTVariation=function(e,t){var n=data.getExperimentVariationSectionId(e,t);distributor.preferredBucketUserMapping[e]=distributor.preferredBucketUserMapping[e]||{},distributor.preferredBucketUserMapping[e][n]=t,timer.addEvent("Distributor","Preferring variation partial "+t+" of section "+n+" of experiment "+e);var i=distributor.getPotentialPreferredMVTVariations(e);1===i.length&&plan.addVariation(i[0],"api.bucketUser",!1,!0)},distributor.getPotentialPreferredMVTVariations=function(t){var n=[];return each(data.getEnabledVariationIds(t),function(e){distributor.containsPreferredMVTVariations(t,e)&&n.push(e)}),n},distributor.containsPreferredMVTVariations=function(e,t){var n=!0;for(var i in distributor.preferredBucketUserMapping[e]){var r=distributor.preferredBucketUserMapping[e][i];-1===t.indexOf(r)&&(n=!1)}return n},distributor.preferredBucketUserMapping={},dcp.alias=function(e){var t=data.getDCPServiceId();if(null!==t){var n=dcp.getAliases(data.getDCPKeyfieldLocators());if(n.optlyDatasource)if(0!==n.otherDatasources.length)if(dcp.maybeInvalidateCachedResults(e)){var i=dcp.makeAliasURLPath(t,n.optlyDatasource.datasourceId,n.optlyDatasource.id);dcp.postAliasRequest(i,n.otherDatasources,e)}else timer.addEvent("DCP","Duplicate alias request; skipping.");else timer.addEvent("DCP","Must specify at least one non-Optimizely datasource to alias");else timer.addEvent("DCP","Must specify Optimizely datasource in alias")}},dcp.aliasDescriptor,dcp.getAliases=function(e){for(var t=null,n=[],i=0;i<e.length;i++){var r=e[i],a=r.dcp_datasource_id||null,o=r.is_optimizely||!1,s=r.type,l=r.name||"";if(null!==a){var c=null;if(s===dcp.keyFieldLocatorType.COOKIE?c=condition.facade.getCookie(l):s===dcp.keyFieldLocatorType.JS_VARIABLE?c=condition.facade.getJSVariable(l):s===dcp.keyFieldLocatorType.QUERY_PARAM?c=condition.facade.getQueryParameter(l):s===dcp.keyFieldLocatorType.UID&&(c=dcp.getUID()),isNumberLike(c)||"string"==typeof c){var u={datasourceId:a,id:c};o?t=u:n.push(u)}}else timer.addEvent("DCP","No DCP datasource id specified")}return{optlyDatasource:t,otherDatasources:n}},dcp.getUID=distributor.getBucketingId,dcp.makeAliasURLPath=function(e,t,n){return map([e,t,n],encodeURIComponent).join("/")},dcp.maybeInvalidateCachedResults=function(e){var t=dcp.getAliases(data.getDCPKeyfieldLocators()),n=e.get()||{},i=n.aliases||{};return!dcp.isAlreadyAliased(t.otherDatasources,i)&&(n.rulesResults=null,e.set(n),!0)},dcp.makeTargetingURL=function(e){var t=dcp.getAliases(data.getDCPKeyfieldLocators());if(!t.optlyDatasource||!t.optlyDatasource.datasourceId)return timer.addEvent("DCP","No Optimizely datasource found in data."),null;var n=t.optlyDatasource.datasourceId,i=t.optlyDatasource.id,r=map([data.getProjectId().toString(),n,i],encodeURIComponent),a=[dcp.BASE_URLS.TARGETING].concat(r).join("/"),o=(e.get()||{}).aliases||{};dcp.isAlreadyAliased(t.otherDatasources,o)||(a+="?"+map(t.otherDatasources,function(e){return encodeURIComponent(e.datasourceId)+"="+encodeURIComponent(e.id)}).join("&"));return a},dcp.isAlreadyAliased=function(e,n){return n=n||{},every(e,function(e){var t=e.datasourceId;return n[t]===e.id})},dcp.getUpdatedAliasData=function(e,t){return t=t||{},each(e,function(e){t[e.datasourceId]=e.id}),t},dcp.postAliasRequest=function(e,n,i){try{var r=new XMLHttpRequest,t=[dcp.BASE_URLS.ALIAS,e].join("/");r.open("POST",t),"withCredentials"in r&&(r.withCredentials=!0),r.setRequestHeader("Content-Type","application/json;charset=UTF-8");var a={};each(n,function(e){a[e.datasourceId]=e.id}),r.onerror=function(){timer.addEvent("DCP","Failed to POST alias request")},r.onload=function(){if(200<=r.status&&r.status<300){var e=i.get()||{},t=e.aliases||{};e.aliases=dcp.getUpdatedAliasData(n,t),i.set(e)}else timer.addEvent("DCP","Alias POST failed with",r.statusText)},r.send(json.stringify({data:a}))}catch(e){timer.addEvent("DCP","Exception %s trying to POST alias request",e)}},dcp.BASE_URLS={ALIAS:"https://vis.optimizely.com/api/alias",TARGETING:"https://tapi.optimizely.com/api/targetingEmbed"},dcp.keyFieldLocatorType={COOKIE:"cookie",JS_VARIABLE:"js_variable",QUERY_PARAM:"query_param",UID:"uid"},asyncRequest.makeDynamicCustomerProfileTargetingRequest=function(){dcp.maybeInvalidateCachedResults(asyncInfo.dcpCache);var e=dcp.makeTargetingURL(asyncInfo.dcpCache);null!==e&&loadScript(e)},asyncRequest.makeListTargetingRequest=function(){loadScript(asyncRequest.getListTargetingUrl())},asyncRequest.getListTargetingUrl=function(){var e=asyncRequest.URLS.ODDS,i={};each(data.getListTargetedKeys(),function(e,t){var n=asyncRequest.getCurrentValueForListTargetedKey(t);"string"==typeof n&&(i[t]=n)}),i.project=data.getProjectId().toString();var t=[];for(var n in i)i.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(i[n]));return t.length&&(e+="?"+t.join("&")),e},asyncRequest.getCurrentValueForListTargetedKey=function(e){if(!asyncRequest.isListTargetedKeyWithVariableValue(e))return timer.addEvent("Async Request","Can't determine a value for this list-targeted key: "+e),null;var t=e.split("_"),n=t[0],i=t.slice(1).join("_"),r=void 0;if("c"===n)r=condition.facade.getCookie(i);else if("j"===n)r=condition.facade.getJSVariable(i);else{if("q"!==n)return timer.addEvent("Async Request","Can't determine a value for this list-targeted key: "+e),null;r=condition.facade.getQueryParameter(i)}return"string"!=typeof r&&"number"!=typeof r&&"boolean"!=typeof r?(null==r?timer.addEvent("Async Request","No value is set for this list-targeted key: "+e):timer.addEvent("Async Request","Unacceptable value (must be string, number, or boolean) for this list-targeted key: "+e),null):100<(r=r.toString()).length?(timer.addEvent("Async Request","Withholding the overlong value for this list-targeted key: "+e),null):(timer.addEvent("Async Request","Returning a value for this list-targeted key: "+e),r)},asyncRequest.isListTargetedKeyWithVariableValue=function(e){return!!containsString(e,"_")&&arrayContains(["c","j","q"],e.split("_")[0])},asyncRequest.KeyValue,asyncRequest.URLS={ODDS:"https://odds.optimizely.com/js/geo2.js"},preview_loader.loadPreview=function(){window.optimizelyPreview||(window[GLOBAL]&&window[GLOBAL].unshift||(window[GLOBAL]=[]),window[GLOBAL].unshift(["verifyPreviewProject",data.getProjectId()]),loadScript([preview_loader.HOST,preview_loader.PATH,directive.previewScriptName,".js"].join(""),!0),directive.shouldLoadPreview&&preview_loader.loadSplashScreen('Loading Preview<br /><img alt="loading" src="//'+data.getWebHost()+'/static/img/loading-32.gif" style="padding-top:20px; width: 32px; margin: 0 auto;" />'))},preview_loader.loadSplashScreen=function(e){if(0!==$("body").length){var t='<div id="optimizely-loading" style="position:absolute;top:0;right:0;left:0;bottom:0;background-color:white;opacity:0.9;z-index: 3271000;"><h2 style="color:#9a9a9a;top:40%;position:absolute;font-size:2.25em;text-align:center;width:100%;font-family:\'Lucida Grande\',sans-serif;">';t=t+e+"</h2></div>",$("#optimizely-loading").remove(),$("body").append(t)}else setTimeout(function(){preview_loader.loadSplashScreen(e)},20)},preview_loader.HOST=data.getPreviewHost(),preview_loader.PATH="/js/preview/",query.getAllParameters=function(){var e=window.location.search||"";0===e.indexOf("?")&&(e=e.substring(1));for(var t=e.split("&"),n=[],i=0;i<t.length;i++){var r="",a="",o=t[i].split("=");0<o.length&&(r=o[0]),1<o.length&&(a=o[1]),n.push([r,a])}return n},query.getParameters=function(e){for(var t,n=/optimizely_([^=]+)=([^&]*)/g,i={};t=n.exec(e);)i[t[1]]=t[2];return i},query.getValue=function(e,t){t=t||query.getAllParameters();for(var n=0;n<t.length;n++){var i=t[n];if(i[0]===e){var r=i[1];return safeDecodeUriComponent(r=r.replace(/\+/g," "))}}return null},query.FORCE_PARAMETERS_REGEX=/x(\d+)/,query.processForceParameters=function(){var r=!optly.client.preview.ENABLED&&!data.isForceVariationEnabled();each(query.getParameters(window.location.search),function(e,t){var n=query.FORCE_PARAMETERS_REGEX.exec(e);if(n){if(r)return directive.requestedInvalidForceParameters=!0,void log("Query","Ignored parameter %s",e);var i=n[1];api.bucketUser(i,t,!0),data.isExperimentConditionallyActivated(i)?distributor.configureConditionalModeExperiment(i,{force:!0,skipPageviewTracking:!0}):condition.test(i,{})||activator.activate(api.visitor,i,{force:!0,skipPageviewTracking:!0})}})},query.process=function(){var e=query.getParameters(window.location.search),t=!1;for(var n in e)if(query.FORCE_PARAMETERS_REGEX.exec(n)){t=!0;break}"true"!==e.opt_out&&"false"!==e.opt_out||tracker.optOut("true"===e.opt_out),directive.forceTracking="true"===e.force_tracking,"true"===e.disable||"true"===e.opt_out||tracker.isOptedOut()?(directive.isEnabled=!1,directive.isNewClientEnabled=!1):"classic"===e.disable?directive.isEnabled=!1:"new"===e.disable&&(directive.isNewClientEnabled=!1),directive.isEditor="true"===e.editor,directive.isPersonalizationEditor="true"===e.p13n,directive.shouldLoadPreview="true"===e.show_preview;var i=window.optlyDesktop;directive.isDesktopAppEditor=i&&isDefined(i.p13nInner);var r=cookie.get(TOKEN_COOKIE_NAME);r&&cookie.set(TOKEN_COOKIE_NAME,r,TOKEN_COOKIE_KEEP_ALIVE);var a=e.token||r;data.getInsecurePreview()&&a?directive.previewScriptName="public/"+data.getProjectId():/^[0-9a-f]{64}$/.test(a)?directive.previewScriptName=a:/^[0-9a-f]{32}$/.test(a)?(timer.addEvent("Query","Using legacy MD5 token"),directive.previewScriptName=a):(cookie.remove(TOKEN_COOKIE_NAME),timer.addEvent("Query","Blocked request to load unsafe script: "+a)),directive.shouldLog="true"===e.log,directive.shouldLogVerbosely="true"===e.verbose,directive.shouldTrackEvents=!(directive.shouldLoadPreview||t)||directive.forceTracking},optly.nativity.getNativeGetElementsByClassName=function(){var e=document.getElementsByClassName;if(!optly.nativity.isNativeFunction(e)){var t=(window.optimizely||{}).getElementsByClassName,n=(window.optly||{}).getElementsByClassName;e=optly.nativity.isNativeFunction(t)?t:optly.nativity.isNativeFunction(n)?n:null}return e},optly.nativity.isNativeFunction=function(e){return e&&-1!==String(e).indexOf("[native code]")},segmenter.initialize=function(e){var t=e||visitor;segmenter.loadSegmentsCookie(t),activator.tryToEvaluateSegments(data.getSegmentIds()),segmenter.addChangeHandler(segmenter.saveSegmentsCookie),segmenter.callChangeHandlers(),integrator.loadThirdPartySegments(t)},segmenter.loadSegmentsCookie=function(i){timer.addEvent("Segmenter","Loading segments cookie.");var t=cookie.get(SEGMENTS_COOKIE_NAME);if(t){try{t=json.parse(t)}catch(e){t={}}each(t,function(e,t){var n=data.getSegment(e);timer.addEvent("Segmenter","Segments cookie contains segment id: "+e),n&&n.audience_id?i.addToAudience(n.audience_id):n&&n.dimension_id?i.setDimensionValue(n.dimension_id,t,!1):segmenter.visitorSegments[e]=t})}},segmenter.saveSegmentsCookie=function(){var n={};each(segmenter.visitorSegments,function(e,t){t&&(n[e]=t)}),cookie.set(SEGMENTS_COOKIE_NAME,json.stringify(n),directive.trackingCookieExpiration)},segmenter.addChangeHandler=function(e){segmenter.changeHandlers.push(e)},segmenter.addToSegment=function(e,t){e&&!isNaN(parseInt(e,10))?(t||""===t||(t=!0),segmenter.visitorSegments[e]=t,segmenter.callChangeHandlers()):timer.addEvent("Segmenter","Unable to find segment for ID: "+e)},segmenter.callChangeHandlers=function(){each(segmenter.changeHandlers,function(e){e()})},segmenter.evaluateSegment=function(e){timer.addEvent("Segmenter","Evaluating Segment "+e),segmenter.tellPreviewAboutSegment(e,"add");var t=segmenter.evaluateSegmentValue(e);null!==t&&segmenter.addToSegment(e,t)},segmenter.evaluateSegmentValue=function(e){if(data.getSegmentAPIOnly(e))return null;var t=null,n=null;switch(data.getSegmentValueType(e)){case"browser":t=condition.facade.getBrowserId(),n="unknown";break;case"campaign":t=condition.facade.getCampaign(),n="none";break;case"country":t=condition.facade.getLocation().country,n="unknown";break;case"language":t=condition.facade.getBrowserLanguage(),n="none";break;case"mobile":t=condition.facade.isMobile();break;case"os":t=condition.facade.getPlatform().id,n="unknown";break;case"referrer":t=condition.facade.getReferringDomain(),n="none";break;case"source_type":t=condition.facade.getSourceType(),n="direct";break;default:return"true"}if(null===t){if(segmenter.visitorSegments.hasOwnProperty(e))return null;t=n}return segmenter.standardizeValue(t)},segmenter.getSourceType=function(){var e=condition.facade.getReferrer();if(condition.facade.getQueryParameter("utm_source")||condition.facade.getQueryParameter("utm_campaign")||condition.facade.getQueryParameter("gclid")||condition.facade.getQueryParameter("otm_source"))return"campaign";for(var t=["google\\.\\w{2,3}(\\.\\w{2,3})?/(search|url)","https://(www\\.)?google\\..*?/$","http(s)?://www\\.bing\\.\\w{2,3}(\\.\\w{2,3})?/","r\\.search\\.yahoo\\.\\w{2,3}(\\.\\w{2,3})?/","baidu\\.\\w{2,3}(\\.\\w{2,3})?/"],n=0;n<t.length;n++){var i=t[n];try{if(e.match(i))return"search"}catch(e){log("Segmenter","%s: %s while matching %s",e.name,e.message,i)}}return e&&user.getDomain(e)!==user.getDomain(condition.facade.getCurrentUrl())?"referral":null},segmenter.getSegmentsList=function(){var n=[];return each(segmenter.visitorSegments,function(e,t){t&&n.push(e)}),n},segmenter.getSegmentTrackingData=function(){var n={};return each(segmenter.visitorSegments,function(e,t){t&&(n[String(e)]=t)}),n},segmenter.getSegmentValue=function(e){return segmenter.visitorSegments[e]},segmenter.getSegmentValueFromType=function(n){return each(segmenter.visitorSegments,function(e,t){if(data.getSegmentValueType(e)==n)return t})},segmenter.reset=function(){segmenter.visitorSegments={}},segmenter.handleOfflineSegmentResponse=function(e){var t;for(t in e.map)log("Segmenter","Offline segment request returned: %s, %s",t,e.map[t]),segmenter.addToSegment(t,e.map[t])},segmenter.removeFromSegment=function(e,t){var n=data.getSegmentIdByIdentifier(e)||e;segmenter.visitorSegments[n]?(segmenter.visitorSegments[n]=!1,(void 0===t||t)&&segmenter.callChangeHandlers()):timer.addEvent("Segmenter","Not removing "+e+", not found")},segmenter.standardizeValue=function(e,t,n){return t=!isDefined(t)||t,n=n||segmenter.MAX_VALUE_LENGTH,e=safeDecodeUriComponent(e),e=String(e),t&&(e=e.toLowerCase()),e=e.substring(0,n),encodeURIComponent(e)},segmenter.tellPreviewAboutSegment=optly.client.preview.ENABLED?function(e,t){var n="add"===t?"adding":"removing",i="add"===t?"to":"from",r=optly.client.preview.Logger.getReason(e);r?(optly.client.preview.Logger.addEvent("Not "+n+" visitor "+i+" segment "+data.getSegmentName(e)+" because "+r+".",{type:"explanation"}),optly.client.preview.Logger.deleteReason(e)):optly.client.preview.Logger.addEvent("Segment "+t+" condition matches, "+n+i+" segment "+data.getSegmentName(e),{type:"explanation"})}:goog.nullFunction,segmenter.changeHandlers=[],segmenter.visitorSegments={},segmenter.MAX_VALUE_LENGTH=20,optly.client.Facade=function(){},extend(optly.client.Facade.prototype,{getBrowserId:user.getBrowserId,getBrowserVersion:user.getBrowserVersion,getMobileId:user.getMobileId,isMobile:user.isMobile,getBrowser:function(){return{id:this.getBrowserId(),version:this.getBrowserVersion(),mobileId:this.getMobileId()}},getCampaign:function(){return this.getQueryParameter("utm_campaign")},getCookie:cookie.get,getDevice:user.getDevice,getIP:asyncInfo.getIP,getJSVariable:function(e){try{return window[e]}catch(e){return null}},getBehaviorEvents:behavior.getEvents,getBrowserLanguage:user.getBrowserLanguage,getDefaultBehaviorAttributes:behavior.getDefaultAttributes,getLocation:asyncInfo.getLocation,getCurrentUrl:user.getCurrentUrl,getNewVsReturning:user.getNewVsReturning,getIsFirstSession:user.isFirstSession,getAllQueryParameters:query.getAllParameters,getPlatform:user.getPlatform,getReferrer:user.getReferrer,getThirdPartyData:function(e){var t=e.split("."),n=t[0],i=t.slice(1);return integrator.getThirdPartyData(n,i)},hasPPID:id.hasPPID,getReferringDomain:function(){return user.getDomain(this.getReferrer())},getSegmentsList:segmenter.getSegmentsList,getSourceType:segmenter.getSourceType,getDocumentReferrer:function(){return document.referrer},getQueryParameter:function(e){return query.getValue(e,this.getAllQueryParameters())},getCustomTags:function(){return api.customTags},getCustomTagValue:function(e){return(this.getCustomTags()||{})[e]},getTriggeredCustomEvents:function(){var e=(optly.client.storage.localStorage.get(CUSTOM_EVENTS_STORAGE_NAME)||{})[id.getOrGenerateId()]||[];return isArrayLike(e)?e:[]},hasSegment:function(e){return arrayContains(this.getSegmentsList(),e)},triggeredCustomEvent:function(e){return arrayContains(this.getTriggeredCustomEvents(),e)},getDate:function(){return new Date},getListMembershipStatus:asyncInfo.getListMembershipStatus,getDynamicCustomerProfileConditions:asyncInfo.getDynamicCustomerProfileConditions}),condition.facade=new optly.client.Facade,rules.Rule,rules.getValueOrDefault=function(e,t,n){if(e.getValueOrDefault)return e.getValueOrDefault(t,n);var i=getFieldValue(e,t);return void 0===i&&(i=n),i},rules.maybeTrimLowerCase=function(e){return"string"==typeof e?trim(e).toLowerCase():e},rules.clause={WHERE:"where",GROUP_BY:"groupBy",AGGREGATE:"aggregate",HAVING:"having",ORDER_BY:"orderBy",SELECT:"select",LIMIT:"limit",FROM:"from"},rules.DEFAULT_FIELD=["*"],rules.booleanOperators={eq:function(e){var t=map(e,rules.maybeTrimLowerCase);return t[0]==t[1]},is:function(e){return e[0]===e[1]},gt:function(e){return e[0]>e[1]},lt:function(e){return e[0]<e[1]},gte:function(e){return e[0]>=e[1]},lte:function(e){return e[0]<=e[1]},in:function(e){return arrayContains(map(e[1]||[],rules.maybeTrimLowerCase),rules.maybeTrimLowerCase(e[0]))},between:function(e){return e[1]<=e[0]&&e[0]<=e[2]},contains:function(e){var t=map(e,function(e){return"string"==typeof e?e.toLowerCase():e});return-1!==(t[0]||"").indexOf(t[1])},regex:function(e){try{var t,n;return"string"==typeof e[1]?(t=e[1],n="i"):(t=e[1][0]||"",n=e[1][1]||""),new RegExp(t,n).test(e[0])}catch(e){return log("Rules",'In operator "regex", error: '+(e.message||"invalid RegExp /"+[t,n].join("/"))),!1}},exists:function(e){return void 0!==e[0]},and:function(e){return every(e,function(e){return e})},or:function(e){return any(e,function(e){return e})},not:function(e){return!e[0]}},rules.arithmeticOperators={"+":function(e){return(e[0]||0)+(e[1]||0)},"-":function(e){return(e[0]||0)-(e[1]||0)},"/":function(e){return(e[0]||0)/(e[1]||1)},"%":function(e){return(e[0]||0)%(e[1]||1)}},rules.aggregateOperators={sum:function(e,t){for(var n=e[0]||rules.DEFAULT_FIELD,i=0,r=0;r<t.length;r++)i+=rules.getValueOrDefault(t[r],n,0);return i},avg:function(e,t){if(0==t.length)return 0;for(var n=e[0]||rules.DEFAULT_FIELD,i=0,r=0;r<t.length;r++)i+=rules.getValueOrDefault(t[r],n,0);return i/t.length},max:function(e,t){for(var n=e[0]||rules.DEFAULT_FIELD,i=Number.NEGATIVE_INFINITY,r=0;r<t.length;r++)i=Math.max(i,rules.getValueOrDefault(t[r],n,Number.NEGATIVE_INFINITY));return i},min:function(e,t){for(var n=e[0]||rules.DEFAULT_FIELD,i=Number.POSITIVE_INFINITY,r=0;r<t.length;r++)i=Math.min(i,rules.getValueOrDefault(t[r],n,Number.POSITIVE_INFINITY));return i},count:function(e,t){return t.length}},rules.functions={now:function(){return+new Date}},rules.getScalarOperator=function(e){return e in rules.booleanOperators?rules.booleanOperators[e]:e in rules.arithmeticOperators?rules.arithmeticOperators[e]:null},rules.operate=function(e,t){if(t.hasOwnProperty("value"))return t.value;if(t.hasOwnProperty("field"))return rules.getValueOrDefault(e,t.field);if(t.hasOwnProperty("eval"))return t.eval in rules.functions?rules.functions[t.eval]():void log("Rules","Unknown function: "+t.eval);if(t.op){var n=rules.getScalarOperator(t.op);if(n){var i=goog.partial(rules.operate,e);return n(map(t.args||[],function(e){return i(e)}),e)}log("Rules","Unknown operator: "+t.op)}else log("Rules","No operator specified: "+json.stringify(t))},rules.DEFAULT_GROUP_BY_VALUE="_",rules.groupBy=function(e,t){if(void 0===e||!isArrayLike(e)||0===e.length){var n={},i={};return i[rules.DEFAULT_FIELD]=rules.DEFAULT_GROUP_BY_VALUE,n[rules.DEFAULT_FIELD+"="+rules.DEFAULT_GROUP_BY_VALUE]={fieldValues:i,events:t},n}for(var r=map(e,function(e){return e.field}),a={},o=0;o<t.length;o++){for(var s=t[o],l=[],c={},u=0;u<r.length;u++){var d=r[u],p=rules.getValueOrDefault(s,d,rules.DEFAULT_GROUP_BY_VALUE),g=d.join(".");c[g]=p,l.push(encodeURIComponent(g)+"="+encodeURIComponent(String(p)))}var f=l.join("&");a.hasOwnProperty(f)||(a[f]={fieldValues:c,events:[]}),a[f].events.push(s)}return a},rules.generateAlias=function(e,t){return"_"+e+"_"+t.join(".")},rules.aggregate=function(l,e){var c={};return each(e,function(e,t){c[e]={};for(var n=0;n<l.length;n++){var i=l[n],r=i.op;if(r in rules.aggregateOperators){var a=(i.args&&i.args[0]||{}).field||rules.DEFAULT_FIELD,o=rules.generateAlias(r,a),s=rules.aggregateOperators[r]([a],t.events);c[e][o]=s}else log("Rules","Unknown aggregate operator "+r)}}),c},rules.project=function(e,i){var r=[];return each(e,function(e,t){var n=extend({},t.fieldValues);extend(n,i[e]||{}),r.push(n)}),r},rules.orderBy=function(l,e){return isArrayLike(l)?0==l.length?e:e.sort(function(e,t){for(var n=0;n<l.length;n++){var i=l[n],r="ASC"===(i.direction||"ASC")?1:-1,a=i.field,o=rules.getValueOrDefault(e,a,0),s=rules.getValueOrDefault(t,a,0);if(o<s)return-r;if(s<o)return r}return 0}):(log("Rules","groupBy rule must be an array"),e)},rules.rewrite=function(e){var s=[],l={};function c(e,t){if(isArrayLike(e)&&("and"!==e[0]&&"or"!==e[0]&&"not"!==e[0]&&log("Rules","Unexpected operation "+e[0]+". Continuing optimistically."),e={op:e[0],args:e.slice(1)}),e.hasOwnProperty("field")||e.hasOwnProperty("value")||e.hasOwnProperty("eval"))return e;if(t&&e.op in rules.aggregateOperators){var n=(e.args&&e.args[0]||{}).field||rules.DEFAULT_FIELD,i=rules.generateAlias(e.op,n);return i in l||(s.push({op:e.op,args:e.args}),l[i]=!0),{field:[i]}}for(var r=[],a=e.args||[],o=0;o<a.length;o++)r[o]=c(a[o],t);return{op:e.op,args:r}}var t={};e.hasOwnProperty(rules.clause.WHERE)&&(t[rules.clause.WHERE]=c(e[rules.clause.WHERE],!1)),e.hasOwnProperty(rules.clause.HAVING)&&(t[rules.clause.HAVING]=c(e[rules.clause.HAVING],!0)),(e.hasOwnProperty(rules.clause.AGGREGATE)||0<s.length)&&(t[rules.clause.AGGREGATE]=(e[rules.clause.AGGREGATE]||[]).concat(s));for(var n=[rules.clause.GROUP_BY,rules.clause.ORDER_BY,rules.clause.SELECT,rules.clause.LIMIT],i=0;i<n.length;i++)e.hasOwnProperty(n[i])&&(t[n[i]]=e[n[i]]);return e.hasOwnProperty(rules.clause.FROM)&&(t[rules.clause.FROM]=rules.rewrite(e[rules.clause.FROM])),t},rules.verify=function(e,t){t=t||0;var n=[];if(e.hasOwnProperty(rules.clause.WHERE)?e[rules.clause.WHERE].op?e[rules.clause.WHERE].op in rules.booleanOperators||n.push("Non-boolean WHERE clause operator"):n.push("Missing WHERE clause operator"):n.push("Missing WHERE clause"),e.hasOwnProperty(rules.clause.HAVING)&&(e[rules.clause.HAVING].op?e[rules.clause.HAVING].op in rules.booleanOperators||n.push("Non-boolean HAVING clause operator"):n.push("Missing HAVING clause operator")),e.hasOwnProperty(rules.clause.GROUP_BY)&&!e.hasOwnProperty(rules.clause.AGGREGATE)&&n.push("No AGGREGATE clause specified with GROUP_BY clause"),e.hasOwnProperty(rules.clause.SELECT)){var i=e[rules.clause.SELECT];if(isArrayLike(i))for(var r=0;r<i.length;r++)i[r].op&&i[r].op in rules.aggregateOperators&&n.push('In SELECT clause, aggregate operator "'+i[r].op+'" specified in selector at index '+r);else n.push("SELECT clause must be an array")}if(e.hasOwnProperty(rules.clause.LIMIT)){var a=e[rules.clause.LIMIT];(!isNumberLike(a)||Number(a)<=0||Number(a)!=Math.floor(Number(a)))&&n.push("LIMIT must be a positive integer")}return 0<t&&(n=map(n,function(e){return"Sub-rule "+t+": "+e})),e.hasOwnProperty(rules.clause.FROM)&&(n=n.concat(rules.verify(e[rules.clause.FROM],t+1))),n},rules.select=function(e,t){return map(t,function(t){return map(e,function(e){return rules.operate(t,e)})})},rules.executeRecursively=function(t,e){var n=e;if(t.hasOwnProperty(rules.clause.FROM)&&(n=rules.executeRecursively(t[rules.clause.FROM],n)),n=filter(n,function(e){return rules.operate(e,t[rules.clause.WHERE])}),t.hasOwnProperty(rules.clause.AGGREGATE)){var i=rules.groupBy(t[rules.clause.GROUP_BY],n),r=rules.aggregate(t[rules.clause.AGGREGATE],i);n=rules.project(i,r)}if(t.hasOwnProperty(rules.clause.HAVING)&&(n=filter(n,function(e){return rules.operate(e,t[rules.clause.HAVING])})),t.hasOwnProperty(rules.clause.ORDER_BY)&&(n=rules.orderBy(t[rules.clause.ORDER_BY],n)),t.hasOwnProperty(rules.clause.LIMIT)){var a=Number(t[rules.clause.LIMIT]);n=n.slice(0,a)}return t.hasOwnProperty(rules.clause.SELECT)&&(n=rules.select(t[rules.clause.SELECT],n)),n},rules.execute=function(e,t){e=rules.rewrite(e);var n=rules.verify(e);if(0<n.length)throw new Error("Rule "+json.stringify(e)+" has violations: "+n.join("\n"));return rules.executeRecursively(e,t)},rules.isSatisfied=function(t,e){try{return 0<rules.execute(t,e).length}catch(e){return log("Rules","Error "+e.toString()+" while evaluating rule "+json.stringify(t)),!1}},optly.Visitor=function(){this.audiences={},this.dimensions={},this.persistentAudiences={},this.segmentationAudiences={}},optly.Visitor.prototype.initialize=function(){timer.addEvent("Visitor","Initializing"),this.loadPersistentAudiences(),each(segmenter.getSegmentsList(),goog.bind(function(e){timer.addEvent("Visitor","Found segment "+e);var t=data.getSegment(e);t&&t.audience_id?(timer.addEvent("Visitor","Adding to audience "+t.audience_id),this.setInAudience(t.audience_id,!0,{updateSegment:!1})):t&&t.dimension_id&&(timer.addEvent("Visitor","Setting dimension value "+t.dimension_id),this.saveDimensionValue(t.dimension_id,segmenter.getSegmentValue(e),!1))},this))},optly.Visitor.prototype.isInAudience=function(e){var t=this.persistentAudiences.hasOwnProperty(e)||this.segmentationAudiences.hasOwnProperty(e);if(!this.audiences.hasOwnProperty(e)||!t)try{this.audiences[e]=this.testAudienceConditions(e)}catch(e){timer.addEvent("Visitor","Error: "+e.message)}return this.audiences[e]},optly.Visitor.prototype.setInAudience=function(e,t,n){if(n=extend({persist:!0,savePersistentAudiences:!0,updateSegment:!0},n),data.getAudience(e)){this.audiences[e]=t;var i=data.getAudienceSegmentId(e);i?this.segmentationAudiences[e]=t:n.persist?this.persistentAudiences[e]=t:delete this.persistentAudiences[e],i&&n.updateSegment&&this.updateSegment(i,t),!i&&n.persist&&n.savePersistentAudiences&&this.persistAudiences()}else timer.addEvent("Visitor","Unable to find audience "+e)},optly.Visitor.prototype.addToAudience=function(e){this.setInAudience(e,!0)},optly.Visitor.prototype.removeFromAudience=function(e){this.setInAudience(e,!1)},optly.Visitor.prototype.removeFromAllAudiences=function(){each(this.audiences,goog.bind(function(e){this.setInAudience(e,!1,{persist:!!this.persistentAudiences.hasOwnProperty(e)})},this))},optly.Visitor.prototype.getAudiences=function(){return this.audiences},optly.Visitor.prototype.getDimensionValue=function(e){var t=void 0;if(this.dimensions.hasOwnProperty(e))t=this.dimensions[e];else try{t=this.calculateDimensionValue(e)}catch(e){timer.addEvent("Visitor","Error: "+e.message)}return t},optly.Visitor.prototype.getDimensionValues=function(){return this.dimensions},optly.Visitor.prototype.saveDimensionValue=function(e,t,n){return n=!isDefined(n)||n,isDefined(t)&&null!==t&&String(t)?(n&&(t=segmenter.standardizeValue(String(t),!1)),this.dimensions[e]=t):delete this.dimensions[e],this.dimensions[e]},optly.Visitor.prototype.setDimensionValue=function(e,t,n){var i=data.getDimensionIdByApiName(e)||e;if(data.getDimension(i))if("custom_dimension"===data.getDimensionType(i)){t=this.saveDimensionValue(i,t,n);var r=data.getDimensionSegmentId(i);r&&this.updateSegment(r,t),timer.addEvent("Visitor",'Set dimension "'+i+'" to "'+t+'"')}else timer.addEvent("Visitor",'Unknown dimension "'+i+'"');else timer.addEvent("Visitor","Unable to find dimension "+e)},optly.Visitor.prototype.calculateDimensionValue=function(e){var t,n,i=data.getDimensionType(e)||"";if(!data.getDimension(e))throw new Error(goog.DEBUG?"Unable to find dimension for id: "+e:e);if("custom_dimension"===i)throw new Error(goog.DEBUG?"calculateDimensionValue called on custom dimension "+e:e);return(t=optly.Visitor.getConditionGetter(i))&&(n=t(data.getDimensionName(e))),timer.addEvent("Visitor","Got dimension ("+i+") value "+e+": "+json.stringify(n)),n},optly.Visitor.prototype.testAudienceConditions=function(e){var t=data.getAudience(e);if(!t)throw new Error("Unable to find audience for id: "+e);var n=condition.compoundTest(this,t.conditions);return timer.addEvent("Visitor","Checking if in audience "+e+": "+n),n},optly.Visitor.prototype.updateSegment=function(e,t){t?segmenter.addToSegment(e,t):segmenter.removeFromSegment(e)},optly.Visitor.prototype.loadPersistentAudiences=function(){var e=cookie.get(AUDIENCE_COOKIE_NAME);e&&0<e.length&&each(e.split(","),goog.bind(function(e){this.setInAudience(e,!0,{persist:!0,savePersistentAudiences:!1})},this))},optly.Visitor.prototype.persistAudiences=function(){var t=[];each(this.persistentAudiences,goog.bind(function(e){this.audiences[e]&&t.push(e)},this)),t.sort(),cookie.set(AUDIENCE_COOKIE_NAME,t.join(","),DEFAULT_TRACKING_COOKIE_EXPIRATION)},optly.Visitor.getConditionGetter=function(e){return{browser:goog.bind(condition.facade.getBrowser,condition.facade),browser_version:goog.bind(condition.facade.getBrowser,condition.facade),behavior:goog.bind(condition.facade.getBehaviorEvents,condition.facade),campaign:goog.partial(segmenter.getSegmentValueFromType,"campaign"),cookies:goog.bind(condition.facade.getCookie,condition.facade),custom_tag:goog.bind(condition.facade.getCustomTagValue,condition.facade),default_behavior:goog.bind(condition.facade.getDefaultBehaviorAttributes,condition.facade),device:goog.bind(condition.facade.getDevice,condition.facade),event:goog.bind(condition.facade.triggeredCustomEvent,condition.facade),first_session:goog.bind(condition.facade.getIsFirstSession,condition.facade),has_ppid:goog.bind(condition.facade.hasPPID,condition.facade),ip:goog.bind(condition.facade.getIP,condition.facade),language:goog.bind(condition.facade.getBrowserLanguage,condition.facade),list:goog.bind(condition.facade.getListMembershipStatus,condition.facade),location:goog.bind(condition.facade.getLocation,condition.facade),query:goog.bind(condition.facade.getQueryParameter,condition.facade),platform:goog.bind(condition.facade.getPlatform,condition.facade),referrer:goog.bind(condition.facade.getReferrer,condition.facade),segment:goog.bind(condition.facade.hasSegment,condition.facade),source_type:goog.partial(segmenter.getSegmentValueFromType,"source_type"),third_party_dimension:goog.bind(condition.facade.getThirdPartyData,condition.facade),time_and_day:goog.bind(condition.facade.getDate,condition.facade),url:goog.bind(condition.facade.getCurrentUrl,condition.facade),visitor:goog.bind(condition.facade.getNewVsReturning,condition.facade),dynamic_customer_profile:goog.bind(condition.facade.getDynamicCustomerProfileConditions,condition.facade)}[e]};var visitor=new optly.Visitor;rule_builder.MILLIS_IN_A_DAY=864e5,rule_builder.aggregateField=function(e,t){return isString(t)&&(t=[t]),t=t||rules.DEFAULT_FIELD,[rules.generateAlias(e,t)]},rule_builder.groupField=function(e){return isString(e)&&(e=[e]),[(e=e||rules.DEFAULT_FIELD).join(".")]};var OP_MAP={"<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","==":"eq"},r4;function canonicalizeOperator(e){return e=trim((e||"").toString()),OP_MAP[e]||e}function buildPicker(e,t,n){var i={where:t};if(e.count&&(i.limit=e.count),e.modifier===rule_builder.FREQUENCY_FILTERS.MOST_FREQUENT){var r=rule_builder.getFieldKeyPathForSource(e.name,n),a=rule_builder.aggregate("count"),o=rule_builder.aggregateField("count");return extend(i,{select:[{field:rule_builder.groupField(r)}],groupBy:rule_builder.groupBy([r]),aggregate:[a],orderBy:[{field:o,direction:"DESC"}]})}return extend(i,{orderBy:[{field:[behavior.FIELDS.TIME],direction:"DESC"}]})}rule_builder.fieldComparison=function(e,t,n){return isString(t)&&(t=[t]),{op:canonicalizeOperator(e),args:[{field:t},{value:n}]}},rule_builder.relativeTimeComparison=function(e,t){return{op:canonicalizeOperator(e),args:[{op:"-",args:[{eval:"now"},{field:[behavior.FIELDS.TIME]}]},{value:t*rule_builder.MILLIS_IN_A_DAY}]}},rule_builder.rangeTimeComparison=function(e){return isArrayLike(e)?{op:"between",args:[{field:[behavior.FIELDS.TIME]},{value:e[0]||+new Date(0)},{value:e[1]||+new Date}]}:(timer.addEvent("Rule builder","rangeTimeComparison passed invalid range "+json.stringify(e)),null)},rule_builder.groupBy=function(e){for(var t=[],n=0;n<e.length;n++)t[n]={field:e[n]};return t},rule_builder.aggregate=function(e,t){return isString(t)&&(t=[t]),{op:e,args:[{field:t=t||rules.DEFAULT_FIELD}]}},rule_builder.SOURCE_TYPES={BEHAVIOR:"events",DEFAULT_BEHAVIOR:"default_behavior",CUSTOM_BEHAVIOR:"custom_behavior",DCP:"dcp"},rule_builder.FREQUENCY_FILTERS={MOST_FREQUENT:"most_frequent",LEAST_FREQUENT:"least_frequent"},rule_builder.RECENCY_FILTERS={MOST_RECENT:"most_recent",LEAST_RECENT:"least_recent"},rule_builder.TOP_LEVEL_BEHAVIOR_FIELDS=(r4={},each(behavior.FIELDS,function(e,t){r4[t]=!0}),r4),rule_builder.getFieldKeyPathForSource=function(e,t){t=t||rule_builder.SOURCE_TYPES.BEHAVIOR;var n=[];return isString(e)?(n=[e],t!==rule_builder.SOURCE_TYPES.BEHAVIOR||e in rule_builder.TOP_LEVEL_BEHAVIOR_FIELDS||(n=[behavior.FIELDS.OPTIONS,e])):n=e,n},rule_builder.BehaviorTagFilterSpec,rule_builder.BehaviorAudienceSpec,rule_builder.buildFromSpec=function(o){if(!(o.action||o.filters&&0!==o.filters.length))throw new Error('Audience spec must have an "action" field or at least one "filter" '+json.stringify(o));var s=rule_builder.fieldComparison("gt",behavior.FIELDS.TIME,0),l=[],c=[];if(o.action&&(c.push(rule_builder.fieldComparison("eq",behavior.FIELDS.NAME,o.action.value)),o.action.type&&c.push(rule_builder.fieldComparison("eq",behavior.FIELDS.TYPE,o.action.type))),o.time)if("last_days"===o.time.type)c.push(rule_builder.relativeTimeComparison("lte",o.time.days));else if("range"===o.time.type){var e=rule_builder.rangeTimeComparison([o.time.start,o.time.stop]);e&&c.push(e)}else timer.addEvent("Rule builder",'Audience spec has bad "time" type',o.time.type);if(s={op:"and",args:c},o.count&&l.push({where:rule_builder.fieldComparison(o.count.comparator,"0",o.count.value),from:{select:[{field:rule_builder.aggregateField("count")}],where:s,aggregate:[rule_builder.aggregate("count")]}}),o.filters&&each(o.filters,function(e){var t,n,i=rule_builder.getFieldKeyPathForSource(e.name,o.source);if(e.modifier===rule_builder.FREQUENCY_FILTERS.MOST_FREQUENT?(t=rule_builder.aggregate("count"),n=rule_builder.aggregateField("count")):e.modifier===rule_builder.RECENCY_FILTERS.MOST_RECENT&&(t=rule_builder.aggregate("max",behavior.FIELDS.TIME),n=rule_builder.aggregateField("max",behavior.FIELDS.TIME)),t){var r=i,a=rule_builder.groupField(r);l.push({where:rule_builder.fieldComparison(e.comparator,"0",e.value),from:{select:[{field:a}],where:s,groupBy:rule_builder.groupBy([r]),aggregate:[t],orderBy:[{field:n,direction:"DESC"}],limit:1}})}else c.push(rule_builder.fieldComparison(e.comparator,i,e.value))}),o.pick){if(0<l.length)throw new Error('A "pick" clause must not be specified with "count" or "most_recent", "most_frequent" modifiers'+json.stringify(o));return[buildPicker(o.pick,s,o.source)]}return 0<l.length?l:[{where:s}]},optly.timeAndDayInterval.DELIM="_",optly.timeAndDayInterval.DAYS_DELIM=",",optly.timeAndDayInterval.TIME_DELIM=":",optly.timeAndDayInterval.serialize=function(e){return e.start_time+optly.timeAndDayInterval.DELIM+e.end_time+optly.timeAndDayInterval.DELIM+e.days.join(optly.timeAndDayInterval.DAYS_DELIM)},optly.timeAndDayInterval.deserialize=function(e){var t=e.split(optly.timeAndDayInterval.DELIM);if(3!==t.length)throw new Error("Invalid time and day string "+e);var n=t[2].split(optly.timeAndDayInterval.DAYS_DELIM);return{start_time:t[0],end_time:t[1],days:n}},optly.timeAndDayInterval.timeStringToMinutes=function(e){var t=e.split(optly.timeAndDayInterval.TIME_DELIM);if(2!==t.length)throw new Error("optly.timeAndDayInterval.timeStringToMinutes: Invalid time string "+e);return 60*parseInt(t[0],10)+parseInt(t[1],10)},optly.timeAndDayInterval.test=function(e,t){var n=optly.timeAndDayInterval.deserialize(e),i=optly.timeAndDayInterval.timeStringToMinutes(n.start_time),r=optly.timeAndDayInterval.timeStringToMinutes(n.end_time),a=60*t.getHours()+t.getMinutes(),o=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][t.getDay()];return i<=a&&a<=r&&-1!==$.inArray(o,n.days)},condition.DimensionCondition,condition.test=function(e,t){var n=!!t.manualActivation,i=t.objectType?t.objectType:"experiment",r="experiment"===i,a=t.enabledStatus,o=t.visitor||visitor;timer.addEvent("Condition","Testing "+i+" "+e);var s=r&&(isDefined(a)?!!a:data.isExperimentEnabled(e)),l=r&&data.isExperimentManuallyActivated(e),c=data.getConditions(e,i);if(r&&!s)return timer.addEvent("Condition","Failed for "+i+" "+e+" (paused)"),optly.client.preview.Logger.setReason(e,"it is paused"),!1;if(r&&!n&&l)return timer.addEvent("Condition"," Failed for "+i+" "+e+" (manual activation mode)"),optly.client.preview.Logger.setReason(e,"it is set to use manual activation mode"),!1;if(c){if(!condition.testLegacyConditions(c,e,i))return timer.addEvent("Condition","Failed for "+i+" "+e+" (condition failed)"),!1}else if(!condition.testAudienceConditions(o,e,i))return!1;return!0},condition.testAudienceConditions=function(e,t,n){var i=[],r=[];if("experiment"===n)i=data.getExperimentAudienceIds(t),r=data.getExperimentUrls(t)||[];else{if("segment"!==n)return timer.addEvent("Condition","Not a valid objectType: "+n),!1;var a=data.getSegmentAudienceId(t);a&&(i=[a])}return 0<i.length&&(timer.addEvent("Condition","Testing audiences for "+n+" "+t+": "+i),!any(i,goog.bind(e.isInAudience,e)))?(timer.addEvent("Condition","Failed to match any audiences for "+n+" "+t),!1):!(0<r.length&&(timer.addEvent("Condition","Testing URLs for "+n+" "+t),!condition.testUrlDimensionValues(r,condition.facade.getCurrentUrl())))||(timer.addEvent("Condition","Failed to match any URL for "+n+" "+t),!1)},condition.testUrlDimensionValues=function(e,t){var n=[],i=[];each(e,function(e){e.negate?i.push(e):n.push(e)});var r=function(e){return any(e,function(e){return condition.testUrl(t,e)})};return!r(i)&&(0===n.length||r(n))},condition.testLegacyConditions=function(e,s,t){var l="experiment"===(t=t||"experiment"),c=!0,u=condition.legacyTestFunctions;return each(e,function(e){var t=e.type;if(l&&e.only_first_time&&plan.containsExperiment(s)&&!optly.client.preview.ENABLED)timer.addEvent("Condition",t+" condition passed because it only gets checked when bucketing",!0);else{var n=u[t],i=!e.not,r=n(e),a=r!==i,o="the visitor "+(r?"passed":"failed")+" a "+t+" targeting condition  when it needed to "+(i?"pass":"fail");if(timer.addEvent("Condition","Found that "+o,!a),a)return c=!1,optly.client.preview.Logger.setReason(s,o),!1}}),c},condition.testBrowsers=function(e){var t=condition.facade.getBrowser();return any(e.values,function(e){return condition.testBrowser(t,{value:e})})},condition.compareVersion=function(e,t){if(!t)return 0;for(var n=t.toString().split("."),i=e.toString().split("."),r=0;r<n.length;r++){if(!isDefined(i[r]))return-1;if(isNaN(Number(i[r]))){if(i[r]!==n[r])return-1}else{if(Number(i[r])<Number(n[r]))return-1;if(Number(i[r])>Number(n[r]))return 1}}return 0},condition.testBrowser=user.LEGACY_BROWSER?function(e,t){var n=t.value,i=e.id,r=e.version,a=e.mobileId;if(a&&"unknown"!==a)return timer.addEvent("Condition",a,!0),"mobile"===n||n===a;if(0===n.indexOf(i)){var o=n.substr(i.length);return 0===condition.compareVersion(r,o)}return!1}:goog.nullFunction,condition.testBrowserVersion=function(e,t){var n=t.value,i=e.id,r=e.version;if(0===n.indexOf(i)){var a=n.substr(i.length);return 0===condition.compareVersion(r,a)}return!1},condition.testBehavior=function(t,e){try{var n=[],i=json.parse(e.value);return n=isDefined(i.version)?rule_builder.buildFromSpec(i):[i],every(n,function(e){return rules.isSatisfied(e,t)})}catch(e){}return!1},condition.testDefaultBehavior=function(e,t){try{e=e||{};var n=json.parse(t.value);return rules.isSatisfied(n,[e])}catch(e){}return!1},condition.testCampaign=function(e,t){var n=t.value;return"string"==typeof n&&("regex"===t.match?e=safeDecodeUriComponent(e):n=segmenter.standardizeValue(n)),"none"===e&&(e=null),condition.hasMatch(n,t.match,e)},condition.testCode=function(e){return condition.testCodeResult(null,e)},condition.testCodeResult=function(e,t){var n=t.value;if(void 0===n)return!0;try{return Boolean(evaluator.executeCode(n))}catch(e){return!1}},condition.testCookies=function(e){for(var t,n=e.names||[],i=e.values||[],r=0;r<n.length;r++)if(t=n[r],condition.testCookie(condition.facade.getCookie(t),{value:i[r]||void 0}))return!0;return!1},condition.testCookie=function(e,t){return condition.hasMatch(t.value,t.match,e)},condition.testTimeAndDay=function(e,t){return optly.timeAndDayInterval.test(t.value,e)},condition.testList=function(e,t){if(null===e||!isDefined(e))return!1;var n=t.value;return isDefined(n)?e.toString()===n:""===e||!1!==e},condition.testCustomDimension=function(e,t){var n=t.value;return isDefined(n)?n==e:isDefined(e)},condition.testCustomTags=function(e){return any(e.values,function(e){var t=e.key;return condition.testCustomTag(condition.facade.getCustomTagValue(t),{value:e.value})})},condition.testCustomTag=function(e,t){return condition.hasMatch(t.value,t.match,e)},condition.testDevice=function(e,t){var n=t.value;return"unknown"!==e.id?e.id===n:"tablet"===n?"tablet"===e.type:"mobile"===n?e.isMobile&&"tablet"!==e.type:"desktop"===n&&!e.isMobile},condition.testEvents=function(e){return any(e.values,function(e){var t=condition.facade.triggeredCustomEvent(e);return condition.testEvent(t)})},condition.testEvent=function(e){return e},condition.testFirstSession=function(e){return e},condition.testHasPPID=function(e){return e},condition.testIPs=function(e){var t=condition.facade.getIP();return any(e.values,goog.partial(condition.testIP,t))},condition.testIP=function(e,t){if(null===e)return!1;var n=t.value;switch(t.match){case"exact":if(e==n&&""!=e)return!0;break;case"prefix":if(0==e.indexOf(n))return!0;break;case"regex":try{var i=new RegExp(n)}catch(e){return!1}if(i.test(e))return!0;break;case"cidr":try{return new optly.CIDR(n).containsIP(e)}catch(e){return!1}}return!1},condition.testLanguages=function(e){var t=condition.facade.getBrowserLanguage();return any(e.values,function(e){return condition.testLanguage(t,{value:e})})},condition.testLanguage=function(e,t){var n=t.value;return"any"===n||0===e.indexOf(n)},condition.testLocations=function(e){var t=condition.facade.getLocation();return any(e.values,function(e){return condition.testLocation(t,{value:e})})},condition.testLocation=function(e,t){if(null===e)return!1;var n=t.value.split("|"),i=$.trim(n[0]),r=$.trim(n[1]),a=$.trim(n[2]),o=$.trim(n[3]);switch(n.length){case 1:if(e.country===i)return!0;break;case 2:if(e.region===r&&e.country===i)return!0;break;case 3:if(e.city===a&&(e.region===r||""===r)&&e.country===i)return!0;break;case 4:if(e.continent===o)return!0}return!1},condition.testPlatform=function(e,t){var n=t.value.split("_"),i=n[0],r=n.slice(1);return i===e.id&&(0===r.length||(1<r.length?0<=condition.compareVersion(e.version,r[0])&&condition.compareVersion(e.version,r[1])<=0:0===condition.compareVersion(e.version,r[0])))},condition.testQueries=function(e){return 0===e.values.length||any(e.values,function(e){var t=e.key;return condition.testQueryParam(condition.facade.getQueryParameter(t),{value:e.value})})},condition.testQueryParam=function(e,t){return condition.hasMatch(t.value,t.match,e)},condition.testReferrers=function(e){var t=condition.facade.getDocumentReferrer();return any(e.values,goog.partial(condition.testReferrer,t))},condition.testReferrer=function(e,t){var n=t.value,i=t.match;return timer.addEvent("Condition","Testing referrer "+e+" against  "+n+" ("+i+")",!0),optly.match.matchUrl(e,n,i)},condition.testSegments=function(e){var t=condition.facade.getSegmentsList();return any(e.values,function(e){return condition.testSegment(inArray(e,t))})},condition.testSegment=function(e){return!!e},condition.testSourceType=function(e,t){return t.value===e},condition.testThirdPartyDimension=function(e,t){return isArrayLike(e)?any(e,goog.partial(condition.hasMatch,t.value,t.match)):condition.hasMatch(t.value,t.match,e)},condition.testUrls=function(e){var t=condition.facade.getCurrentUrl();return any(e.values,goog.partial(condition.testUrl,t))},condition.testUrl=function(e,t){var n=t.value,i=t.match;return timer.addEvent("Condition","Testing URL "+e+" against  "+n+" ("+i+")",!0),optly.match.matchUrl(e,n,i)},condition.testVisitor=function(e){var t=condition.facade.getNewVsReturning();return condition.testVisitorValue(t,e)},condition.testVisitorValue=function(e,t){switch(t.value){case"new":return"returning"!==e;case"returning":return"returning"===e}return!0},condition.testDynamicCustomerProfileCondition=function(e,t){return null!==e&&!!e[t.value]},condition.compoundTest=function(t,e){var n={and:function(e){return every(e,goog.partial(condition.compoundTest,t))},or:function(e){return any(e,goog.partial(condition.compoundTest,t))},not:function(e){if(1!==e.length)throw new Error(goog.DEBUG&&'"not" argument too long: '+json.stringify(e));return!condition.compoundTest(t,e[0])}};if(isArrayLike(e)){if(e[0]in n)return n[e[0]](e.slice(1));throw new Error(goog.DEBUG&&"Not an operator")}var i=e.dimension_id,r=data.getDimensionType(i),a=e.value;if(!r)throw new Error(goog.DEBUG&&"No dimension type for dimension: "+i);var o=condition.matchers[r];if(!o)throw new Error(goog.DEBUG&&"Unknown dimension type: "+r);return o(t.getDimensionValue(i),{value:a,match:e.match||"exact"})},condition.isReadyToTest=function(e){var t=!0;if(data.usesAudiences(e)){var n=[data.getSegmentAudienceId(e)];n[0]||(n=data.getExperimentAudienceIds(e)),t=every(n,function(e){var t=data.getAudience(e);return!t.conditions||condition.compoundReadyToTest(t.conditions)})}else data.isGeotargetingEnabled(e)&&(t=condition.matchersReadyToTest.ip(null)||condition.matchersReadyToTest.location(null));return t||timer.addEvent("Condition","Not ready to test (geotargeting): "+e),t},condition.compoundReadyToTest=function(e){if(isArrayLike(e))return every(e.slice(1),condition.compoundReadyToTest);var t=e.dimension_id,n=data.getDimensionType(t)||"",i=condition.matchersReadyToTest[n];return!i||i(e)},condition.legacyTestFunctions={browser:condition.testBrowsers,code:condition.testCode,cookies:condition.testCookies,custom_tag:condition.testCustomTags,event:condition.testEvents,ip:condition.testIPs,language:condition.testLanguages,location:condition.testLocations,query:condition.testQueries,referrer:condition.testReferrers,segment:condition.testSegments,url:condition.testUrls,visitor:condition.testVisitor},condition.matchers={browser:condition.testBrowser,browser_version:condition.testBrowserVersion,behavior:condition.testBehavior,campaign:condition.testCampaign,code:condition.testCodeResult,cookies:condition.testCookie,custom_dimension:condition.testCustomDimension,custom_tag:condition.testCustomTag,default_behavior:condition.testDefaultBehavior,device:condition.testDevice,event:condition.testEvent,first_session:condition.testFirstSession,ip:condition.testIP,language:condition.testLanguage,list:condition.testList,location:condition.testLocation,query:condition.testQueryParam,platform:condition.testPlatform,referrer:condition.testReferrer,segment:condition.testSegment,source_type:condition.testSourceType,time_and_day:condition.testTimeAndDay,third_party_dimension:condition.testThirdPartyDimension,url:condition.testUrl,visitor:condition.testVisitorValue,dynamic_customer_profile:condition.testDynamicCustomerProfileCondition,has_ppid:condition.testHasPPID},condition.matchersReadyToTest={ip:function(e){return optly.client.rum.instance.recordEvent("checkGeo"),null!==condition.facade.getIP()},location:function(e){return optly.client.rum.instance.recordEvent("checkGeo"),null!==condition.facade.getLocation()},list:function(e){var t=e.dimension_id;return null!==condition.facade.getListMembershipStatus(data.getDimensionName(t)||"")},dynamic_customer_profile:function(e){var t=condition.facade.getDynamicCustomerProfileConditions();return isNonNullObject(t)&&e.value in t}},condition.hasMatch=function(e,t,n){var i=isDefined(n)&&null!==n,r=isDefined(e)&&null!==e;switch(t||(r?"exact":"exists")){case"exists":return i;case"exact":return i&&String(n)===e;case"substring":return i&&containsString(String(n),e);case"regex":try{if(r&&i){var a=new RegExp(e);return containsRegEx(String(n),a)}return!1}catch(e){return!1}case"range":var o=e.split(":"),s=parseFloat(o[0]),l=parseFloat(o[1]),c=parseFloat(n);return s<=c&&c<=l;default:return!1}},template.evaluate=function(e){e=$.trim(e);var t="";if(window[GLOBAL]&&window[GLOBAL][GLOBAL_DATA]){var n=e.match(template.URL_PARAM_REGEX);if(n){var i=n[1],r=window[GLOBAL][GLOBAL_DATA].visitor.params[i];void 0===r&&(r=""),t=r}else{for(var a=e.split("."),o=window[GLOBAL],s=0,l=a.length;s<l;s++)if(null==(o=o[a[s]])){o="";break}t=""+o}}return timer.addEvent("Template",e+" evaluated to: '"+t+"'"),t},template.render=function(e){return e.replace(template.TEMPLATE_REGEX,template.replacer)},template.replacer=function(e,t){return template.evaluate(t)},template.TEMPLATE_REGEX=/\{\{ *optimizely\.([^\n\r{}<>]*)\}\}/g,template.URL_PARAM_REGEX=/^data\.visitor\.params\.(.*)$/,feature_detect.requiredFeatures=[function(){var e=detect.detect();if("ie"===e.browserId){try{var t=Number(e.browserVersion)}catch(e){return}if(t<7)throw new Error("IE is only supported on version 8+ (detected "+t+")");if(t<8&&"windows"===e.platform.id&&e.platform.version&&arrayContains(["xp","vista"],e.platform.version.toLowerCase()))throw new Error("IE7 is not supported")}},function(){return json.parse(json.stringify({a:123}))}],feature_detect.check=function(){var t=[];if(each(feature_detect.requiredFeatures,function(e){try{e()}catch(e){t.push(e.message)}}),0<t.length)throw new Error("Feature(s) not supported: "+t.join("; "))},optly.client.diagnostic.ENABLED=!1,plan.CodeStep,plan.EventStep,plan.Step,plan.addChangeHandler=function(e){plan.changeHandlers.push(e)},plan.addVariation=function(e,t,n,i){n=!0===n,i=!0===i;var r=!1,a=data.getVariationExperimentId(e);if(a&&(i||!plan.containsExperiment(a))){if(r=!0,i&&plan.containsExperiment(a))for(var o=0;o<plan.variations.length;o++)plan.variations[o].experimentId===a&&plan.variations.splice(o,1);plan.variations.push({experimentId:a,id:e,source:t}),n&&evaluator.enqueue(a),plan.variationExperimentIds[a]=!0,plan.callChangeHandlers(),timer.addEvent("Plan","Added experiment "+a+" and variation id "+e+" to the plan, source is "+t,!0)}return r},plan.buildMultivariateId=function(e,t){for(var n=[],i=data.getExperimentSectionIds(e),r=0;r<i.length;r++){var a=t[i[r]];if(a===IGNORED_VARIATION_ID)return"";n.push(a)}return n.join(VARIATION_ID_DELIMITER)},plan.containsExperiment=function(e){return e in plan.ignoredExperimentIds||e in plan.variationExperimentIds},plan.filterUrlSpecificVariationCode=function(e){for(var t=e.split(VARIATION_CODE_DELIMITER),n=[],i=!0,r=0,a=t.length;r<a;r++){var o=$.trim(t[r]);if(o===VARIATION_URL_END)i=!0;else if(""!==o){var s=VARIATION_URL_START_RE.exec(o);if(s&&13===s.length){var l=s[2]?s[2].split(VARIATION_URL_DELIMITER):[],c=s[4]?s[4].split(VARIATION_URL_DELIMITER):[],u=s[6]?s[6]:"substring",d=s[8]?s[8].split(VARIATION_URL_DELIMITER):[],p=s[10]?s[10].split(VARIATION_URL_DELIMITER):[];if(0<l.length){var g=plan.zipConditions(l,d,u);i=condition.testUrls(g)}if(i&&0<c.length){var f=plan.zipConditions(c,p,u);i=!condition.testUrls(f)}}else i&&n.push(o)}}return n.join(VARIATION_CODE_DELIMITER)},plan.getProjectClickGoalWithCustomTargetingSteps=function(e){for(var t=data.getProjectClickGoalsWithCustomTargeting(),n=0,i=t.length;n<i;n++){var r={eventName:t[n].event_name,selector:t[n].selector,type:"event '"+t[n].event_name+"' (click goal)",waitUntilSelectorReady:!0};"revenue"in t[n]&&(r.revenue=t[n].revenue),e.push(r)}},plan.getSteps=function(e){void 0===e?e=[]:isNumberLike(e)&&(e=[e]),e=e;var t=plan.getVariationIds(e),n=[],i=[],r=[],a=[];plan.getProjectClickGoalWithCustomTargetingSteps(n),each(e,function(e){plan.getExperimentSteps(e,n,r,i,a)}),each(t,function(e){plan.getVariationSteps(e,i,a)});var o=[];return appendArray(o,i),appendArray(o,r),appendArray(o,a),appendArray(o,n),o},plan.getVariationId=function(t){var n=null;return each(plan.variations,function(e){t==e.experimentId&&(n=e.id)}),n},plan.getVariationIds=function(t){var n=[],i=!isDefined(t);return t=t||[],each(plan.variations,function(e){(i||arrayContains(t,e.experimentId))&&n.push(e.id)}),n},plan.ignoreExperiment=function(e,t){!(t=!0===t)&&plan.containsExperiment(e)||(plan.ignoredExperimentIds[e]=!0,plan.callChangeHandlers())},plan.isExperimentIgnored=function(e){return e in plan.ignoredExperimentIds},plan.removeExperiment=function(e){plan.ignoredExperimentIds[e]&&delete plan.ignoredExperimentIds[e],plan.variationExperimentIds[e]&&delete plan.variationExperimentIds[e];for(var t=0;t<plan.variations.length;t++)plan.variations[t].experimentId===e&&plan.variations.splice(t,1);plan.callChangeHandlers()},plan.log=function(){directive.shouldLog&&(each(plan.ignoredExperimentIds,function(e){var t=data.getExperimentName(e);timer.addEvent("Plan","Ignore experiment '"+t+"' ("+e+")")}),each(plan.variations,function(e,t){var n=data.getVariationExperimentId(e.id),i=data.getVariationName(e.id);timer.addEvent("Plan",data.getExperimentString(n)+' in variation "'+i+'" ('+e.id+")")}))},plan.readCookie=function(){var t=cookie.get(BUCKET_COOKIE_NAME);if(t){try{t=json.parse(t)}catch(e){t={}}var i={};each(t,function(e,t){t=String(t);var n=data.getVariationExperimentId(t);1<data.getExperimentSectionIds(n).length&&-1===t.indexOf(VARIATION_ID_DELIMITER)?(i[n]=i[n]||{},i[n][e]=t):t!==IGNORED_VARIATION_ID?plan.addVariation(t,"cookie",!1)||(plan.foreignBucketMap[e]=t):plan.ignoreExperiment(e)}),each(i,function(e,t){var n=plan.buildMultivariateId(e,t);0<n.length?plan.addVariation(n,"cookie",!1):plan.ignoreExperiment(e)})}},plan.writeCookie=function(){var n={};each(plan.foreignBucketMap,function(e,t){n[e]=t}),each(plan.variations,function(e){var t=data.getVariationExperimentId(e.id);n[t]=e.id}),each(plan.ignoredExperimentIds,function(e){n[e]=IGNORED_VARIATION_ID}),each(data.getBlacklistedExperiments(),function(e){e in n&&delete n[e]}),cookie.set(BUCKET_COOKIE_NAME,json.stringify(n),directive.trackingCookieExpiration)},plan.callChangeHandlers=function(){each(plan.changeHandlers,function(e){e()})},plan.getExperimentSteps=function(n,i,e,t,r){each(data.getExperimentEvents(n),function(t,e){each(e,function(e){i.push({eventName:e.eventName,experimentIds:e.experimentIds,revenue:e.revenue,selector:t,type:"event '"+e.eventName+"' (experiment "+n+")",waitUntilSelectorReady:!0})})});var a=data.getExperimentCss(n);a&&e.push({code:function(){$("body").append("<style>"+a+"</style>")},selector:"body",type:"global css (experiment "+n+")",waitUntilSelectorReady:!0});var o=data.getExperimentSteps(n);if(o)each(o.forced,function(e){t.push(e)}),each(o.safe,function(e){r.push(e)});else{var s=data.getExperimentCode(n);s&&plan.appendStepsFromCode(s,t,r)}},plan.getVariationSteps=function(e,t,n){var i=data.getVariationPages(e);if(i)each(i,function(e){!e.steps||e.includes&&!condition.testUrls({values:e.includes})||e.excludes&&condition.testUrls({values:e.excludes})||(t.push.apply(t,e.steps.forced),n.push.apply(n,e.steps.safe))});else{var r=data.getVariationCode(e);r=plan.filterUrlSpecificVariationCode(r),plan.appendStepsFromCode(r,t,n,e)}},plan.appendStepsFromCode=function(e,t,n,i){if(containsString(e,"_optimizely_redirect"))t.push({code:e,type:"code forced (redirect)",variationId:i});else{for(var r=e.split("\n"),a=!1,o=!1,s=[],l=plan.jQueryExpression,c=plan.rearrangeExpression,u=[];0<r.length;){var d=trim(r.shift()),p=0<u.length;if(d){if(containsRegEx(d,/_optimizely_evaluate\s{0,9}=\s{0,9}force/i)){o=!0;continue}if(containsRegEx(d,/_optimizely_evaluate\s{0,9}=\s{0,9}safe/i)||containsRegEx(d,/_optimizely_evaluate\s{0,9}=\s{0,9}end_force/i)){o=!1;continue}if(containsRegEx(d,/_optimizely_evaluate\s{0,9}=\s{0,9}editor_only/i)){a=!0;continue}if(containsRegEx(d,/_optimizely_evaluate\s{0,9}=\s{0,9}end_editor_only/i)){a=!1;continue}if(plan.commentRegex.exec(d))continue;if(a)continue;if(o)s.push(d);else{if(!p){var g=l.exec(d),f=[];if(g){f.push(g[1].replace(/^['"]|['"]$/g,""));var m=c.exec(d);m&&4<m.length&&f.push(m[4]),n.push({code:d,selector:f,type:"safe jquery",waitUntilSelectorReady:!0,variationId:i})}else p=!0}p&&u.push(d)}}}0<s.length&&t.push({code:s.join("\n"),type:"forced evaluation",variationId:i}),0<u.length&&n.push({code:u.join("\n"),type:"safe non-jquery",waitUntilDocumentReady:!0,variationId:i})}},plan.reset=function(){timer.addEvent("Plan","Resetting visitor buckets"),plan.foreignBucketMap={},plan.ignoredExperimentIds={},plan.variationExperimentIds={},plan.variations=[],plan.writeCookie()},plan.zipConditions=function(e,t,n){for(var i={values:[]},r=0,a=e.length;r<a;r++)i.values.push({value:e[r],match:t[r]||n});return i},plan.changeHandlers=[],plan.foreignBucketMap={},plan.ignoredExperimentIds={},plan.rearrangeExpression=/^\$j?\(['"](.+?)['"]\)\.detach\(\)\.(appendTo|insertAfter|insertBefore|prependTo)\(['"](.+?)['"]\);(?:\s|(?:\/\/.*|\/\*(?:[^*]|\*(?!\/))*\*\/))*$/,plan.commentRegex=/^(?:\s|(?:\/\/.*|\/\*(?:[^*]|\*(?!\/))*\*\/))*$/,plan.jQueryExpression=/^\$j?\((['"].+?['"]|document)\)\..+;(?:\s|(?:\/\/.*|\/\*(?:[^*]|\*(?!\/))*\*\/))*$/,plan.variationExperimentIds={},plan.variations=[],iapi.evaluateSegments=function(e){segmenter.reset(),segmenter.initialize(e)},iapi.initialize=function(e){window[GLOBAL].iapi={evaluateSegments:goog.partial(iapi.evaluateSegments,e)}},evaluator.bindTrackElementFromApi=function(e,t){if(e&&t)if(evaluator.isDocumentReady)timer.addEvent("Evaluator","Bound event "+t+" to selector "+e),evaluator.bindTrackElement(e,t);else{var n={eventName:t,selector:e,type:"event '"+t+"' (click goal)",waitUntilSelectorReady:!0};timer.addEvent("Evaluator","Add step to bind event "+n.eventName+" to selector "+n.selector),evaluator.steps.push(n)}},evaluator.evaluate=function(e,t){if(directive.isEnabled){isArrayLike(e)?evaluator.tellPreviewAboutExperiments(e):(e=[],evaluator.tellPreviewAboutExperiments(t)),e=e.concat(evaluator.evaluateQueue),evaluator.evaluateQueue=[];for(var n=0;n<e.length;n++)arrayContains(evaluator.evaluatedExperimentIds,e[n])||evaluator.evaluatedExperimentIds.push(e[n]);var i=plan.getSteps(e);appendArray(evaluator.steps,i),evaluator.doSteps()}},evaluator.doSteps=function(){var e=!1;for(evaluator.timeoutId=null,timer.addEvent("Evaluator",evaluator.waitCount+" times waited");!e&&0<evaluator.steps.length;){timer.addEvent("Evaluator",evaluator.steps.length+" steps remaining");var t=evaluator.steps.shift();if(e=evaluator.shouldWaitBeforeStep(t))evaluator.steps.unshift(t);else if(t.eventName){evaluator.doneWithSafeSteps(),timer.addEvent("Evaluator","Bound event "+t.eventName+" to selector "+t.selector);var n={};t.revenue&&(n={revenue:t.revenue,experimentIds:t.experimentIds}),evaluator.bindTrackElement(t.selector,t.eventName,n)}else t.code&&(timer.addEvent("Evaluator","Run code: "+t.code.toString()),evaluator.evaluateCode(t.code,t.variationId))}if(e){var i=0===evaluator.waitCount?FIRST_EVALUATION_WAIT_INTERVAL:EVALUATION_WAIT_INTERVAL;evaluator.timeoutId=setTimeout(evaluator.doSteps,i),evaluator.waitCount++}else timer.addEvent("Evaluator",evaluator.waitCount+" total times waited"),evaluator.doneWithSafeSteps()},evaluator.executeCode=function(fnOrCode){return"string"==typeof fnOrCode?eval(fnOrCode):fnOrCode()},evaluator.doneWithSafeSteps=function(){optly.client.rum.instance.recordEvent("flash"),activator.hasDelayedExperiments()||optly.client.rum.instance.recordEvent("flashGeo")},evaluator.enqueue=function(e){evaluator.evaluateQueue=evaluator.evaluateQueue||[],evaluator.evaluateQueue.push(e)},evaluator.getActiveExperimentIds=function(){return evaluator.evaluatedExperimentIds.concat(evaluator.evaluateQueue)},evaluator.getEvaluatedExperimentIds=function(){return evaluator.evaluatedExperimentIds},evaluator.isInQueue=function(e){return inArray(e,evaluator.evaluateQueue)},evaluator.evaluateProjectCode=function(){var e=data.getProjectCode();e&&(timer.addEvent("Evaluator","Running project level javascript."),evaluator.evaluateCode(e))},evaluator.evaluateCode=function(fn,variationId){if(fn){var isStringCode=!1,code;if("string"==typeof fn?(code=fn,isStringCode=!0):code=fn.toString(),redirect.getRedirectURL(code)){if(timer.addEvent("Evaluator","Redirect detected"),!redirect.okToRedirect(code))return void timer.addEvent("Evaluator","NOT OK to redirect");timer.addEvent("Evaluator","OK to redirect");var noCookieRedirect=redirect.detectNoCookieRedirect(code);timer.addEvent("Evaluator","setting a redirect cookie"+(variationId?" for variation: "+variationId:"")),redirect.setRedirectCookie(noCookieRedirect,variationId),redirect.setReferrerCookie()}isStringCode&&eval("var $j = $;");try{if(redirect.getRedirectURL(code)){$("head").append("<style type='text/css'>body{display:none;visibility:hidden;}</style>"),timer.addEvent("Evaluator","Hiding body before redirect");var isStandardRedirect=redirect.redirectRegexParams.test(code)||redirect.redirectRegex.test(code)||redirect.redirectRegexLegacy.test(code),keepBodyHidden=/_keep_body_hidden=(\S+)/.test(code);isStandardRedirect||keepBodyHidden?timer.addEvent("Evaluator","Standard redirect detected - Will not unhide body."):setTimeout(function(){document.body&&(document.body.style.visibility="visible",document.body.style.display="block",timer.addEvent("Evaluator","Unhiding body -- did not redirect"),optly.client.rum.instance.recordEvent("bodyUnhidden"))},1700)}evaluator.executeCode(fn)}catch(e){var shouldLog=directive.shouldLog;directive.shouldLog=!0,timer.addEvent("Evaluator","Error: "+e.message),timer.addEvent("Evaluator","Code: "+code),directive.shouldLog=shouldLog,timer.addEvent("Evaluator","Failed to run code: "+e.message)}}},evaluator.bindTrackElement=function(e,t,n){if(n=n||{},!evaluator.alreadyBoundClickTrackingEvents[e]||!evaluator.alreadyBoundClickTrackingEvents[e][t]){var i=function(e){tracker.addLogEvent(t,"custom",n)},r="touchmove",a="touchend",o="touchstart",s=$(e);if(0<s.length){var l=function(){s.unbind(a,i),s.unbind(r,l),s.unbind("mousedown",i)},c=function(){l(),s.bind(r,l),s.bind(a,i)};s.bind("mousedown",i),s.bind(o,c)}else{s=$("html");l=function(){s.undelegate(e,a,i),s.undelegate(e,r,l),s.undelegate(e,"mousedown",i)},c=function(){l(),s.delegate(e,a,i),s.delegate(e,r,l)};s.delegate(e,"touchstart",c),s.delegate(e,"mousedown",i)}evaluator.alreadyBoundClickTrackingEvents[e]||(evaluator.alreadyBoundClickTrackingEvents[e]={}),evaluator.alreadyBoundClickTrackingEvents[e][t]="mousedown touchstart"}},evaluator.handleDocumentReady=function(e){optly.client.rum.instance.recordEvent("docReady"),evaluator.isDocumentReady=!0,null!==evaluator.timeoutId&&(timer.addEvent("Evaluator","Document is ready"),clearTimeout(evaluator.timeoutId),0<evaluator.delayDomExecuteMilliseconds?setTimeout(evaluator.doSteps,evaluator.delayDomExecuteMilliseconds):evaluator.doSteps())},evaluator.setDelayDomExecute=function(e){evaluator.delayDomExecuteMilliseconds=e},evaluator.shouldWaitBeforeStep=function(e){var t=!1;if(e.waitUntilDocumentReady&&!evaluator.isDocumentReady)timer.addEvent("Evaluator","Document not ready yet"),t=!0;else if(e.waitUntilSelectorReady&&!evaluator.isDocumentReady){var n=e.selector;if(n){n=isArrayLike(n)?n:[n];for(var i=0;i<n.length;i++){var r=n[i];if(null!=r&&r.length)0===$("document"==r?document:r).length&&(timer.addEvent("Evaluator","'"+r+"' not found"),t=!0)}}}return t},evaluator.tellPreviewAboutExperiments=function(e){e||(e=data.getExperimentIds());for(var t=0;t<e.length;t++){var n=e[t],i=optly.client.preview.Logger.getReason(n);i?(optly.client.preview.Logger.addEvent("Not activating "+data.getExperimentString(n)+" because "+i+".",{type:"explanation"}),optly.client.preview.Logger.deleteReason(n)):optly.client.preview.Logger.addEvent("Activating "+data.getExperimentString(n)+".",{type:"activation",experimentId:n})}},evaluator.alreadyBoundClickTrackingEvents={},evaluator.evaluatedExperimentIds=[],evaluator.evaluateQueue=evaluator.evaluateQueue||[],evaluator.delayDomExecuteMilliseconds=0,evaluator.isDocumentReady=!1,evaluator.steps=[],evaluator.timeoutId=null,evaluator.waitCount=0,$(function(){setTimeout(function(){evaluator.handleDocumentReady()},50)}),optly.CIDR=function(e){this.cidrString=$.trim(e);var t=optly.CIDR.parseCIDR(this.cidrString);if(null===t)throw new Error("Invalid CIDR specification");this.maskedAddress=t.maskedAddress,this.mask=t.mask},optly.CIDR.IP,optly.CIDR.NetworkMask,optly.CIDR.NUM_IP_OCTETS=4,optly.CIDR.prototype.containsIP=function(e){var t=optly.CIDR.parseIP(e);if(null===t)throw new Error("Invalid ip: "+e);for(var n=0;n<optly.CIDR.NUM_IP_OCTETS;n++)if((t[n]&this.mask[n])!==this.maskedAddress[n])return!1;return!0},optly.CIDR.parseCIDR=function(e){var t=e.split("/");if(2!=t.length)return null;var n=parseInt(t[1],10);if(isNaN(n)||n<0||32<n)return null;var i=optly.CIDR.parseIP(t[0]);if(null===i)return null;for(var r=optly.CIDR.makeMask(n),a=0;a<optly.CIDR.NUM_IP_OCTETS;a++)i[a]=i[a]&r[a];return{maskedAddress:i,mask:r}},optly.CIDR.parseIP=function(e){var t=e.split(".");if(t.length!=optly.CIDR.NUM_IP_OCTETS)return null;for(var n=[],i=0;i<optly.CIDR.NUM_IP_OCTETS;i++){var r=optly.CIDR.parseOctet(t[i]);if(null===r)return null;n[i]=r}return n},optly.CIDR.parseOctet=function(e){if(3<e.length)return null;var t=parseInt(e,10);return isNaN(t)?null:e!==t.toString()?null:t<0||255<t?null:t},optly.CIDR.ONES_LOOKUP_TABLE=[0,128,192,224,240,248,252,254,255],optly.CIDR.makeMask=function(e){if(e<0||32<e)return null;for(var t=[],n=0;n<optly.CIDR.NUM_IP_OCTETS;n++)t[n]=0;var i=Math.floor(e/8),r=e%8;for(n=0;n<i;n++)t[n]=255;return i<optly.CIDR.NUM_IP_OCTETS&&(t[i]=optly.CIDR.ONES_LOOKUP_TABLE[r]),t},optly.match.matchUrl=function(e,t,n){switch(e=optly.match.stripVarFromQuery(e),n){case"exact":return(e=optly.match.stripUrl(e))===optly.match.stripUrl(t);case"regex":try{return Boolean(e.match(t))}catch(e){return!1}case"simple":return(e=optly.match.simplifyUrl(e))===(t=optly.match.simplifyUrl(t));case"substring":return e=optly.match.stripUrl(e,!0),t=optly.match.stripUrl(t,!0),-1!==e.indexOf(t);default:return!1}},optly.match.removeParameters=function(e){var t=e.indexOf("?");return-1!==t&&(e=e.substring(0,t)),-1!==(t=e.indexOf("#"))&&(e=e.substring(0,t)),e},optly.match.simplifyUrl=function(e){return optly.match.stripUrl(optly.match.removeParameters(e))},optly.match.stripUrl=function(e,t){e=(e=e.replace("/?","?")).toLowerCase().replace(/[/&?]+$/,"");var n=optly.match.REQUIRED_PREFIXES_TO_STRIP.slice(0);t||(n=n.concat(optly.match.OPTIONAL_PREFIXES_TO_STRIP));for(var i=n.length,r=0;r<i;r++){var a=n[r],o=new RegExp("^"+a);e=e.replace(o,"")}return e},optly.match.stripVarFromQuery=function(e){var t=e.split("?");if(t[1]){var n=t[1].split("&"),i=[];return $.each(n,function(){0!==this.indexOf(optly.match.QUERY_PREFIX)&&i.push(this)}),t[1]=i.join("&"),t.join("?")}return e},optly.match.REQUIRED_PREFIXES_TO_STRIP=["https?://.*?.?optimizelyedit.(com|test)/","https?://.*.?optimizelypreview.(com|test)/","https?://(edit|preview)(-hrd|-devel)?.optimizely.(com|test)/","https?://.*?.?optimizelyedit(-hrd)?.appspot.com/","https?://"],optly.match.OPTIONAL_PREFIXES_TO_STRIP=["www."],optly.match.QUERY_PREFIX="optimizely_",optly.taint.createDeconstructingFunction=function(i){return function(e){if("object"==typeof e&&optly.taint.isObjectPrototypeTainted()){var t=null;for(var n in e)e.hasOwnProperty(n)&&(t=i.call(this,n,e[n]));return t}return i.apply(this,arguments)}},optly.taint.createCleanJQueryEach=function(r,a){return function(e,t,n){if((void 0===e.length||a.isFunction(e))&&optly.taint.isObjectPrototypeTainted()){if(n){for(var i in e)if(e.hasOwnProperty(i)&&!1===t.apply(e[i],n))break}else for(var i in e)if(e.hasOwnProperty(i)&&!1==!t.call(e[i],i,e[i]))break}else r.apply(this,arguments);return e}},optly.taint.createCleanJQueryInit=function(i,o){var s=function(e,t,n){return new i(e,t,n)},l=optly.nativity.getNativeGetElementsByClassName();return function(e,t,n){var i=s,r=document.getElementsByClassName;if(!optly.nativity.isNativeFunction(r)&&l&&(i=function(e,t,n){document.getElementsByClassName=l;var i=s(e,t,n);return document.getElementsByClassName=r,i}),"string"==typeof e&&t&&"object"===o.type(t)&&optly.taint.isObjectPrototypeTainted()){var a=i(e,void 0,n);return a.attr(t),a}return i(e,t,n)}},optly.taint.fixJQueryTaintIssues=function(e){e.fn.attr=optly.taint.createDeconstructingFunction(e.fn.attr),e.fn.css=optly.taint.createDeconstructingFunction(e.fn.css),e.fn.extend=optly.taint.createDeconstructingFunction(e.fn.extend),e.each=optly.taint.createCleanJQueryEach(e.each,e),e.fn.init=optly.taint.createCleanJQueryInit(e.fn.init,e)},optly.taint.isObjectPrototypeTainted=function(){for(var e in{})return!0;return!1},main=function(){TEST_MODULE||optly.taint.fixJQueryTaintIssues($),timer.addEvent("Main","Started, revision "+data.getRevision());try{feature_detect.check()}catch(e){return void timer.addEvent("Main","Disabling: "+e.message)}if(query.process(),(directive.isEditor||directive.isPersonalizationEditor)&&(window.optimizelyDataApi={getProjectId:data.getProjectId}),directive.isDesktopAppEditor)timer.addEvent("Main","Disabling because in desktop app editor.");else{if(directive.isPersonalizationEditor)return timer.addEvent("Main","Disabling because personalization editor flag is set."),void loadScript("https://"+data.getWebHost()+"/js/innie.js?_="+ +new Date);if(api.initializePriorityOneApiCalls(),tracker.isOptedOut())return timer.addEvent("Main","Disabling because opted out"),void timer.flushLogs();!optly.client.preview.ENABLED||directive.previewVerified?!directive.previewScriptName||optly.client.preview.ENABLED?optly.client.preview.ENABLED||!directive.shouldLoadPreview||directive.previewScriptName?(directive.isSomeClientEnabled()&&evaluator.evaluateProjectCode(),api.initializePriorityOneApiCalls(),user.initialize(),asyncInfo.loadFromStore(),data.isListTargetingEnabled()&&asyncRequest.makeListTargetingRequest(),data.isDynamicCustomerProfileTargetingEnabled()&&asyncRequest.makeDynamicCustomerProfileTargetingRequest(),null!==data.getDCPServiceId()&&setTimeout(function(){dcp.alias(asyncInfo.dcpCache)},0),plan.readCookie(),segmenter.initialize(),redirect.initialize(),visitor.initialize(),api.initialize(visitor),optly.client.rum.instance.recordEvent("apiInitialize"),iapi.initialize(),query.processForceParameters(),directive.requestedInvalidForceParameters?preview_loader.loadSplashScreen("Force parameters are disabled for this project. See Project Code Settings."):(main.log(),directive.isEditor&&loadScript("https://"+data.getWebHost()+"/js/innie.js?_="+ +new Date),directive.isEnabled&&(distributor.distributeAll(),plan.writeCookie(),tracker.enableEngagementTracking(),directive.shouldSkipPageTracking||(0<directive.delayPageviewTracking?setTimeout(function(){tracker.addActivationEvent(document.location.href)},directive.delayPageviewTracking):tracker.addActivationEvent(document.location.href)),tracker.sendLogEvents(),integrator.makeThirdPartyRequests()),plan.log(),directive.isEditor?api.finalize():directive.isEnabled&&(optly.client.rum.instance.recordEvent("beginEvaluate"),evaluator.evaluate(),api.finalize(),timer.flushLogs(),data.isInstallationVerified()||tracker.sendVerificationRequest()),setTimeout(function(){activator.activateGeoDelayedExperiments(api.visitor)},GEO_TIMEOUT),setTimeout(function(){!optly.client.preview.ENABLED&&directive.shouldTrackEvents&&optly.client.rum.instance.sendRum()},GEO_TIMEOUT+1e3),timer.addEvent("Main","End of main"),optly.client.rum.instance.recordEvent("mainEnd"))):preview_loader.loadSplashScreen("This preview link has expired. Please return to Optimizely and preview again to get a new link."):preview_loader.loadPreview():timer.addEvent("Main","Disabling because preview project not verified.")}},main.log=function(){timer.addEvent("Info","Is Classic Optimizely enabled: "+directive.isEnabled),timer.addEvent("Info","Diagnostic enabled: "+optly.client.diagnostic.ENABLED),timer.addEvent("Info","Force variation enabled: "+data.isForceVariationEnabled()),timer.addEvent("Info","Browser type: "+user.getBrowserId()),timer.addEvent("Info","Browser version: "+user.getBrowserVersion());var e=user.getMobileId();"unknown"!==e&&timer.addEvent("Info","Mobile browser type: "+e),timer.addEvent("Info","New vs returning: "+user.getNewVsReturning()),timer.addEvent("Info","Source type: "+segmenter.getSourceType()),timer.addEvent("Info","User ID: "+id.getOrGenerateId())};var catchMain=optly.client.diagnostic.ENABLED?function(){try{main()}catch(e){tracker.sendErrorLog(e)}}:main;optly.client.preview.ENABLED||catchMain()},SLAVE_CLIENT={optimizely:[]};optimizelyCode(),optly.Cleanse.finish()}();